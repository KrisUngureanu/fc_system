{"version":3,"sources":["img/logo.png","context.js","components/Layers/Checkbox.js","components/Layers/Radio.js","components/Layers/RefreshLayer.js","components/Layers/LayerIcon.js","components/Layers/ListButton.js","components/Layers/OpacityButton.js","components/Layers/Row.js","components/Layers/Slider.js","components/info/getPdpSublayers.js","components/info/getGpSublayers.js","components/Layers/EknMapLayers.js","components/info/config.js","components/PageNav.js","ObjectsInfoTable.js","components/NoObj.js","components/SearchBar.js","EknMapInfo.js","EknMapLandRequest.js","components/Header.js","components/LegendWindow.js","components/ChooseRegion.js","NCALayerOps.js","util.js","components/LoginDialog.js","components/UserProfile.js","components/Button.js","components/info/getCoordSystem.js","EknMap.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","AppContext","createContext","regions","CheckboxComponent","styled","input","_templateObject","props","palette","additional","secondary","text","Checkbox","_ref","theme","isChecked","checkHandler","react_default","a","createElement","type","checked","onChange","RadioComponent","Radio_templateObject","Radio","RefreshButton","button","RefreshLayer_templateObject","turq","RefreshLayer","handleRefresh","tooltipType","onClick","data-tip","data-for","xmlns","width","height","viewBox","d","dist_default","id","border","delayShow","LayerIconComponent","img","LayerIcon_templateObject","LayerIcon","layerName","region","isSublayer","src","concat","regionCode","code","alt","ListButtonComponent","ListButton_templateObject","isVisible","ListButton","listButtonHandler","listButtonVisible","OpacityButtonComponent","OpacityButton_templateObject","primary","opacityLevel","OpacityButton","menuId","opacityButtonId","opacityValue","handleOpacityButtonClick","className","RowComponent","div","Row_templateObject","child","level2","CollapsibleRow","_templateObject2","isExpanded","LegendRow","_templateObject3","Row","sublayers","isCheckbox","layerText","hasListButton","_React$useState","React","useState","_React$useState2","Object","slicedToArray","expanded","setExpanded","Layers_Checkbox","Layers_Radio","includes","Layers_LayerIcon","Layers_ListButton","Layers_RefreshLayer","Layers_OpacityButton","map","sublayer","i","key","name","title","fadeIn","keyframes","Slider_templateObject","SliderComponent","Slider_templateObject2","viewportOffset","CloseButton","Slider_templateObject3","Slider","handleCloseSlider","defaultValue","handleSliderChange","min","max","step","getPdpSublayers","getRegionSublayers","UK","SEM","regionLayers","layer","index","getGpSublayers","LayersWrapper","EknMapLayers_templateObject","Trigger","EknMapLayers_templateObject2","getFreeLandsTitles","freeLands","Array","length","LAYERS","items","parent","radio","Config","visibleLayers","EknMapLayers","_useState","_useState2","opacity","setOpacity","_useState3","base","lands","lands_label","_useState4","visibility","setVisibility","_useState5","_useState6","sliderName","setSliderName","_useState7","_useState8","openSlider","setOpenSlider","_useState9","_useState10","_useState11","_useState12","setViewportOffset","handleOpacityChange","useCallback","event","x","value","parseInt","target","assign","setLayerOpacity","handleExpanded","handleVisibilityChange2","group","item","forEach","showLayer","newVisibility","keys","filter","setDark","handleSliderClick","e","getBoundingClientRect","top","console","log","open","Layers_Slider","bind","this","Collapsible_default","transitionTime","trigger","onOpening","onClosing","j","Layers_Row","needsCheckboxes","handleGetLayerObjects","dark","Math","round","Type","freeze","string","date","area_m2","area_ga","cost_kzt","capacity_kwt","capacity_gcal_h","capacity_m3_h","FNT","closed","hidden","link","area_m2only","Properties","getTitle","kad_nomer","address_ru","rka","tabs","Fragment","groups","category_rus","pravo_rus","tsn_rus","shape_leng","shape_area","getItems","owners","owner_name","owner_iin_bin","arrests","rt_name_ru","org","date_start","date_end","doc_name","doc_num","doc_date","obrems","free","address_rus","lot_number","target_rus","purpose_use_name_ru","func_use_name_ru","area","right_type_name_ru","rent_condition_rus","cadastre_cost","start_cost","tax_cost","auction_time","auction_place_rus","request_address_rus","publish_date","comment_rus","elektr_power","elektr_faza_1","elektr_faza_3","water_power","water_hoz","water_production","sewerage_power","sewerage_fecal","sewerage_production","sewerage_clean","heat_power","heat_firing","heat_ventilation","heat_hot_water","category_name","telekom","gas_power","gas_on_cooking","gas_heating","gas_ventilation","gas_conditioning","gas_hot_water","buildings","stor_num","caption","litera","funce_purp","eval","nzona","price","coef","req","category_r","datecreate","docs","file_name","pch","label","ts_name_ru","ts_name_kz","desc_","mcs_name_ru","ball_b","shape_length","rst","bg_name_ru","bg_name_kz","uroj","ugl","shirina","ugpol","func","category","descritpio","pdp","pc_name_ru","gp","inv","note","vop","voz","water","gid","gas","storm_water","con","heat","sewer","electr","redlines","formatValue","href","Number","toFixed","rel","BottomBar","PageNav_templateObject","Button","PageNav_templateObject2","PageNav","pageNum","setPageNum","handleNextPage","getObjects","handlePrevPage","FeaturesWrapper","ObjectsInfoTable_templateObject","CollapsibleContainer","ObjectsInfoTable_templateObject2","ObjectsInfoTable_templateObject3","ButtonsAndGoTo","_templateObject4","accent","Download","_templateObject5","_templateObject6","GroupName","_templateObject7","Tabs","_templateObject8","Line","_templateObject9","_templateObject10","isActive","isArrestButton","ObjectsInfoTable","activeTab","setActiveTab","activeObj","setActiveObj","getTabContent","objProps","obj","children","ObjectsInfoTable_Row","LayerProps","window","REST_URL","displayButtons","arrestsChecked","tab","properties","ObjectsInfoTable_Button","Boolean","info","undefined","ObjectsInfoTable_Trigger","arrestIsChecked","handleSelect","WKT","readGeometryFromText","geometry","passport_exists","download","createObject","components_PageNav","Message","NoObj_templateObject","NoObj","Search","SearchBar_templateObject","SearchBar","effect","placeholder","onKeyPress","charCode","handleSearch","Wrapper","EknMapInfo_templateObject","EknMapInfo","onClose","setOpen","resultEmpty","searchResult","prop","nothingFound","components_NoObj","src_ObjectsInfoTable","lyers","layers","LandRequestDialog","EknMapLandRequest_templateObject","disabled","RequestDialog","coords","setCoords","newCoord","setNewCoord","setArea","errIntersect","setErrIntersect","cost","setCost","orderUrl","setOrderUrl","_useState13","_useState14","valuationUrl","setValuationUrl","_useState15","_useState16","fileName","setFileName","handleChange","push","features","getGeometry","setCoordinates","getArea","handleChangeNew","useEffect","getCoordinates","slice","wkt","writeGeometry","fetch","method","mode","credentials","then","response","json","result","formatNumber","n","dec","numAsString","toString","replace","test","addCoordsFromFile","split","line","str","parseFloat","handleLoadFeature","coordinateFile","files","reader","FileReader","onload","readAsText","handleFileUpload","htmlFor","coord","splice","handleRemove","role","handleSend","Header","textColor","outlineColor","style","position","display","alignItems","margin","padding","zIndex","logo","backgroundColor","borderRadius","fontFamily","fontSize","fontWeight","color","textShadow","Legend","LegendWindow_templateObject","LegendWindow_templateObject2","ColorSquare","LegendWindow_templateObject3","borderStyle","borderColor","LegendLib","icon","LegendWindow","easing","LegendWindow_Row","RegionSelect","ChooseRegion_templateObject","ChooseRegion","nameRu","districts","district","setRegion","webSocket","heartbeatMsg","heartbeatInterval","nca_callback","storageAlias","initNCALayer","callbackM","WebSocket","onopen","setInterval","pingLayer","onclose","onmessage","rw","data","JSON","parse","secondResult","errorCode","responseObject","message","getResult","getSecondResult","getErrorCode","getMessage","getResponseObject","getCode","onerror","alert","chooseNCAStorageCall","callback","readyState","args","methodVariable","send","stringify","getDataNew","findSubjectAttr","attrs","attr","tmp","numb","indexOf","substr","error","clearInterval","close","formatDate","dd","getDate","mm","getMonth","getFullYear","LoginWindow","LoginDialog_templateObject","LoginDialog_templateObject2","ButtonContainer","LoginDialog_templateObject3","Button1","LoginDialog_templateObject4","Button2","LoginDialog_templateObject5","LoginDialog","userInfo","setUserInfo","LoginDialog_Row","iin","email","fullName","marginRight","dateStart","marginLeft","dateEnd","subjectAttrs","subjectDn","cn","middleName","Date","certNotBefore","certNotAfter","setOpenLogin","UserInfo","UserProfile_templateObject","UserProfile","handleLogout","preventDefault","ButtonComp","Button_templateObject","handleClick","positionButton","tooltipText","dataFor","displaySvg","tooltipDark","right","left","bottom","getCoordSystem","srs","MODE_SELECT","MODE_DRAW","MODE_EDIT","proj4","defs","register","highlightStyle","Style","stroke","Stroke","fill","Fill","Text","font","image","Circle","radius","feature","coordinates","MultiPoint","extent","show","setVisible","buildings_label","login","Promise","resolve","reject","headers","Content-Type","body","catch","search","getLayerObjects","pageSize","getLayerLabels","resolution","join","wfsGetFeatures","typeName","limit","url","GS_URL","get","startsWith","GeoJSON","readFeatures","EknMap","_this","setMap","_React$useState3","_React$useState4","setLayers","_React$useState5","_React$useState6","openLayers","setOpenLayers","_React$useState7","_React$useState8","openLegend","setOpenLegend","_React$useState9","_React$useState10","openInfo","setOpenInfo","_React$useState11","_React$useState12","setMode","_React$useState13","_React$useState14","openLogin","_React$useState15","_React$useState16","openRegion","setOpenRegion","_React$useState17","_React$useState18","setSearchResult","_React$useState19","_React$useState20","setFeatures","_React$useState21","_React$useState22","_React$useState23","handlers","_React$useState25","_React$useState26","_React$useState27","_React$useState28","_React$useState29","_React$useState30","setGetObjects","_React$useState31","_React$useState32","setArrestIsChecked","MousePosition","coordinateFormat","createStringXY","undefinedHTML","mousePosition","darkPalette","lightPalette","geom","view","getView","selGeom","clone","transform","getProjection","fit","duration","maxZoom","select","getSource","clear","addFeature","Feature","updateSize","changeLayerVisibility","selectDistrict","selectCadnum","res","readGeometry","selection","uid","viewRegion","setDefaultView","restSetDistrict","newPojection","borders","View","projection","center","getCenter","zoom","getZoom","setView","params","getParams","updateParams","arrest","uk","landsLabelSource","setLoader","resolution_","getFeatures","removeFeature","addFeatures","nedLabelSource","updateLayers","setProjection","draw","snapSource","Vector","wrapX","format","loader","box","finally","strategy","bboxStrategy","snap","VectorLayer","source","addLayer","Snap","Draw","on","drawEvent","set","addInteraction","removeLayer","removeInteraction","modify","Modify","Polygon","setId","handleOpenInfo","handleZoomIn","animate","handleZoomOut","handleSetDark","document","getElementsByClassName","infoHandler","y","coordinate","status","time","now","myMap","Map","controls","OverviewMap","ScaleLine","gsUrl","kazgeo","TileLayer","TileWMS","TILED","serverType","transition","visible","garysh","bing","preload","Infinity","BingMaps","imagerySet","loadedExtentsRtree_","labelStyle","overflow","getText","setText","createLayers","un","standalone","Layers_EknMapLayers","arrestChecked","clickHandler","Button_Button","src_EknMapInfo","anchorEl","getElementById","location","protocol","host","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","_this2","setState","Provider","src_EknMap","_this3","funcName","selectObject","cadnum","rnCode","arr","rn_code","Component","isLocalhost","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","mapDivs","mapDiv","childElementCount","ReactDOM","render","src_App_0","ref","comp","getAttribute","src_loop","URL","process","origin","addEventListener","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"mGAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wPCE3BC,UAAaC,wBAAc,CACpCC,QAAS,26CCAb,IAAMC,EAAoBC,IAAOC,MAAVC,IAeG,SAAAC,GAAK,OAAIA,EAAMC,QAAQC,YAKzB,SAAAF,GAAK,OAAIA,EAAMC,QAAQC,YAWhB,SAAAF,GAAK,OAAIA,EAAMC,QAAQE,WACxB,SAAAH,GAAK,OAAIA,EAAMC,QAAQE,WAWtB,SAAAH,GAAK,OAAIA,EAAMC,QAAQE,WACxB,SAAAH,GAAK,OAAIA,EAAMC,QAAQE,WAG7B,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MACrB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,OAalCC,EATE,SAAAC,GAAA,IAAGC,EAAHD,EAAGC,MAAOC,EAAVF,EAAUE,UAAWC,EAArBH,EAAqBG,aAArB,OACfC,EAAAC,EAAAC,cAAChB,EAAD,CACEiB,KAAK,WACLZ,QAASM,EACTO,QAASN,EACTO,SAAUN,u9BCzDd,IAAMO,EAAiBnB,IAAOC,MAAVmB,IAeM,SAAAjB,GAAK,OAAIA,EAAMC,QAAQG,MAgBzB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,MAWvB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,OAahCc,EATD,SAAAZ,GAAA,IAAGC,EAAHD,EAAGC,MAAOC,EAAVF,EAAUE,UAAWC,EAArBH,EAAqBG,aAArB,OACZC,EAAAC,EAAAC,cAACI,EAAD,CACEH,KAAK,QACLZ,QAASM,EACTO,QAASN,EACTO,SAAUN,oZClDd,IAAMU,EAAgBtB,IAAOuB,OAAVC,IAUP,SAAArB,GAAK,OAAIA,EAAMC,QAAQG,MAGjB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQqB,OAqC1BC,EA5BM,SAAAjB,GAA2C,IAAxCC,EAAwCD,EAAxCC,MAAOiB,EAAiClB,EAAjCkB,cAAeC,EAAkBnB,EAAlBmB,YAC5C,OACEf,EAAAC,EAAAC,cAACO,EAAD,CACElB,QAASM,EACTmB,QAASF,EACTG,YAAA,EACAC,WAAS,mBAETlB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,qNAEVvB,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEwB,GAAG,kBACHtB,KAAMY,EACNW,QAAM,EACNC,UAAW,KAJb,oNCvCN,IAAMC,GAAqBzC,IAAO0C,IAAVC,MAmCTC,GA7BG,SAAAnC,GAAuC,IAApCoC,EAAoCpC,EAApCoC,UAAWC,EAAyBrC,EAAzBqC,OAAQC,EAAiBtC,EAAjBsC,WACtC,OAAID,GACEC,EAEAlC,EAAAC,EAAAC,cAAC0B,GAAD,CACEO,IAAG,yBAAAC,OAA2BH,EAAOI,WACnCJ,EAAOK,KACPN,EAFC,QAGHO,IAAI,KAaRvC,EAAAC,EAAAC,cAAC0B,GAAD,CACEO,IAAG,yBAAAC,OAA2BJ,EAA3B,QACHO,IAAI,waC7BZ,IAAMC,GAAsBrD,IAAOuB,OAAV+B,KACT,SAAAnD,GAAK,OAAKA,EAAMoD,UAAY,UAAY,UAYhC,SAAApD,GAAK,OAAIA,EAAMC,QAAQqB,MAGpC,SAAAtB,GAAK,OAAIA,EAAMC,QAAQG,OAanBiD,GAVI,SAAA/C,GAAA,IAAGC,EAAHD,EAAGC,MAAO+C,EAAVhD,EAAUgD,kBAAmBC,EAA7BjD,EAA6BiD,kBAA7B,OACjB7C,EAAAC,EAAAC,cAACsC,GAAD,CACEjD,QAASM,EACTmB,QAAS4B,EACTF,UAAWG,GAHb,w0BCnBF,IAAMC,GAAyB3D,IAAOuB,OAAVqC,KAOjB,SAAAzD,GAAK,OAAIA,EAAMC,QAAQG,MAEtB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,MAGe,SAAAJ,GAAK,OAAIA,EAAMC,QAAQyD,SAAY,SAAA1D,GAAK,OAAIA,EAAMC,QAAQyD,SAAW,SAAA1D,GAAK,OAAIA,EAAM2D,cAA8B,SAAA3D,GAAK,OAAIA,EAAM2D,cAgB3J,SAAA3D,GAAK,OAAIA,EAAMC,QAAQqB,MAGzB,SAAAtB,GAAK,OAAIA,EAAMC,QAAQyD,UA6B9BE,GAtBO,SAAAtD,GAAA,IAAEC,EAAFD,EAAEC,MAAOsD,EAATvD,EAASuD,OAAQC,EAAjBxD,EAAiBwD,gBAAiBrC,EAAlCnB,EAAkCmB,YAAasC,EAA/CzD,EAA+CyD,aAAcC,EAA7D1D,EAA6D0D,yBAA7D,OACpBtD,EAAAC,EAAAC,cAAC4C,GAAD,CACEvD,QAASM,EACT4B,GAAI0B,EACJnC,QAASsC,EACTrC,YAAA,EACAC,WAAUkC,EACVH,aAAcI,GAEdrD,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEsD,UAAU,UACVpD,KAAMY,EACNW,QAAM,EACNC,UAAW,IACXF,GAAI2B,GALN,6HASApD,EAAAC,EAAAC,cAAA,OAAKiB,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAAYtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,qoCCjD/F,IAAMiC,GAAerE,IAAOsE,IAAVC,KAGS,SAAApE,GAAK,OAC5BA,EAAMqE,OAASrE,EAAMsE,OACjB,yCACA,mCAEc,SAAAtE,GAAK,OAAIA,EAAMC,QAAQE,YAMvCoE,GAAiB1E,IAAOsE,IAAVK,KAMI,SAAAxE,GAAK,OAAIA,EAAMC,QAAQE,WAKjC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MACX,SAAAJ,GAAK,OAAKA,EAAMyE,WAAa,QAAU,QAM/C,SAAAzE,GAAK,OAAKA,EAAMyE,WAAa,QAAU,IAKnDC,GAAY7E,IAAOsE,IAAVQ,KACO,SAAA3E,GAAK,OAAIA,EAAMC,QAAQE,WAClC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,OAgMnBwE,GAxLH,SAAAtE,GAmBN,IAlBJC,EAkBID,EAlBJC,MACAsE,EAiBIvE,EAjBJuE,UACAR,EAgBI/D,EAhBJ+D,MACAS,EAeIxE,EAfJwE,WACAtE,EAcIF,EAdJE,UACAC,EAaIH,EAbJG,aACAiC,EAYIpC,EAZJoC,UACAqC,EAWIzE,EAXJyE,UACApC,EAUIrC,EAVJqC,OACAnB,EASIlB,EATJkB,cACAwD,EAQI1E,EARJ0E,cACA1B,EAOIhD,EAPJgD,kBACAC,EAMIjD,EANJiD,kBACAM,EAKIvD,EALJuD,OACAG,EAII1D,EAJJ0D,yBACAF,EAGIxD,EAHJwD,gBACArC,EAEInB,EAFJmB,YACAsC,EACIzD,EADJyD,aACIkB,EAC4BC,IAAMC,UAAS,GAD3CC,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GACGM,EADHH,EAAA,GACaI,EADbJ,EAAA,GAEJ,OAAOP,EACLnE,EAAAC,EAAAC,cAAC2D,GAAD,CAAgBtE,QAASM,EAAOkE,WAAYc,GAC1C7E,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,OACbvD,EAAAC,EAAAC,cAAA,OACEqD,UAAU,gBACVvC,QAAS,kBAAM8D,GAAaD,IAC5B1D,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,sDAET6C,EACCpE,EAAAC,EAAAC,cAAC6E,EAAD,CACElF,MAAOA,EACPC,UAAWA,EACXC,aAAcA,IAGhBC,EAAAC,EAAAC,cAAC8E,EAAD,CACEnF,MAAOA,EACPC,UAAWA,EACXC,aAAcA,IAGjB,CACC,MACA,OACA,OACA,MACA,KACA,MACA,MACA,MACA,QACA,MACA,cACA,MACA,OACA,QACA,SACA,MACA,MACA,MACA,QACA,OACA,OACA,SACA,UACAkF,SAASjD,GACThC,EAAAC,EAAAC,cAAA,YAEAF,EAAAC,EAAAC,cAACgF,GAAD,CAAWrF,MAAOA,EAAOmC,UAAWA,EAAWE,YAAY,IAE7DlC,EAAAC,EAAAC,cAAA,SAAImE,GACHC,EACCtE,EAAAC,EAAAC,cAACiF,GAAD,CACEtF,MAAOA,EACP+C,kBAAmBA,EACnBC,kBAAmBA,IAGrB7C,EAAAC,EAAAC,cAAA,YAEFF,EAAAC,EAAAC,cAACkF,EAAD,CACEvF,MAAOA,EACPiB,cAAeA,EACfC,YAAaA,IAEff,EAAAC,EAAAC,cAACmF,GAAD,CACExF,MAAOA,EACPsD,OAAQA,EACRG,yBAA0BA,EAC1BF,gBAAiBA,EACjBrC,YAAaA,EACbsC,aAAcA,KAGlBrD,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,cACZY,EAAUmB,IAAI,SAACC,EAAUC,GAAX,OACbxF,EAAAC,EAAAC,cAAC8D,GAAD,CAAWzE,QAASM,EAAO4F,IAAKD,GAC9BxF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAACgF,GAAD,CACErF,MAAOA,EACPmC,UAAWuD,EAASG,KACpBzD,OAAQ,CAAC,MAAO,MAAMgD,SAASjD,GAAaC,EAAS,OAEvDjC,EAAAC,EAAAC,cAAA,SAAIqF,EAASI,YAMrB3F,EAAAC,EAAAC,cAACsD,GAAD,CAAcjE,QAASM,EAAO8D,MAAOA,GACnC3D,EAAAC,EAAAC,cAAA,YACCyD,EAAQ3D,EAAAC,EAAAC,cAAA,YAAc,KACtBkE,EACCpE,EAAAC,EAAAC,cAAC6E,EAAD,CACElF,MAAOA,EACPC,UAAWA,EACXC,aAAcA,IAGhBC,EAAAC,EAAAC,cAAC8E,EAAD,CACEnF,MAAOA,EACPC,UAAWA,EACXC,aAAcA,IAGjB,CACC,MACA,OACA,OACA,MACA,KACA,MACA,MACA,MACA,QACA,MACA,cACA,MACA,OACA,QACA,SACA,MACA,MACA,MACA,QACA,OACA,OACA,SACA,UACAkF,SAASjD,GACThC,EAAAC,EAAAC,cAAA,YAEAF,EAAAC,EAAAC,cAACgF,GAAD,CAAWrF,MAAOA,EAAOmC,UAAWA,EAAWE,YAAY,IAE7DlC,EAAAC,EAAAC,cAAA,SAAImE,GACHC,EACCtE,EAAAC,EAAAC,cAACiF,GAAD,CACEtF,MAAOA,EACP+C,kBAAmBA,EACnBC,kBAAmBA,IAGrB7C,EAAAC,EAAAC,cAAA,YAEFF,EAAAC,EAAAC,cAACkF,EAAD,CAAcvF,MAAOA,EAAOiB,cAAeA,IAC3Cd,EAAAC,EAAAC,cAACmF,GAAD,CACExF,MAAOA,EACPsD,OAAQA,EACRG,yBAA0BA,EAC1BF,gBAAiBA,EACjBrC,YAAaA,EACbsC,aAAcA,8wDCzOtB,IAAMuC,GAASC,YAAHC,MAMNC,GAAkB5G,IAAOsE,IAAVuC,KAIZ,SAAA1G,GAAK,OAAIA,EAAM2G,eAAiB,KAK1BL,GACO,SAAAtG,GAAK,OAAIA,EAAMC,QAAQE,WA0BjB,SAAAH,GAAK,OAAIA,EAAMC,QAAQqB,MASvB,SAAAtB,GAAK,OAAIA,EAAMC,QAAQqB,MAIvB,SAAAtB,GAAK,OAAIA,EAAMC,QAAQC,YAIvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQC,aAM7C0G,GAAc/G,IAAOuB,OAAVyF,KAUD,SAAA7G,GAAK,OAAIA,EAAMC,QAAQC,YAC5B,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAGhB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQqB,OA+B1BwF,GA3BA,SAAAxG,GAAA,IACbC,EADaD,EACbC,MACAwG,EAFazG,EAEbyG,kBACAC,EAHa1G,EAGb0G,aACAC,EAJa3G,EAIb2G,mBACAN,EALarG,EAKbqG,eALa,OAObjG,EAAAC,EAAAC,cAAC6F,GAAD,CAAiBxG,QAASM,EAAOoG,eAAgBA,GAC/CjG,EAAAC,EAAAC,cAACgG,GAAD,CAAalF,QAASqF,EAAmB9G,QAASM,GAAlD,KAGAG,EAAAC,EAAAC,cAAA,uEACAF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,cACAF,EAAAC,EAAAC,cAAA,SACEC,KAAK,QACLqG,IAAI,IACJC,IAAI,MACJC,KAAK,IACLJ,aAAcA,EACdjG,SAAUkG,IAEZvG,EAAAC,EAAAC,cAAA,mBC9FSyG,GAXS,SAAA1E,GACtB,OAAQA,EAAOI,WAAaJ,EAAOK,MACjC,IALY,QAMV,OAAOsE,GAAmBC,GAAI,SAChC,IANU,QAOR,OAAOD,GAAmBE,GAAK,UACjC,QACE,MAAO,KAMPF,GAAqB,SAACG,EAActB,GAAf,OACzBsB,EAAazB,IAAI,SAAC0B,EAAOC,GAAR,MAAmB,CAClCvB,KAAI,GAAAtD,OAAKqD,EAAMwB,GACftB,MAAOqB,MAGLH,GAAK,CACT,wIACA,+IACA,iEACA,sEACA,kNACA,yNACA,yDACA,mLACA,sHACA,qBACA,kFACA,mFACA,4EACA,gGACA,gHACA,sEACA,gHACA,4EACA,kQACA,8CACA,gLACA,6PACA,wSACA,kNACA,uHACA,mDACA,wSACA,0TACA,qFACA,mDACA,mDACA,yIACA,+IACA,yIACA,yGACA,4EACA,kFACA,6KACA,4JACA,8EACA,yIACA,sRACA,oGACA,qGACA,2OACA,mNACA,qOACA,uJAGIC,GAAM,CACV,4EACA,8CACA,mLACA,6KACA,8EACA,sEACA,sHACA,kQACA,2OACA,6PACA,mNACA,qOACA,sRACA,wSACA,sJACA,uHACA,wIACA,+IACA,iEACA,sEACA,qFACA,mDACA,oGACA,yIACA,yDACA,cACA,gHACA,+IACA,yIACA,yGACA,4EACA,kFACA,mDACA,8HACA,2JACA,kNACA,mLACA,0OACA,wXACA,mFACA,mIACA,mGACA,+NACA,sTACA,+IACA,gRACA,yNACA,mNACA,qOACA,6MACA,0GACA,yLACA,mNACA,yNACA,2OACA,wWACA,iNACA,kVACA,4JACA,yNACA,sbACA,0GACA,0LACA,kUACA,4oBACA,uPACA,kQACA,mNC/HaI,GAXQ,SAAAjF,GACrB,OAAQA,EAAOI,WAAaJ,EAAOK,MACjC,IALY,QAMV,OAAOsE,GAAmBC,GAAI,QAChC,IANU,QAOR,OAAOD,GAAmBE,GAAK,SACjC,QACE,MAAO,KAMPF,GAAqB,SAACG,EAActB,GAAf,OACzBsB,EAAazB,IAAI,SAAC0B,EAAOC,GAAR,MAAmB,CAClCvB,KAAI,GAAAtD,OAAKqD,EAAMwB,GACftB,MAAOqB,MAGLH,GAAK,CACT,iPACA,uKACA,iMACA,0NACA,mNACA,mNACA,4OACA,qOACA,6MACA,uHACA,iKACA,0LACA,8aACA,gcACA,uNACA,uXACA,gRACA,kNACA,mLACA,qJACA,0GACA,0GACA,2MACA,2MACA,8VACA,oTACA,mYACA,oQACA,gMACA,kNACA,wKACA,0LAGIC,GAAM,CACV,iPACA,uKACA,iMACA,0NACA,mNACA,mNACA,4OACA,qOACA,6MACA,uHACA,iKACA,0LACA,sPACA,8aACA,gcACA,mdACA,uNACA,uXACA,gRACA,kQACA,kNACA,4LACA,mDACA,mLACA,qJACA,0GACA,0GACA,2MACA,8VACA,2MACA,oTACA,mYACA,oQACA,gMACA,kNACA,yNACA,wKACA,s2CCpFF,IAAMK,GAAgBhI,IAAOsE,IAAV2D,KAMR,SAAA9H,GAAK,OAAIA,EAAMC,QAAQG,MA8BR,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YAIvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQqB,OAM3CyG,GAAUlI,IAAOsE,IAAV6D,KAIS,SAAAhI,GAAK,OAAIA,EAAMC,QAAQyD,SAIhB,SAAA1D,GAAK,OAAIA,EAAMC,QAAQE,WAExC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,OAI7B6H,GAAqB,WAGzB,IAFA,IAAIC,EAAY,IAAIC,MAAM,IAEjBjC,EAAI,EAAGA,EAAIgC,EAAUE,OAAQlC,IACpCgC,EAAUhC,GAAK,CACbG,MAAK,mFAAAvD,OAAoBoD,EAAI,GAC7BE,KAAI,KAAAtD,OAAOoD,EAAI,IAInB,OAAOgC,GAGHG,GAAS,SAAA1F,GAAM,MAAI,CACvB,CACE0D,MAAO,oGACPiC,MAAO,CACL,CACElC,KAAM,QACNC,MAAO,gHAET,CAAED,KAAM,SAAUC,MAAO,oDAAakC,OAAQ,SAK9C,CAAEnC,KAAM,OAAQC,MAAO,qGACvB,CACED,KAAM,MACNC,MAAO,iFACPxB,UAAW,CACT,CAAEwB,MAAO,8FAAoBD,KAAM,UACnC,CAAEC,MAAO,uHAAyBD,KAAM,UACxC,CAAEC,MAAO,yIAA4BD,KAAM,UAC3C,CAAEC,MAAO,iNAAwCD,KAAM,YACvD,CAAEC,MAAO,2MAAuCD,KAAM,SACtD,CACEC,MACE,iYACFD,KAAM,WAER,CACEC,MACE,uWACFD,KAAM,YAIZ,CAAEA,KAAM,OAAQC,MAAO,kFAAkBxB,UAAWoD,QAGxD,CACE5B,MAAO,uJACPiC,MAAO,CACL,CAAElC,KAAM,YAAaC,MAAO,sDAIhC,CACEA,MAAO,sKACPiC,MAAO,CACL,CAAElC,KAAM,WAAYC,MAAO,6EAC3B,CAAED,KAAM,OAAQC,MAAO,iHACvB,CACED,KAAM,MACNC,MAAO,iKACPxB,UACElC,GAAU,CAAC,QAAS,SAASgD,SAAShD,EAAOI,WAAaJ,EAAOK,MAC7DqE,GAAgB1E,GAChB,MAER,CACEyD,KAAM,KACNC,MAAO,8FACPxB,UACElC,GAAU,CAAC,QAAS,SAASgD,SAAShD,EAAOI,WAAaJ,EAAOK,MAC7D4E,GAAejF,GACf,MAER,CACEyD,KAAM,MACNC,MAAO,qGAET,CACED,KAAM,MACNC,MAAO,iHAET,CACED,KAAM,MACNC,MAAO,qIAIb,CACEA,MAAO,8FACPiC,MAAO,CACL,CAAElC,KAAM,QAASC,MAAO,kFACxB,CAAED,KAAM,MAAOC,MAAO,kFACtB,CAAED,KAAM,cAAeC,MAAO,uHAC9B,CAAED,KAAM,MAAOC,MAAO,kFACtB,CAAED,KAAM,OAAQC,MAAO,wFACvB,CAAED,KAAM,QAASC,MAAO,sEACxB,CAAED,KAAM,SAAUC,MAAO,sGAG7B,CACEA,MAAO,2EACPiC,MAAO,CACL,CAAElC,KAAM,MAAOC,MAAO,qGACtB,CAAED,KAAM,MAAOC,MAAO,yIACtB,CACED,KAAM,MACNC,MAAO,kFACPxB,UAAW,MAIjB,CACEwB,MAAO,wIACPmC,OAAO,EACPF,MAAO,CACL,CAAElC,KAAM,OAAQC,MAAO,6EACvB,CAAED,KAAM,OAAQC,MAAO,qDACvB,CAAED,KAAM,SAAUC,MAAO,uEACzB,CAAED,KAAM,SAAUC,MAAO,0EAKlBoC,GAAS,CACpBC,cAAe,CAAC,SAoLHC,OAjLf,SAAsB3I,GAAO,IAAA4I,EACGzD,mBAAS,IADZ0D,EAAAxD,OAAAC,EAAA,EAAAD,CAAAuD,EAAA,GACpBE,EADoBD,EAAA,GACXE,EADWF,EAAA,GAAAG,EAES7D,mBAAS,CAC3C8D,MAAM,EACNC,OAAO,EACPC,aAAa,IALYC,EAAA/D,OAAAC,EAAA,EAAAD,CAAA2D,EAAA,GAEpBK,EAFoBD,EAAA,GAERE,EAFQF,EAAA,GAAAG,EAOSpE,mBAAS,MAPlBqE,EAAAnE,OAAAC,EAAA,EAAAD,CAAAkE,EAAA,GAOpBE,EAPoBD,EAAA,GAORE,EAPQF,EAAA,GAAAG,EAQSxE,oBAAS,GARlByE,EAAAvE,OAAAC,EAAA,EAAAD,CAAAsE,EAAA,GAQpBE,EARoBD,EAAA,GAQRE,EARQF,EAAA,GAAAG,EASK5E,mBAAS,EACvC,GACA,GACA,GACA,GACA,GACA,IAfyB6E,EAAA3E,OAAAC,EAAA,EAAAD,CAAA0E,EAAA,GASpBxE,EAToByE,EAAA,GASVxE,EATUwE,EAAA,GAAAC,EAiBiB9E,mBAAS,MAjB1B+E,EAAA7E,OAAAC,EAAA,EAAAD,CAAA4E,EAAA,GAiBpBtD,EAjBoBuD,EAAA,GAiBJC,EAjBID,EAAA,GAmBrBE,EAAsBC,sBAC1B,SAACjE,EAAMkE,GACL,IAAMC,EAAI,GACJC,EAAQC,SAASH,EAAMI,OAAOF,OACpCD,EAAEnE,GAAQoE,EACVzB,EAAW1D,OAAOsF,OAAO,GAAI7B,EAASyB,IACtCvK,EAAM4K,gBAAgBxE,EAAMoE,IAE9B,CAACxK,EAAO8I,IAGJ+B,EAAiBR,sBACrB,SAAC1C,EAAO6C,GACNjF,EAASoC,GAAS6C,EAClBhF,EAAYH,OAAOsF,OAAO,GAAIpF,KAEhC,CAACA,IAGGuF,EAA0BT,sBAC9B,SAACU,EAAOC,GACN,IAAMT,EAAI,GACNQ,EAAMvC,OACRuC,EAAMzC,MAAM2C,QAAQ,SAAAT,GACdA,EAAMpE,OAAS4E,EAAK5E,OACtBmE,EAAEC,EAAMpE,OAAQ,EAChBpG,EAAMkL,UAAUV,EAAMpE,MAAM,MAIlC,IAAMoE,GAASnB,EAAW2B,EAAK5E,MAC/BmE,EAAES,EAAK5E,MAAQoE,EACf,IAAMW,EAAgB9F,OAAOsF,OAAO,GAAItB,EAAYkB,GACpD9B,GAAOC,cAAgBrD,OAAO+F,KAAKD,GAAeE,OAChD,SAAAlF,GAAG,OAA2B,IAAvBgF,EAAchF,KAKvBmD,EAAc6B,GACdnL,EAAMkL,UAAUF,EAAK5E,KAAMoE,IAEzBA,GACe,SAAdQ,EAAK5E,MAAiC,WAAd4E,EAAK5E,MAAiC,WAAZ4E,EAAK7I,GAG/CqI,GAAuB,SAAdQ,EAAK5E,MACvBpG,EAAMsL,SAAQ,GAFdtL,EAAMsL,SAAQ,IAKlB,CAACtL,EAAOqJ,IAGJkC,EAAoBlB,sBAAY,SAACjE,EAAMoF,GAC3C9B,EAActD,GACd0D,GAAc,GACdK,EAAkBqB,EAAEd,OAAOe,wBAAwBC,MAClD,IAEGlK,EAAgB,WACpBmK,QAAQC,IAAI,kBAGd,OACE5L,EAAM6L,MACJnL,EAAAC,EAAAC,cAACiH,GAAD,CAAe5H,QAASD,EAAMO,OAC5BG,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,aACZ4F,GAAc7J,EAAM6L,MACnBnL,EAAAC,EAAAC,cAACkL,GAAD,CACEvL,MAAOP,EAAMO,MACbwG,kBAAmB,kBAAM+C,GAAc,IACvC9C,aAAc8B,EAAQW,GAAcX,EAAQW,GAAc,IAC1DxC,mBAAoBmD,EAAoB2B,KAAKC,KAAMvC,GACnD9C,eAAgBA,IAGnB0B,GAAOrI,EAAM2C,QAAU,MAAMqD,IAAI,SAAC+E,EAAO7E,GAAR,OAChCxF,EAAAC,EAAAC,cAACqL,EAAAtL,EAAD,CACEwF,IAAKD,EACLgG,eAAgB,IAChBC,QACEzL,EAAAC,EAAAC,cAACmH,GAAD,CAAS9H,QAASD,EAAMO,OACrBwK,EAAM1E,MACP3F,EAAAC,EAAAC,cAAA,OACEqD,UAAU,eACVpC,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yDAId4J,KAAMtG,EAASW,GACfkG,UAAW,kBAAMvB,EAAe3E,GAAG,IACnCmG,UAAW,kBAAMxB,EAAe3E,GAAG,KAElC6E,EAAMzC,MAAMtC,IAAI,SAACgF,EAAMsB,GAAP,OACf5L,EAAAC,EAAAC,cAAC2L,GAAD,CACEpG,IAAKmG,EACLzH,UAAWmG,EAAKnG,UAChBtE,MAAOP,EAAMO,MACb8D,MAAO2G,EAAKzC,OACZiE,gBAA+B,QAAdxB,EAAK5E,KAEtBtB,YAAaiG,EAAMvC,MACnBhI,YACE6I,EAAW2B,EAAK5E,OAAQiD,EAAW2B,EAAK5E,MAE1C3F,aACE,CAAC,MAAMkF,SAASqF,EAAK5E,MACjB,aACA,kBAAM0E,EAAwBC,EAAOC,IAG3CxJ,cAAeA,EAEfkB,UAAWsI,EAAK5E,KAChBrB,UAAWiG,EAAK3E,MAChB1D,OAAQ3C,EAAM2C,OAEdqC,eACG,CACC,WACA,OACA,OACA,OACA,SACA,SACA,cACA,mBACAW,SAASqF,EAAK5E,MAElB7C,kBAAmB8F,EAAW2B,EAAK5E,MACnC9C,kBAAmB,kBACjBtD,EAAMyM,sBAAsBzB,EAAK5E,KAAMiD,EAAU,SAGnDxF,OAAM,OAAAf,OAASkI,EAAK7I,IACpB6B,yBAA0B,SAAAwH,GAAC,OACzBD,EAAkBP,EAAK5E,KAAMoF,IAE/B1H,gBAAe,kBAAAhB,OAAoBwJ,GACnC7K,YAAazB,EAAM0M,KAAO,QAAU,OACpC3I,aAAc4I,KAAKC,MACjB9D,EAAQkC,EAAK5E,MAAQ0C,EAAQkC,EAAK5E,MAAQ,eC/WxDyG,GAAOxH,OAAOyH,OAAO,CACzBC,OAAQ,EACRC,KAAM,EACNC,QAAS,EACTC,QAAS,EACT9E,OAAQ,EACR+E,SAAU,EACVC,aAAc,EACdC,gBAAiB,EACjBC,cAAe,EACfC,IAAK,GACLC,OAAQ,GACRC,OAAQ,GACRC,KAAM,GACNC,YAAa,KAGFC,GAAa,CACxB1E,MAAO,CACL2E,SAAU,SAAA7N,GAAK,OACZA,EAAM8N,UAAY9N,EAAM8N,UAAY,KACpC9N,EAAM+N,WAAa,KAAO/N,EAAM+N,WAAa,KAAO/N,EAAMgO,IAAM,wBAAWhO,EAAMgO,IAAM,KAC1FC,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACL8N,UAAW,CAACpN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2GACZH,WAAY,CAACrN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sCAAOxN,EAAAC,EAAAC,cAAA,WAAP,2FACbwN,aAAc,CAAC1N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qGACfG,UAAW,CAAC3N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2DACZI,QAAS,CAAC5N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iHACVK,WAAY,CAAC7N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sCAAOxN,EAAAC,EAAAC,cAAA,WAAP,0DAA0BiM,GAAKzE,QAC5CoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,aAKxC,CACEY,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,oGAChBO,SAAU,SAAAzO,GAAK,OAAIA,EAAM0O,QACzBP,OAAQ,CACN,CACEN,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,oGAChBlO,MAAO,CACL2O,WAAY,CAACjO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kFACbU,cAAe,CAAClO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,gCAKxB,CACEL,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8CAChBO,SAAU,SAAAzO,GAAK,OAAIA,EAAM6O,SACzBV,OAAQ,CACN,CACEN,SAAU,SAAA7N,GAAK,OAAIA,EAAM8O,YACzB9O,MAAO,CACL+O,IAAK,CAACrO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wGAAkBxN,EAAAC,EAAAC,cAAA,WAAlB,6BACNoO,WAAY,CAACtO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uEACbe,SAAU,CAACvO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yFACXgB,SAAU,CAACxO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+FACXiB,QAAS,CAACzO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qDACVkB,SAAU,CAAC1O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAKnB,CACEL,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,4EAChBO,SAAU,SAAAzO,GAAK,OAAIA,EAAMqP,QACzBlB,OAAQ,CACN,CACEN,SAAU,SAAA7N,GAAK,OAAIA,EAAM8O,YACzB9O,MAAO,CACL+O,IAAK,CAACrO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wGAAkBxN,EAAAC,EAAAC,cAAA,WAAlB,6BACNoO,WAAY,CAACtO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uEACbe,SAAU,CAACvO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yFACXgB,SAAU,CAACxO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+FACXiB,QAAS,CAACzO,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qDACVkB,SAAU,CAAC1O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qDASvBoB,KAAM,CACJzB,SAAU,SAAA7N,GAAK,OAAIA,EAAMuP,aAAe,IACxCtB,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLuP,YAAa,CAAC7O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sCAAOxN,EAAAC,EAAAC,cAAA,WAAP,2FACd4O,WAAY,CAAC9O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iEACbuB,WAAY,CAAC/O,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iHACbwB,oBAAqB,CAAChP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iHACtByB,iBAAkB,CAACjP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2JACnB0B,KAAM,CAAClP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKK,SAC1B2C,mBAAoB,CAACnP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iHACrB4B,mBAAoB,CAACpP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yFACrB6B,cAAe,CAACrP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kIAA4BrB,GAAKM,UACjD6C,WAAY,CAACtP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,oJAA+BrB,GAAKM,UACjD8C,SAAU,CAACvP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sHAA0BrB,GAAKM,UAC1C+C,aAAc,CAACxP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,gJACfiC,kBAAmB,CAACzP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sJACpBkC,oBAAqB,CAAC1P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,oIACtBmC,aAAc,CAAC3P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+FACfoC,YAAa,CAAC5P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8DAKtB,CACEL,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sBAChBC,OAAQ,CACN,CACEN,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0GAChBlO,MAAO,CACLuQ,aAAc,CAAC7P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uJAAkCrB,GAAKO,cACtDoD,cAAe,CAAC9P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wKAAoCrB,GAAKO,cACzDqD,cAAe,CAAC/P,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wKAAmCrB,GAAKO,gBAG5D,CACES,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wFAChBlO,MAAO,CACL0Q,YAAa,CAAChQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2KAAuCrB,GAAKS,eAC1DqD,UAAW,CAACjQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uHAA2BrB,GAAKS,eAC5CsD,iBAAkB,CAAClQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qJAA+BrB,GAAKS,iBAG3D,CACEO,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+IAChBlO,MAAO,CACL6Q,eAAgB,CAACnQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kKAAmCrB,GAAKS,eACzDwD,eAAgB,CAACpQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+DAAgBrB,GAAKS,eACtCyD,oBAAqB,CAACrQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,4KAAmCrB,GAAKS,eAC9D0D,eAAgB,CAACtQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wSAA2DrB,GAAKS,iBAGrF,CACEO,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8FAChBlO,MAAO,CACLiR,WAAY,CAACvQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0KAAsCrB,GAAKQ,iBACxD6D,YAAa,CAACxQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+DAAgBrB,GAAKQ,iBACnC8D,iBAAkB,CAACzQ,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qEAAiBrB,GAAKQ,iBACzC+D,eAAgB,CAAC1Q,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kIAA4BrB,GAAKQ,mBAGtD,CACErN,MAAO,CACLqR,cAAe,CAAC3Q,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+HAGpB,CACElO,MAAO,CACLsR,QAAS,CAAC5Q,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0FAGd,CACEL,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wFAChBlO,MAAO,CACLuR,UAAW,CAAC7Q,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2IAAgCrB,GAAKS,eACjDkE,eAAgB,CAAC9Q,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,6HAA4BrB,GAAKS,eAClDmE,YAAa,CAAC/Q,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kFAAoBrB,GAAKS,eACvCoE,gBAAiB,CAAChR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qEAAiBrB,GAAKS,eACxCqE,iBAAkB,CAACjR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+GAAwBrB,GAAKS,eAChDsE,cAAe,CAAClR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,gUAA+DrB,GAAKS,qBAQhGuE,UAAW,CACThE,SAAU,SAAA7N,GAAK,OAAIA,EAAM+N,YAAc,IACvCE,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACL8R,SAAU,CAACpR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,gEACX6D,QAAS,CAACrR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8DAAWxN,EAAAC,EAAAC,cAAA,WAAX,mCACVwF,KAAM,CAAC1F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kFACP8D,OAAQ,CAACtR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8CACT+D,WAAY,CAACvR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sFAAexN,EAAAC,EAAAC,cAAA,WAAf,iEACb2N,WAAY,CAAC7N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sCAAOxN,EAAAC,EAAAC,cAAA,WAAP,0DAA0BiM,GAAKzE,QAC5CoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKc,mBAQ5CuE,KAAM,CACJrE,SAAU,SAAA7N,GAAK,MAAI,mFAAoBA,EAAMmS,OAC7ClE,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLmS,MAAO,CAACzR,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iEACRkE,MAAO,CAAC1R,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wFAAqBrB,GAAKM,UAClCkF,KAAM,CAAC3R,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,+IACPK,WAAY,CAAC7N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,sCAAOxN,EAAAC,EAAAC,cAAA,WAAP,0DAA0BiM,GAAKzE,QAC5CoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5CqF,IAAK,CACHzE,SAAU,SAAA7N,GAAK,OAAIA,EAAM+N,YAAc,IACvCE,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLmC,GAAI,CAACzB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wFACLH,WAAY,CAACrN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,wCACbG,UAAW,CAAC3N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2DACZqE,WAAY,CAAC7R,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,qGACbwB,oBAAqB,CAAChP,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iHACtBI,QAAS,CAAC5N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,2JACVsE,WAAY,CAAC9R,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uFAKrB,CACEL,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,gEAChBO,SAAU,SAAAzO,GAAK,OAAIA,EAAMyS,MACzBtE,OAAQ,CACN,CACEnO,MAAO,CACL0S,UAAW,CAAChS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,MAAOrB,GAAKa,YAQpCiF,IAAK,CACH9E,SAAU,SAAA7N,GAAK,OAAIA,EAAM4S,OAAS,IAClC3E,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACL4S,MAAO,CAAClS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kCACR2E,WAAY,CAACnS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uGACb4E,WAAY,CAACpS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uGACb6E,MAAO,CAACrS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DACR8E,YAAa,CAACtS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,iEACd+E,OAAQ,CAACvS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mFACTM,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,SAChCiG,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,cAQ/C+K,IAAK,CACHtF,SAAU,SAAA7N,GAAK,OAAIA,EAAMoT,YAAc,uEACvCnF,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLoT,WAAY,CAAC1S,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uGACbmF,WAAY,CAAC3S,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uGACboF,KAAM,CAAC5S,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8CACPM,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,SAChCiG,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,cAQ/CmL,IAAK,CACH1F,SAAU,SAAA7N,GAAK,OAAIA,EAAMoG,MAAQ,sDACjC6H,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLoG,KAAM,CAAC1F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kFACPgF,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,uCAAYrB,GAAKzE,QAChCoL,QAAS,CAAC9S,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,6CAAarB,GAAKzE,cAQxCqL,MAAO,CACL5F,SAAU,SAAA7N,GAAK,OAAIA,EAAMoG,MAAQ,sDACjC6H,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLoG,KAAM,CAAC1F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kFACPgF,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,QACnCoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5CyG,KAAM,CACJ7F,SAAU,SAAA7N,GAAK,OAAIA,EAAMoG,MAAQ,iHACjC6H,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLoG,KAAM,CAAC1F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,kFACPyF,SAAU,CAACjT,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,gEACX0F,WAAY,CAAClT,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DACbK,WAAY,CAAC7N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,QACjCoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5C4G,IAAK,CACHhG,SAAU,SAAA7N,GAAK,OAAIA,EAAM8T,YAAc,sBACvC7F,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLoG,KAAM,CAAC1F,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DACPgF,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,QACnCoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5C8G,GAAI,CACFlG,SAAU,SAAA7N,GAAK,OAAIA,EAAMmC,IAAM,+FAC/B8L,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLmC,GAAI,CAACzB,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,8FAQjB8F,IAAK,CACHnG,SAAU,SAAA7N,GAAK,OAAIA,EAAMiU,MAAQ,mIACjChG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjBkU,IAAK,CACHrG,SAAU,iBAAM,iHAChBI,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLkT,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,QACnCoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5CkH,IAAK,CACHtG,SAAU,iBAAM,qGAChBI,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLkT,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,QACnCoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5CmH,MAAO,CACLvG,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjBsU,IAAK,CACHzG,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjBuU,YAAa,CACX1G,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjBwU,IAAK,CACH3G,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjByU,KAAM,CACJ5G,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjB0U,MAAO,CACL7G,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjB2U,OAAQ,CACN9G,SAAU,SAAA7N,GAAK,OAAIA,EAAMqU,KACzBpG,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,QAQjB4U,SAAU,CACR/G,SAAU,iBAAM,6EAChBI,KAAM,CACJ,CACEJ,SAAU,kBAAMnN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,0DAChBC,OAAQ,CACN,CACEnO,MAAO,CACLkT,aAAc,CAACxS,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,yDAAerB,GAAKzE,QACnCoG,WAAY,CAAC9N,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,mDAAcrB,GAAKI,eAQ5C4H,YAAa,SAACrK,EAAO3J,EAAMiU,GACzB,OAAQjU,GACN,KAAKgM,GAAKI,QACR,OAAOvM,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAQuK,OAAOvK,GAAOwK,QAAQ,GAAK,EAAtC,WAA2CtU,EAAAC,EAAAC,cAAA,gBAA3C,KAA0D4J,GAASuK,OAAOvK,GAAO,KAAOwK,QAAQ,GAAK,EAArG,mBACT,KAAKnI,GAAKc,YACR,OAAOjN,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAQuK,OAAOvK,GAAOwK,QAAQ,GAAK,EAAtC,WAA2CtU,EAAAC,EAAAC,cAAA,iBACpD,KAAKiM,GAAKK,QACR,OAAOxM,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,GAAyB,IAAhBuK,OAAOvK,IAAgBwK,QAAQ,GAAK,EAAhD,WAAqDtU,EAAAC,EAAAC,cAAA,gBAArD,KAAoE4J,EAASA,EAAOwK,QAAQ,GAAK,EAAjG,mBACT,KAAKnI,GAAKzE,OACR,OAAO1H,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAQuK,OAAOvK,GAAOwK,QAAQ,GAAK,EAAtC,YACT,KAAKnI,GAAKM,SACR,OAAOzM,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAQuK,OAAOvK,GAAOwK,QAAQ,GAAK,EAAtC,kBACT,KAAKnI,GAAKO,aACR,OAAO1M,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAH,wBACT,KAAKqC,GAAKQ,gBACR,OAAO3M,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAH,sCACT,KAAKqC,GAAKS,cACR,OAAO5M,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,EAAH,WAAY9J,EAAAC,EAAAC,cAAA,gBAAZ,YACT,KAAKiM,GAAKa,KACR,OAAOhN,EAAAC,EAAAC,cAAA,KAAGkU,KAAMA,EAAMpK,OAAO,SAASzG,UAAU,WAAWgR,IAAI,uBAAxD,8CACT,QACE,OAAOvU,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuN,SAAA,KAAG1D,qrBCpkBlB,IAAM0K,GAAYrV,IAAOsE,IAAVgR,KACO,SAAAnV,GAAK,OAAIA,EAAMC,QAAQC,YAQhC,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,OAI9BgV,GAASvV,IAAOuB,OAAViU,KAYI,SAAArV,GAAK,OAAIA,EAAMC,QAAQE,WAC5B,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MAEhB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQqB,MAG7B,SAAAtB,GAAK,OAAIA,EAAMC,QAAQG,OA0DpBkV,GAtDC,SAAAtV,GAAS,IAAA4I,EACOzD,mBAAS,GADhB0D,EAAAxD,OAAAC,EAAA,EAAAD,CAAAuD,EAAA,GAChB2M,EADgB1M,EAAA,GACP2M,EADO3M,EAAA,GAGjB4M,EAAiBpL,sBAAY,WACjCrK,EAAM0V,WAAWhC,KAAK6B,EAAU,GAChCC,EAAWD,EAAU,IACpB,CAACvV,EAAOuV,IAELI,EAAiBtL,sBAAY,WACjCrK,EAAM0V,WAAWhC,KAAK6B,EAAU,GAChCC,EAAWD,EAAU,IACpB,CAACvV,EAAOuV,IAEX,OACE7U,EAAAC,EAAAC,cAACsU,GAAD,CAAWjV,QAASD,EAAMO,OACvBgV,EAAU,GACT7U,EAAAC,EAAAC,cAACwU,GAAD,CAAQ1T,QAASiU,EAAgB1V,QAASD,EAAMO,OAC9CG,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yDAIdvB,EAAAC,EAAAC,cAAA,6DAAa2U,EAAU,GACvB7U,EAAAC,EAAAC,cAACwU,GAAD,CAAQ1T,QAAS+T,EAAgBxV,QAASD,EAAMO,OAC9CG,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,w6HC/DlB,IAAM2T,GAAkB/V,IAAOsE,IAAV0R,KAOG,SAAA7V,GAAK,OAAIA,EAAMC,QAAQC,YAIvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQqB,OAOzCwU,GAAuBjW,IAAOsE,IAAV4R,KACJ,SAAA/V,GAAK,OAAIA,EAAMC,QAAQyD,SAIlC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,MAKV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YAI7B,SAAAF,GAAK,OAAIA,EAAMC,QAAQC,aAInC6H,GAAUlI,IAAOsE,IAAV6R,KAOS,SAAAhW,GAAK,OACvBA,EAAMuF,SAAWvF,EAAMC,QAAQC,WAAaF,EAAMC,QAAQyD,SAQpC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQC,YAE/B,SAAAF,GAAK,OAAIA,EAAMC,QAAQC,aAGnC+V,GAAiBpW,IAAOsE,IAAV+R,KASM,SAAAlW,GAAK,OAAIA,EAAMC,QAAQkW,QAKvB,SAAAnW,GAAK,OAAIA,EAAMC,QAAQqB,OAO3C8U,GAAWvW,IAAOsE,IAAVkS,KAKD,SAAArW,GAAK,OAAIA,EAAMC,QAAQG,MAGrB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQyD,UAKhCkB,GAAM/E,IAAOsE,IAAVmS,KAKO,SAAAtW,GAAK,OAAIA,EAAMC,QAAQE,WAE5B,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MAGL,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YAYvC,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAGrB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQyD,UAIhC6S,GAAY1W,IAAOsE,IAAVqS,KACC,SAAAxW,GAAK,OAAIA,EAAMC,QAAQE,WAK5B,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MAGL,SAAAJ,GAAK,OAAIA,EAAMC,QAAQkW,SAG9CM,GAAO5W,IAAOsE,IAAVuS,KACY,SAAA1W,GAAK,OAAIA,EAAMC,QAAQC,YAGvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQE,WAGjC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MAKjB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQE,WASb,SAAAH,GAAK,OAAIA,EAAMC,QAAQC,aAa7CyW,GAAO9W,IAAOsE,IAAVyS,KAIY,SAAA5W,GAAK,OAAIA,EAAMC,QAAQC,aAGvCkV,GAASvV,IAAOuB,OAAVyV,KAUI,SAAA7W,GAAK,OACjBA,EAAM8W,SAAW9W,EAAMC,QAAQqB,KAAOtB,EAAMC,QAAQE,WACxC,SAAAH,GAAK,OAAKA,EAAM+W,eAAiB,UAAY,MAC7C,SAAA/W,GAAK,OACjBA,EAAM+W,gBAAkB/W,EAAM8W,SAAW,UAAY,MAC9C,SAAA9W,GAAK,OAAIA,EAAMC,QAAQG,MAEhB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQqB,MACvB,SAAAtB,GAAK,OAAKA,EAAM+W,eAAiB,UAAY,OA6RhDC,OAtRf,SAA0BhX,GAAO,IAAA4I,EACGzD,qBADH0D,EAAAxD,OAAAC,EAAA,EAAAD,CAAAuD,EAAA,GACxBqO,EADwBpO,EAAA,GACbqO,EADarO,EAAA,GAAAG,EAEG7D,qBAFHiE,EAAA/D,OAAAC,EAAA,EAAAD,CAAA2D,EAAA,GAExBmO,EAFwB/N,EAAA,GAEbgO,EAFahO,EAAA,GAIzBiO,EAAgB,SAACC,EAAU5U,EAAW6U,GAC1C,GAAIN,EAAW,CACb,IAAM3O,EAAQ2O,EAAUxI,SACpBwI,EAAUxI,SAAS6I,GACnB,CAACA,GACL,OACEA,EAAS5I,SACR4I,EAAS5I,OAAOtG,QACjB6O,EAAUxI,UAC8B,+FAAxCwI,EAAUpJ,WAAW7N,MAAMwX,SAGzB9W,EAAAC,EAAAC,cAAC2V,GAAD,CAAWtW,QAASD,EAAMO,OAA1B,2OAKF+W,EAASjI,SACRiI,EAASjI,OAAOjH,QACjB6O,EAAUxI,UAC8B,uEAAxCwI,EAAUpJ,WAAW7N,MAAMwX,SAGzB9W,EAAAC,EAAAC,cAAC2V,GAAD,CAAWtW,QAASD,EAAMO,OAA1B,yNAKF+W,EAAS7E,OACR6E,EAAS7E,KAAKrK,QACf6O,EAAUxI,UAC8B,2DAAxCwI,EAAUpJ,WAAW7N,MAAMwX,SAGzB9W,EAAAC,EAAAC,cAAC2V,GAAD,CAAWtW,QAASD,EAAMO,OAA1B,6HAGK+H,EAAMtC,IAAI,SAAAgF,GAAI,OACnBiM,EAAU9I,OAAOnI,IAAI,SAAC+E,EAAO7E,GAAR,OACnBxF,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,gBAAgBkC,IAAKD,GACjC6E,EAAM8C,SACLnN,EAAAC,EAAAC,cAAC2V,GAAD,CAAWtW,QAASD,EAAMO,OACxBG,EAAAC,EAAAC,cAAA,SAAImK,EAAM8C,SAAS7C,KAGrBtK,EAAAC,EAAAC,cAAC+V,GAAD,CAAM1W,QAASD,EAAMO,QAEW,QAAjCyK,EAAI,qBACHtK,EAAAC,EAAAC,cAAC6W,GAAD,CAAKxX,QAASD,EAAMO,OAApB,qGAEA8E,OAAO+F,KAAKL,EAAM/K,OAAOgG,IAAI,SAAAG,GAC3B,OACEzF,EAAAC,EAAAC,cAAC6W,GAAD,CAAKxX,QAASD,EAAMO,MAAO4F,IAAKA,GAC9BzF,EAAAC,EAAAC,cAAA,SACW,cAARuF,GAAuBmR,EAAS7E,KAAKrK,OAClCkP,EAAS7E,KAAK,GAAGC,UACjB3H,EAAM/K,MAAMmG,GACZ4E,EAAM/K,MAAMmG,GAAK,IAAM4E,EAAM/K,MAAMmG,GACnCA,GAENzF,EAAAC,EAAAC,cAAA,SACG8W,GAAW7C,YACV7J,EAAK7E,GACL4E,EAAM/K,MAAMmG,GAAK,GACjBmR,EAAS7E,MAAQ6E,EAAS7E,KAAKrK,OAA/B,GAAAtF,OACO6U,OAAOC,SADd,yBAAA9U,OAC8CwU,EAAS7E,KAAK,GAAGtQ,IAC3D,iBActB0V,EAAiB,SAACnV,EAAW6U,EAAKO,GACtC,MAAkB,UAAdpV,EACKgV,GAAWhV,GAAWuL,KAAKjI,IAChC,SAAC+R,EAAK7R,GAAN,QACI6R,EAAItJ,UAAYsJ,EAAItJ,SAAS8I,EAAIS,cACjCtX,EAAAC,EAAAC,cAACqX,GAAD,CACEvW,QAAS,kBAAMwV,EAAaa,IAC5B9X,QAASD,EAAMO,MACfuW,SAAUG,IAAcc,EACxB5R,IAAKD,EACLvE,YAAA,EACAC,WAAA,kBAAAkB,OAA4BoD,IAE5BxF,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEsD,UAAU,gBACV9B,GAAE,kBAAAW,OAAoBoD,GACtB7D,UAAW,IACXxB,KAAMb,EAAM0M,KAAO,QAAU,QAJ/B,0FAMoBqL,EAAIlK,WANxB,KAQCkK,EAAIlK,cAIU,UAAdnL,EACUwV,QAAQX,EAAIS,WAAWnJ,QAAQzG,SAC9B0P,EA2BXJ,GAAWhV,GAAWuL,KAAKjI,IAChC,SAAC+R,EAAK7R,GAAN,QACI6R,EAAItJ,UAAYsJ,EAAItJ,SAAS8I,EAAIS,cACjCtX,EAAAC,EAAAC,cAACqX,GAAD,CACEvW,QAAS,kBAAMwV,EAAaa,IAC5B9X,QAASD,EAAMO,MACfuW,SAAUG,IAAcc,EACxB5R,IAAKD,EACL6Q,eAAsB,IAAN7Q,EAChBvE,YAAA,EACAC,WAAA,kBAAAkB,OAA4BoD,IAE5BxF,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEsD,UAAU,gBACV9B,GAAE,kBAAAW,OAAoBoD,GACtB7D,UAAW,IACXxB,KAAMb,EAAM0M,KAAO,QAAU,QAJ/B,0FAMoBqL,EAAIlK,WANxB,KAQCkK,EAAIlK,cA9CN6J,GAAWhV,GAAWuL,KAC1B5C,OAAO,SAAC0M,EAAK7R,GAAN,OAAkB,IAANA,IACnBF,IACC,SAAC+R,EAAK7R,GAAN,QACI6R,EAAItJ,UAAYsJ,EAAItJ,SAAS8I,EAAIS,cACjCtX,EAAAC,EAAAC,cAACqX,GAAD,CACEvW,QAAS,kBAAMwV,EAAaa,IAC5B9X,QAASD,EAAMO,MACfuW,SAAUG,IAAcc,EACxB5R,IAAKD,EACLvE,YAAA,EACAC,WAAA,kBAAAkB,OAA4BoD,IAE5BxF,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEsD,UAAU,gBACV9B,GAAE,kBAAAW,OAAoBoD,GACtB7D,UAAW,IACXxB,KAAMb,EAAM0M,KAAO,QAAU,QAJ/B,0FAMoBqL,EAAIlK,WANxB,KAQCkK,EAAIlK,mBAxBZ,GA2JT,OACEnN,EAAAC,EAAAC,cAACgV,GAAD,CAAiB3V,QAASD,EAAMO,OAC9BG,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,aACLkD,OAAO+F,KAAKpL,EAAMmY,MAAMnS,IAAI,SAAA0B,GAAK,OAChC1H,EAAMmY,KAAKzQ,GAAO1B,IAAI,SAACuR,EAAKrR,GAAN,OAtG9B,SAAsBxD,EAAW6U,EAAKrR,GACpC,OACExF,EAAAC,EAAAC,cAACkV,GAAD,CAAsB7V,QAASD,EAAMO,MAAO4F,IAAKoR,EAAIpV,IACnDzB,EAAAC,EAAAC,cAACqL,EAAAtL,EAAD,CACEuL,eAAgB,IAChBE,UAAW,WACTgL,EAAaG,GACbL,EAAaQ,GAAWhV,GAAWuL,KAAK,KAE1C5B,UAAW,WACLkL,IAAQN,GACVG,OAAagB,IAGjBvM,KAAM0L,IAAQJ,EACdhL,QACEzL,EAAAC,EAAAC,cAACyX,GAAD,CACEpY,QAASD,EAAMO,MACfgF,SAAUgS,IAAQJ,EAClBxV,YAAA,EACAC,WAAS,cAETlB,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,SACG8W,GAAWhV,IAAcgV,GAAWhV,GAAWmL,SAC5C6J,GAAWhV,GAAWmL,SAAS0J,EAAIS,YACnCT,EAAIpV,IAEVzB,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEwB,GAAG,aACHE,UAAW,IACXxB,KAAMb,EAAM0M,KAAO,QAAU,QAH/B,+EAUH6K,IAAQJ,GACPzW,EAAAC,EAAAC,cAAC6V,GAAD,CAAMxW,QAASD,EAAMO,OACnBG,EAAAC,EAAAC,cAACqV,GAAD,CAAgBhW,QAASD,EAAMO,OAC7BG,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,eACZ4T,EAAenV,EAAW6U,EAAKvX,EAAMsY,kBAExC5X,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEwB,GAAE,SAAAW,OAAWoD,GACb7D,UAAW,IACXxB,KAAMb,EAAM0M,KAAO,QAAU,QAH/B,gGAOAhM,EAAAC,EAAAC,cAAA,OACEe,YAAA,EACAC,WAAA,SAAAkB,OAAmBoD,GACnBxE,QAAS,kBACP1B,EAAMuY,cACJ,IAAIC,KAAMC,qBAAqBlB,EAAImB,YAGvC7W,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,kDAGI,UAAdS,GAAuC,cAAdA,IAC3B6U,EAAIS,WAAWW,gBAoBG,UAAdjW,GAAuC,cAAdA,EAC3BhC,EAAAC,EAAAC,cAAA,KAAGqD,UAAU,YAAb,oLACE,KArBFvD,EAAAC,EAAAC,cAACwV,GAAD,CAAUnW,QAASD,EAAMO,MAAOqY,UAAU,GACxClY,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,KACEkU,KAAI,GAAAhS,OAAK6U,OAAOC,SAAZ,yBAAA9U,OAA4CyU,EAAIS,WAAWlK,WAC/DpD,OAAO,SACPuK,IAAI,sBACJtT,YAAA,EACAC,WAAA,oBAAAkB,OAA8BoD,IAE9BxF,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACE0B,UAAW,IACXxB,KAAMb,EAAM0M,KAAO,QAAU,OAC7BvK,GAAE,oBAAAW,OAAsBoD,IAH1B,8CAPF,kHAoBHmR,EAAcE,EAAIS,WAAYtV,EAAW6U,MAWZsB,CAAanR,EAAO6P,EAAKrR,QAG9DlG,EAAM0V,WAAWhC,MAChBhT,EAAAC,EAAAC,cAACkY,GAAD,CAASpD,WAAY1V,EAAM0V,WAAYnV,MAAOP,EAAMO,6QC7d5D,IAAMwY,GAAUlZ,IAAOsE,IAAV6U,KAKS,SAAAhZ,GAAK,OAAIA,EAAMC,QAAQyD,SAClC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,OAYnB6Y,GAND,SAAAjZ,GAAK,OACjBU,EAAAC,EAAAC,cAACmY,GAAD,CAAS5W,GAAG,KAAKlC,QAASD,EAAMO,OAAhC,+jBCZF,IAAM2Y,GAASrZ,IAAOsE,IAAVgV,KAIY,SAAAnZ,GAAK,OAAIA,EAAMC,QAAQyD,SAClC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,OAgBrB,SAASgZ,GAAUpZ,GAChC,OACEU,EAAAC,EAAAC,cAACsY,GAAD,CACEjZ,QAASD,EAAMO,MACfoB,YAAA,EACAC,WAAS,kBAETlB,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CAAcwB,GAAG,iBAAiBkX,OAAO,QAAQjX,QAAM,EAACvB,KAAMb,EAAM0M,KAAO,QAAU,QAArF,8KACAhM,EAAAC,EAAAC,cAAA,SACE0Y,YAAY,wOACZC,WAAY,SAAA/N,GACS,KAAfA,EAAEgO,UACJxZ,EAAMyZ,aAAajO,EAAEd,OAAOF,oLC9BxC,IAAMkP,GAAU7Z,IAAOsE,IAAVwV,MAuDEC,OA/Cf,SAAoB5Z,GAqBlB,OACEA,EAAM6L,MACJnL,EAAAC,EAAAC,cAAC8Y,GAAD,CAASG,QAtBO,WAClB7Z,EAAM8Z,YAsBFpZ,EAAAC,EAAAC,cAACwY,GAAD,CACEK,aAAczZ,EAAMyZ,aACpBlZ,MAAOP,EAAMO,MACbmM,KAAM1M,EAAM0M,OAtBC,WACnB,IAAIqN,GAAc,EAClB,GAA+C,IAA3C1U,OAAO+F,KAAKpL,EAAMga,cAAc5R,OAElC,OADA2R,GAAc,EAGd,IAAK,IAAIE,KAAQja,EAAMga,aAErB,KADAD,EAAkD,IAApC/Z,EAAMga,aAAaC,GAAM7R,QAErC,OAAO2R,EAIb,OAAOA,EAWFG,IAAkBxZ,EAAAC,EAAAC,cAACuZ,GAAD,CAAO5Z,MAAOP,EAAMO,QACtCP,EAAMga,cAAgB3U,OAAO+F,KAAKpL,EAAMga,cAAc5R,OAAS,GAC9D1H,EAAAC,EAAAC,cAACwZ,GAAD,CACEjC,KAAMnY,EAAMga,aACZhU,IAAKhG,EAAMgG,IACXqU,MAAOra,EAAMsa,OACb/B,aAAcvY,EAAMuY,aACpB7C,WAAY1V,EAAM0V,WAClBnV,MAAOP,EAAMO,MACb+X,gBAAiBtY,EAAMsY,gBACvB5L,KAAM1M,EAAM0M,6iGClDxB,IAAM6N,GAAoB1a,IAAOsE,IAAVqW,KAOZ,SAAAxa,GAAK,OAAIA,EAAMC,QAAQG,MAaV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQE,WASvB,SAAAH,GAAK,OAAIA,EAAMC,QAAQE,WAWvB,SAAAH,GAAK,OAAIA,EAAMC,QAAQC,YAClC,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAKV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQqB,MAevB,SAAAtB,GAAK,OAAIA,EAAMC,QAAQE,WAClC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,MAIL,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YAEvC,SAAAF,GAAK,OAAIA,EAAMC,QAAQyD,SAGL,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,MAGvB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,MAM5C,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,MAET,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YAI3B,SAAAF,GAAK,OAAIA,EAAMC,QAAQE,WAErB,SAAAH,GAAK,OAAIA,EAAMC,QAAQyD,SAS1B,SAAA1D,GAAK,OAAIA,EAAMC,QAAQyD,SACtC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQC,YAGL,SAAAF,GAAK,OAAIA,EAAMC,QAAQC,YAIvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQyD,SAKzB,SAAA1D,GAAK,OAAIA,EAAMC,QAAQE,WAOvB,SAAAH,GAAK,OAAIA,EAAMC,QAAQE,WAErB,SAAAH,GAAK,OAAIA,EAAMC,QAAQE,WAMvB,SAAAH,GAAK,OAAIA,EAAMC,QAAQyD,SAMlC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,MAGrB,SAAAJ,GAAK,OAAIA,EAAMC,QAAQyD,SAWhB,SAAA1D,GAAK,OAAIA,EAAMC,QAAQyD,SAQrB,SAAA1D,GAAK,OAAIA,EAAMya,SAAWza,EAAMC,QAAQqB,KAAOtB,EAAMC,QAAQC,YACxE,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAMZ,SAAAJ,GAAK,OAAIA,EAAMC,QAAQE,YASlC,SAASua,GAAc1a,GAAO,IAAA4I,EACfzD,mBAAS,IADM0D,EAAAxD,OAAAC,EAAA,EAAAD,CAAAuD,EAAA,GACpC+R,EADoC9R,EAAA,GAC5B+R,EAD4B/R,EAAA,GAAAG,EAEX7D,mBAAS,CAAC,GAAI,KAFHiE,EAAA/D,OAAAC,EAAA,EAAAD,CAAA2D,EAAA,GAEpC6R,EAFoCzR,EAAA,GAE1B0R,EAF0B1R,EAAA,GAAAG,EAGnBpE,mBAAS,GAHUqE,EAAAnE,OAAAC,EAAA,EAAAD,CAAAkE,EAAA,GAGpCqG,EAHoCpG,EAAA,GAG9BuR,EAH8BvR,EAAA,GAAAG,EAIHxE,mBAAS,GAJNyE,EAAAvE,OAAAC,EAAA,EAAAD,CAAAsE,EAAA,GAIpCqR,EAJoCpR,EAAA,GAItBqR,EAJsBrR,EAAA,GAAAG,EAKnB5E,mBAAS,GALU6E,EAAA3E,OAAAC,EAAA,EAAAD,CAAA0E,EAAA,GAKpCmR,EALoClR,EAAA,GAK9BmR,EAL8BnR,EAAA,GAAAC,EAMX9E,qBANW+E,EAAA7E,OAAAC,EAAA,EAAAD,CAAA4E,EAAA,GAMpCmR,EANoClR,EAAA,GAM1BmR,EAN0BnR,EAAA,GAAAoR,EAOHnW,qBAPGoW,EAAAlW,OAAAC,EAAA,EAAAD,CAAAiW,EAAA,GAOpCE,EAPoCD,EAAA,GAOtBE,EAPsBF,EAAA,GAAAG,EAQXvW,qBARWwW,EAAAtW,OAAAC,EAAA,EAAAD,CAAAqW,EAAA,GAQpCE,EARoCD,EAAA,GAQ1BE,EAR0BF,EAAA,GAUrCG,EAAe,SAACxR,EAAOpE,EAAGoG,GAC9BqO,EAAOzU,GAAGoG,GAAKhC,EAAMI,OAAOF,MAC5BoQ,EAAUvV,OAAOsF,OAAO,GAAIgQ,IAC5BA,EAAOoB,KAAKpB,EAAO,IACnB3a,EAAMgc,SAAS,GAAGC,cAAcC,eAAe,CAACvB,IAChDI,EAAQ/a,EAAMgc,SAAS,GAAGC,cAAcE,YAoBpCC,EAAkB,SAAC9R,EAAOgC,GAC9BuO,EAASvO,GAAKhC,EAAMI,OAAOF,MAC3BsQ,EAAYzV,OAAOsF,OAAO,GAAIkQ,KAYhCwB,oBAAU,WACJrc,EAAMgc,SAAS5T,OAAS,GAC1BwS,EACE5a,EAAMgc,SAAS,GACZC,cACAK,iBAAiB,GACjBC,MAAM,GAAI,IAEfxB,EAAQ/a,EAAMgc,SAAS,GAAGC,cAAcE,aAExCvB,EAAU,IACVE,EAAY,CAAC,GAAI,KACjBC,EAAQ,KAET,CAAC/a,EAAMgc,WAEVK,oBAAU,WACR,GAAIrc,EAAMgc,SAAS5T,OAAS,EAAG,CAC7B,IAAMoU,GAAM,IAAIhE,KAAMiE,cAAczc,EAAMgc,SAAS,GAAGC,eACtDS,MAAM/E,OAAOC,SAAW,2BAA6B4E,EAAK,CACxDG,OAAQ,MACRC,KAAM,OACNC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GAAM,OAAIhC,EAAgBgC,EAAOA,YAE1C,CAACjd,EAAMgc,WAEVK,oBAAU,WACR,GAAIrc,EAAMgc,SAAS5T,OAAS,EAAG,CAC7B,IACMoU,GAAM,IAAIhE,KAAMiE,cAAczc,EAAMgc,SAAS,GAAGC,eACtDS,MAAM/E,OAAOC,SAAW,kBAAoB4E,EAAK,CAC/CG,OAAQ,MACRC,KAAM,OACNC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GAAM,OAAI9B,EAAQ8B,EAAOA,UAEjC5B,EAAW,GAAAvY,OAAI6U,OAAOC,SAAX,qBAAA9U,OAVE,KAUF,UAAAA,OAAoD0Z,IAC/Df,EAAe,GAAA3Y,OACV6U,OAAOC,SADG,wBAAA9U,OAXF,KAWE,UAAAA,OACyC0Z,MAGzD,CAACxc,EAAMgc,WAEV,IAAMkB,EAAe,SAACC,EAAGC,GACvB,IAAIC,EAAcF,EACfnI,QAAQoI,GACRE,WACAC,QAAQ,KAAM,KAIjB,IAHI,SAASC,KAAKH,KAChBA,EAAcA,EAAYE,QAAQ,iBAAkB,QAE/C,UAAUC,KAAKH,IACpBA,EAAcA,EAAYE,QAAQ,sBAAuB,OAE3D,OAAOF,GAUHI,EAAoB,SAAArd,GACxB,IAAMua,EAASva,EAAKsd,MAAM,MAAM1X,IAAI,SAAA2X,GAAI,OAAIA,EAAKD,MAAM,KAAK1X,IAAI,SAAA4X,GAAG,OAAIC,WAAWD,OAClF5d,EAAM8d,kBAAkBnD,IAG1B,OACE3a,EAAM6L,MACJnL,EAAAC,EAAAC,cAAC2Z,GAAD,CAAmBta,QAASD,EAAMO,OAChCG,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,SAAOC,KAAK,OAAOsB,GAAG,cAAcpB,SAAU,SAAAyK,GAAC,OAhB9B,SAAAlB,GACvB,IAAMyT,EAAiBzT,EAAMI,OAAOsT,MAAM,GACtCC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAAA3S,GAAMiS,EAAkBjS,EAAEd,OAAOuS,QAASpB,EAAYkC,EAAe3X,OACrF6X,EAAOG,WAAWL,GAYuCM,CAAiB7S,MACpE9K,EAAAC,EAAAC,cAAA,SAAO0d,QAAQ,cAAcnc,GAAG,qBAAhC,mFACCyZ,EACClb,EAAAC,EAAAC,cAAA,YAAOgb,GAAmB,MAG9Blb,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,SACNzB,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,0BACbvD,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,2EACAF,EAAAC,EAAAC,cAAA,2EACAF,EAAAC,EAAAC,cAAA,WACG+Z,EAAOvS,OAAS,GACf1H,EAAAC,EAAAC,cAAA,OACEc,QAAS,kBAlHvBkZ,EAAU,IACV5a,EAAMgc,SAAS,GAAGC,cAAcC,eAAe,IAC/Cf,EAAQ,GACRJ,EAAQ,GACRE,EAAgB,QAChBQ,KA8Gc5Z,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,qFAKhBvB,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,cACNzB,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,kBACLwY,EAAO3U,IAAI,SAACuY,EAAOrY,GAAR,OACVxF,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,YAAYkC,IAAKD,GAC9BxF,EAAAC,EAAAC,cAAA,SAAIsF,EAAI,GACRxF,EAAAC,EAAAC,cAAA,SACEC,KAAK,SACLuG,KAAK,IACLoD,MAAOqT,WAAWU,EAAM,IAAIvJ,QAAQ,GACpCjU,SAAU,SAAAyK,GAAC,OAAIsQ,EAAatQ,EAAGtF,EAAG,MAEpCxF,EAAAC,EAAAC,cAAA,SACEC,KAAK,SACLuG,KAAK,IACLoD,MAAOqT,WAAWU,EAAM,IAAIvJ,QAAQ,GACpCjU,SAAU,SAAAyK,GAAC,OAAIsQ,EAAatQ,EAAGtF,EAAG,MAEpCxF,EAAAC,EAAAC,cAAA,OACEc,QAAS,kBAxJN,SAAAwE,GACnByU,EAAO6D,OAAOtY,EAAG,GACjB0U,EAAUvV,OAAOsF,OAAO,GAAIgQ,IAC5BA,EAAOoB,KAAKpB,EAAO,IACnB3a,EAAMgc,SAAS,GAAGC,cAAcC,eAAe,CAACvB,IAChDI,EAAQ/a,EAAMgc,SAAS,GAAGC,cAAcE,WAmJTsC,CAAavY,IAC5BrE,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yFAOpBvB,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,aACbvD,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,SACE0Y,YAAY,+CACZzY,KAAK,SACLuG,KAAK,IACLoD,MAAOqQ,EAAS,GAChB9Z,SAAU,SAAAyK,GAAC,OAAI4Q,EAAgB5Q,EAAG,MAEpC9K,EAAAC,EAAAC,cAAA,SACE0Y,YAAY,+CACZzY,KAAK,SACLuG,KAAK,IACLoD,MAAOqQ,EAAS,GAChB9Z,SAAU,SAAAyK,GAAC,OAAI4Q,EAAgB5Q,EAAG,MAEpC9K,EAAAC,EAAAC,cAAA,OACEc,QAhKQ,WAChBiZ,EAAOoB,KAAKlB,GACZD,EAAUvV,OAAOsF,OAAO,GAAIgQ,IAC5BA,EAAOoB,KAAKpB,EAAO,IACnB3a,EAAMgc,SAAS,GAAGC,cAAcC,eAAe,CAACvB,IAChDI,EAAQ/a,EAAMgc,SAAS,GAAGC,cAAcE,WACxCrB,EAAY,CAAC,GAAI,MA2JTjZ,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,0CAGZvB,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,cACbvD,EAAAC,EAAAC,cAAA,wDAEAF,EAAAC,EAAAC,cAAA,WACGsc,EAAatN,EAAM,GADtB,UAC2BlP,EAAAC,EAAAC,cAAA,gBAD3B,KAC0Csc,EAAatN,EAAK,IAAO,GADnE,oBAIFlP,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,cACbvD,EAAAC,EAAAC,cAAA,2HACAF,EAAAC,EAAAC,cAAA,SAAIsc,EAAahC,EAAM,GAAvB,iBAEEM,IAAiBR,EACjBta,EAAAC,EAAAC,cAAA,KAAGkU,KAAM0G,EAAc9Q,OAAO,SAASuK,IAAI,uBAA3C,iEAGA,MAGJvU,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,sBACK,EAAf+W,GAAoB,IAAqB,EAAfA,GAAoB,IAC/Cta,EAAAC,EAAAC,cAAA,iDAEEF,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yDAIG,EAAf+Y,GAAoB,GAAKta,EAAAC,EAAAC,cAAA,wKACV,EAAfoa,GAAoB,GAAKta,EAAAC,EAAAC,cAAA,4JACV,EAAfoa,GAAoB,GAAKta,EAAAC,EAAAC,cAAA,0IAG1B4a,IAAiBR,EAClBta,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,WACNzB,EAAAC,EAAAC,cAAA,KACA8d,KAAK,SACL5J,KAAMsG,EACN1Q,OAAO,SACPuK,IAAI,uBAJJ,kCAQFvU,EAAAC,EAAAC,cAAA,UAAQc,QAAS,WAAQ1B,EAAM2e,WAAW,uBAAwB,KAAlE,8EAEA,+BC5aK,SAASC,GAATte,GAA0B,IAARoM,EAAQpM,EAARoM,KACzBmS,EAAYnS,EAAO,QAAU,QAC7BoS,EAAepS,EAAO,QAAU,QAEtC,OACEhM,EAAAC,EAAAC,cAAA,UACEme,MAAO,CACLC,SAAU,WACVC,QAAS,OACTC,WAAY,SACZC,OAAQ,GACRC,QAAS,EACTC,OAAQ,IAGV3e,EAAAC,EAAAC,cAAA,OACEiC,IAAKyc,KACLrc,IAAI,GACJ8b,MAAO,CACLjd,MAAO,MACPyd,gBAAiB,QACjBC,aAAc,MACdpd,OAAM,kBACNgd,QAAS,EACT/T,OAAM,UAAAvI,OAAY4J,EAAO,OAAS,KAA5B,QAGVhM,EAAAC,EAAAC,cAAA,QACEme,MAAO,CACLU,WAAY,UACZC,SAAU,OACVP,OAAQ,EACRQ,WAAY,IACZC,MAAOf,EACPgB,WAAU,eAAA/c,OAAiBgc,EAAjB,0CAAAhc,OACiBgc,EADjB,0CAAAhc,OAEiBgc,EAFjB,yCAAAhc,OAGgBgc,KAV9B,4gEC1BN,IAAMgB,GAASjgB,IAAOsE,IAAV4b,KAQU,SAAA/f,GAAK,OAAIA,EAAMC,QAAQyD,SAClC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,MAmBR,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YAIvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQyD,SASrB,SAAA1D,GAAK,OAAIA,EAAMC,QAAQC,YAIhB,SAAAF,GAAK,OAAIA,EAAMC,QAAQE,WAExC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,OAuBnCwE,GAAM/E,IAAOsE,IAAV6b,KAKa,SAAAhgB,GAAK,OAAIA,EAAMC,QAAQE,YAcvC8f,GAAcpgB,IAAOsE,IAAV+b,KAIK,SAAAlgB,GAAK,OACvBA,EAAMuf,gBAAkBvf,EAAMuf,gBAAkB,SACpC,SAAAvf,GAAK,OAAKA,EAAMmgB,YAAcngB,EAAMmgB,YAAc,SAC5D,SAAAngB,GAAK,OAAKA,EAAMogB,YAAcpgB,EAAMogB,YAAcpgB,EAAMuf,kBAwDxDc,GAAY,CAChB,CACEja,KAAM,OACNC,MAAO,4EACPiC,MAAO,CACL,CACElC,KAAM,qEACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,6EACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,iCACNka,KAAM,yBACNf,gBAAiB,WAEnB,CACEnZ,KAAM,wFACNka,KAAM,0BACNf,gBAAiB,WAEnB,CACEnZ,KAAM,iCACNka,KAAM,0BACNf,gBAAiB,WAEnB,CACEnZ,KAAM,6CACNmZ,gBAAiB,UACjBa,YAAa,aAInB,CACEha,KAAM,KACNC,MAAO,kFACPiC,MA1FiB,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAG+BtC,IAAI,SAAC4Z,EAAO1Z,GAAR,MAAe,CAClDE,KAAI,mFAAAtD,OAAoBoD,EAAI,GAC5BqZ,gBAAiBK,EACjBQ,YAAa,cA8Cf,CACEha,KAAM,WACNC,MAAO,gHACPiC,MAAO,CACL,CACElC,KAAM,0DACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,gHACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,0FACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,yIACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,4HACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,gHACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,oJACNmZ,gBAAiB,WAEnB,CACEnZ,KAAM,kHACNmZ,gBAAiB,cAMV,SAASgB,GAAavgB,GAAO,IAAA4I,EACVzD,mBAAS,IADC0D,EAAAxD,OAAAC,EAAA,EAAAD,CAAAuD,EAAA,GACnCrD,EADmCsD,EAAA,GACzBrD,EADyBqD,EAAA,GAGpCgC,EAAiB,SAACnD,EAAO8C,GAC7B,IAAMD,EAAI,GACVA,EAAE7C,EAAMtB,MAAQoE,EAChBhF,EAAYH,OAAOsF,OAAO,GAAIpF,EAAUgF,KAG1C,OACEvK,EAAM6L,MACJnL,EAAAC,EAAAC,cAACkf,GAAD,CAAQ7f,QAASD,EAAMO,OACrBG,EAAAC,EAAAC,cAAA,6FACAF,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,aACLke,GAAUra,IAAI,SAAA0B,GAAK,OAClBhH,EAAAC,EAAAC,cAACqL,EAAAtL,EAAD,CACEwF,IAAKuB,EAAMtB,KACX+F,QACEzL,EAAAC,EAAAC,cAAA,WACG8G,EAAMrB,MACP3F,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yDAIdiK,eAAgB,IAChBsU,OAAO,WACP3U,KAAMtG,EAASmC,EAAMtB,MACrBgG,UAAW,kBAAMvB,EAAenD,GAAO,IACvC2E,UAAW,kBAAMxB,EAAenD,GAAO,KAEtCA,EAAMY,MAAMtC,IAAI,SAAAgF,GAAI,OACnBtK,EAAAC,EAAAC,cAAC6f,GAAD,CAAKta,IAAK6E,EAAK5E,KAAMnG,QAASD,EAAMO,OACjCyK,EAAKsV,KACJ5f,EAAAC,EAAAC,cAAA,OAAKiC,IAAKmI,EAAKsV,KAAMrd,IAAI,KAEzBvC,EAAAC,EAAAC,cAACqf,GAAD,CACEV,gBAAiBvU,EAAKuU,gBACtBa,YAAapV,EAAKoV,YAClBD,YAAanV,EAAKmV,cAGtBzf,EAAAC,EAAAC,cAAA,SAAIoK,EAAK5E,m+CCvR3B,IAAMsa,GAAe7gB,IAAOsE,IAAVwc,KAQI,SAAA3gB,GAAK,OAAIA,EAAMC,QAAQyD,SAClC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,MAaV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQE,WAIvB,SAAAH,GAAK,OAAIA,EAAMC,QAAQC,YASrB,SAAAF,GAAK,OAAIA,EAAMC,QAAQC,YAIvB,SAAAF,GAAK,OAAIA,EAAMC,QAAQyD,SASrB,SAAA1D,GAAK,OAAIA,EAAMC,QAAQyD,SAIhB,SAAA1D,GAAK,OAAIA,EAAMC,QAAQE,WAExC,SAAAH,GAAK,OAAIA,EAAMC,QAAQG,OAuB1B,SAASwgB,GAAa5gB,GACnC,OACEU,EAAAC,EAAAC,cAAC8f,GAAD,CAAczgB,QAASD,EAAMO,OAC3BG,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,aACLnC,EAAML,QAAQqG,IAAI,SAAArD,GAAM,OACvBjC,EAAAC,EAAAC,cAACqL,EAAAtL,EAAD,CACEwF,IAAKxD,EAAOK,KACZmJ,QACEzL,EAAAC,EAAAC,cAAA,WACG+B,EAAOke,OACRngB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yDAIdiK,eAAgB,IAChBsU,OAAO,YAEN7d,EAAOme,UAAU9a,IAAI,SAAA+a,GAAQ,OAC5BrgB,EAAAC,EAAAC,cAAA,KACEuF,IAAKxD,EAAOK,KAAO+d,EAAS/d,KAC5BtB,QAAS,WAAO1B,EAAMghB,UAAUD,GAAW/gB,EAAMkL,UAAU,SAAS,KAEnE6V,EAASF,eC7G1B,IAAII,GAAY,KACZC,GAAe,gBACfC,GAAoB,KAEpBC,GAAe,KAGfC,GAAe,SAEnB,SAASC,GAAaC,IACrBN,GAAY,IAAIO,UAAU,2BAEhBC,OAAS,WACQ,OAAtBN,KACHA,GAAoBO,YAAYC,GAAW,MAExCJ,GACHA,KAIFN,GAAUW,QAAU,SAAStX,KAE7B2W,GAAUY,UAAY,SAASvX,GAC9B,IAAI2S,EACA6E,EACAxX,EAAMyX,OAASb,KAInBY,EAAK,CACJ7E,QAFDA,EAAS+E,KAAKC,MAAM3X,EAAMyX,OAEV9E,OACfiF,aAAcjF,EAAOiF,aACrBC,UAAWlF,EAAOkF,UAClBnf,KAAMia,EAAOja,KACbof,eAAgBnF,EAAOmF,eACvBC,QAASpF,EAAOoF,QAChBC,UAAW,WACV,OAAOtW,KAAKiR,QAEbsF,gBAAiB,WAChB,OAAOvW,KAAKkW,cAEbM,aAAc,WACb,OAAOxW,KAAKmW,WAEbM,WAAY,WACX,OAAOzW,KAAKqW,SAEbK,kBAAmB,WAClB,OAAO1W,KAAKoW,gBAEbO,QAAS,WACR,OAAO3W,KAAKhJ,OAGVoe,IACHA,GAAaU,KAGfb,GAAU2B,QAAU,SAAStY,GAqB9B,IAA2B+X,IApBP,qHAqBnBQ,MAAMR,GAAoB,yCAjBpB,SAASS,GAAqBC,GAClB,OAAd9B,IAA+C,IAAzBA,GAAU+B,YAA6C,IAAzB/B,GAAU+B,WACjE1B,GAAa,WACZwB,GAAqBC,KA0GxB,SAAoBpG,EAAQsG,EAAM1B,GAC9B,IAAI2B,EAAiB,CACjB7jB,OAAU,8BACVsd,OAAUA,EACVsG,KAAQA,GAER1B,IAAWH,GAAeG,GAC9BN,GAAUkC,KAAKnB,KAAKoB,UAAUF,IAxEjCG,CAAW,aADA,CAAChC,IAlCA,SAASpE,GACnB8F,EAAS9F,KAqFL,SAASqG,GAAgBC,EAAOC,GACtC,IAAIC,EACAC,EAEJ,IAAKA,EAAO,EAAGA,EAAOH,EAAMnb,OAAQsb,IAElC,GAAgC,KADhCD,EAAMF,EAAMG,GAAMnG,QAAQ,SAAU,IAAIA,QAAQ,SAAU,KAClDoG,QAAQH,EAAO,KACxB,OAAOC,EAAIG,OAAOJ,EAAKpb,OAAS,GAIjC,OAAO,KAaR,SAASuZ,KACR,IACEV,GAAUkC,KAAKjC,IACf,MAAO2C,GACPC,cAAc3C,IACdA,GAAoB,KACpBF,GAAU8C,SC9LN,SAASC,GAAWhX,GACzB,IAAIiX,EAAKjX,EAAKkX,UACVC,EAAKnX,EAAKoX,WAAa,EAS3B,OANIH,EAAK,KACPA,EAAK,IAAMA,GAETE,EAAK,KACPA,EAAK,IAAMA,GAENF,EAAK,IAAME,EAAK,IAPZnX,EAAKqX,ujDCClB,IAAMC,GAAczkB,IAAOsE,IAAVogB,KAMK,SAAAvkB,GAAK,OAAIA,EAAMC,QAAQyD,SAClC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,OAO5BwE,GAAM/E,IAAOsE,IAAVqgB,KAce,SAAAxkB,GAAK,OAAIA,EAAMC,QAAQyD,SAClC,SAAA1D,GAAK,OAAIA,EAAMC,QAAQG,MAGL,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,OAUhDqkB,GAAkB5kB,IAAOsE,IAAVugB,MAMfC,GAAU9kB,IAAOuB,OAAVwjB,KACS,SAAA5kB,GAAK,OAAIA,EAAMC,QAAQC,YAKlC,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAIV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQE,YAKzC0kB,GAAUhlB,IAAOuB,OAAV0jB,KACS,SAAA9kB,GAAK,OAAIA,EAAMC,QAAQC,YAKlC,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAIV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQE,YAKhC,SAAS4kB,GAAY/kB,GAAO,IAAA4I,EACTzD,mBAAS,IADA0D,EAAAxD,OAAAC,EAAA,EAAAD,CAAAuD,EAAA,GAClCoc,EADkCnc,EAAA,GACxBoc,EADwBpc,EAAA,GAyCzC,OACEnI,EAAAC,EAAAC,cAAC0jB,GAAD,CAAarkB,QAASD,EAAMO,OAC1BG,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAACskB,GAAD,CAAKjlB,QAASD,EAAMO,OAClBG,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,UAAKokB,EAASG,MAEhBzkB,EAAAC,EAAAC,cAACskB,GAAD,CAAKjlB,QAASD,EAAMO,OAClBG,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,UAAKokB,EAASI,QAEhB1kB,EAAAC,EAAAC,cAACskB,GAAD,CAAKjlB,QAASD,EAAMO,OAClBG,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,UAAKokB,EAASK,WAEhB3kB,EAAAC,EAAAC,cAACskB,GAAD,CAAKjlB,QAASD,EAAMO,OAClBG,EAAAC,EAAAC,cAAA,sFACAF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,MAAIme,MAAO,CAAEuG,YAAa,SAAWN,EAASO,WADhD,IAEE7kB,EAAAC,EAAAC,cAAA,MAAIme,MAAO,CAAEyG,WAAY,SAAWR,EAASS,WAGjD/kB,EAAAC,EAAAC,cAAC6jB,GAAD,CAAiBxkB,QAASD,EAAMO,OAC9BG,EAAAC,EAAAC,cAAC+jB,GAAD,CAAS1kB,QAASD,EAAMO,MAAOmB,QAxDZ,WACvBohB,GAAqB,SAAA7F,GACnB,GAAIA,EACF,GAAoB,QAAhBA,EAAOja,KACLia,EAAOoF,SAAWpF,EAAOoF,aAGxB,GAAoB,QAAhBpF,EAAOja,KAAgB,CAChC,IAAMmV,EAAO,GACTiK,EAAiBnF,EAAOmF,eAExBsD,EADYtD,EAAeuD,UACFjI,MAAM,KACnCvF,EAAKgN,IAAM7B,GAAgBoC,EAAc,gBAAgB9B,OAAO,GAChEzL,EAAKiN,MAAQ9B,GAAgBoC,EAAc,KAC3C,IAAIE,EAAKtC,GAAgBoC,EAAc,MACvCE,EAAKA,GAAM,GACX,IAAIC,EAAavC,GAAgBoC,EAAc,KAC/CG,EAAaA,GAAc,GAC3B1N,EAAKkN,SAAWO,EAAG9iB,OAAO,KAAKA,OAAO+iB,GAEtC1N,EAAKoN,UAAYvB,GACf,IAAI8B,KAAKrb,SAAS2X,EAAe2D,iBAEnC5N,EAAKsN,QAAUzB,GACb,IAAI8B,KAAKrb,SAAS2X,EAAe4D,gBAGnCf,EAAY9M,QA6Bd,2GAGAzX,EAAAC,EAAAC,cAACikB,GAAD,CAAS5kB,QAASD,EAAMO,MAAOmB,QAhEjB,WAClB1B,EAAMimB,cAAa,GACnBjmB,EAAMilB,YAAYD,KA8Dd,myBCnJR,IAAMkB,GAAWrmB,IAAOsE,IAAVgiB,KAMH,SAAAnmB,GAAK,OAAIA,EAAMC,QAAQG,MAGZ,SAAAJ,GAAK,OAAIA,EAAMC,QAAQC,YASd,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAYzC,SAAAJ,GAAK,OAAIA,EAAMC,QAAQG,OAarB,SAASgmB,GAAT9lB,GAAwD,IAAjC0kB,EAAiC1kB,EAAjC0kB,SAAUqB,EAAuB/lB,EAAvB+lB,aAAc9lB,EAASD,EAATC,MAC5D,OACEG,EAAAC,EAAAC,cAACslB,GAAD,CAAUjmB,QAASM,GACjBG,EAAAC,EAAAC,cAAA,UAAKokB,EAASK,UACd3kB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,SAAIokB,EAASG,MACR,IACPzkB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,SAAIokB,EAASI,QAEf1kB,EAAAC,EAAAC,cAAA,UACEkU,KAAK,GACLpT,QAAS,SAAA4I,GACP+b,IACA/b,EAAMgc,mBAJV,6hBCtDN,IAAMC,GAAa1mB,IAAOuB,OAAVolB,KAUL,SAAAxmB,GAAK,OAAKA,EAAMqG,MAAQ,OAAS,QAKtB,SAAArG,GAAK,OAAIA,EAAMC,QAAQC,YAClC,SAAAF,GAAK,OAAIA,EAAMC,QAAQG,MAEV,SAAAJ,GAAK,OAAIA,EAAMC,QAAQqB,MAGjC,SAAAtB,GAAK,OAAIA,EAAMC,QAAQG,OAQtB,SAASgV,GAAOpV,GAC7B,OACEU,EAAAC,EAAAC,cAAC2lB,GAAD,CACE7kB,QAAS1B,EAAMymB,YACfxmB,QAASD,EAAMO,MACfwe,MAAO2H,GAAe1mB,EAAM2mB,aAC5BA,YAAa3mB,EAAM2mB,YACnBhlB,YAAA,EACAC,WAAU5B,EAAM4mB,QAChBvgB,MAAOrG,EAAMqG,OAEZrG,EAAMqG,MACL3F,EAAAC,EAAAC,cAAA,SAAIZ,EAAMqG,OAEVwgB,GAAW7mB,EAAM2mB,YAAa3mB,EAAMglB,UAEtCtkB,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEsD,UAAU,UACV5B,UAAW,IACXF,GAAInC,EAAM2mB,YACVtN,OAAO,QACPjX,QAAQ,EACRvB,KAAMb,EAAM8mB,YAAc,QAAU,QAEnC9mB,EAAM2mB,cAMf,IAAME,GAAa,SAACF,EAAa3B,GAC/B,OAAQ2B,GACN,IAAK,uFACH,OAAI3B,EAEAtkB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,uIAKVvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,0KAIhB,IAAK,4EACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,oIAGd,IAAK,4EACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,gPAGd,IAAK,oGACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,iHAGd,IAAK,sHACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,sGAGd,IAAK,4HACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,8IAGd,IAAK,6GACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,+yBAGd,IAAK,+DACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,yCAGd,IAAK,mDACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,uBAGd,IAAK,2FACH,OACEvB,EAAAC,EAAAC,cAAA,OACEiB,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPC,QAAQ,aAERtB,EAAAC,EAAAC,cAAA,QAAMqB,EAAE,+MAGd,QACE,OAAO,OAIPykB,GAAiB,SAAAC,GACrB,OAAQA,GACN,IAAK,uFACH,MAAO,CACLjb,IAAK,MACLqb,MAAO,OAEX,IAAK,4EACH,MAAO,CACLrb,IAAK,OACLqb,MAAO,OAEX,IAAK,kFACH,MAAO,CACLrb,IAAK,MACLqb,MAAO,QAEX,IAAK,4EACH,MAAO,CACLrb,IAAK,OACLsb,KAAM,QAEV,IAAK,oGACH,MAAO,CACLtb,IAAK,QACLsb,KAAM,QAEV,IAAK,sHACH,MAAO,CACLtb,IAAK,QACLsb,KAAM,QAEV,IAAK,4HACH,MAAO,CACLtb,IAAK,QACLsb,KAAM,QAEV,IAAK,2FACH,MAAO,CACLC,OAAQ,OACRF,MAAO,QAEX,IAAK,+DACH,MAAO,CACLE,OAAQ,OACRF,MAAO,QAEX,IAAK,mDACH,MAAO,CACLE,OAAQ,OACRF,MAAO,QAEX,IAAK,6GACH,MAAO,CACLE,OAAQ,QACRF,MAAO,QAEX,QACE,OAAO,kCCjPEG,GAVQ,SAACC,GAEtB,OADAA,EAAMA,EAAI7J,WACN,iBAAiBE,KAAK2J,GACjBA,EAAI5J,QAAQ,iBAAkB,6CAE9B,4BC2BL6J,WAAc,GACdC,GAAY,EACZC,GAAY,EAElBC,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFD,KAAMC,KACJ,aACA,kEAEFC,aAASF,MAET,IAAMG,GAAiB,CACrB,IAAIC,IAAM,CACRC,OAAQ,IAAIC,IAAO,CACjBjI,MAAO,OACP9d,MAAO,IAETgmB,KAAM,IAAIC,IAAK,CACbnI,MAAO,sBAETxf,KAAM,IAAI4nB,IAAK,CACbC,KAAM,0BACNH,KAAM,IAAIC,IAAK,CACbnI,MAAO,SAETgI,OAAQ,IAAIC,IAAO,CACjBjI,MAAO,OACP9d,MAAO,QAIb,IAAI6lB,IAAM,CACRO,MAAO,IAAIC,IAAO,CAChBC,OAAQ,EACRN,KAAM,IAAIC,IAAK,CACbnI,MAAO,aAGXlH,SAAU,SAAS2P,GAEjB,IAAIC,EAAcD,EAAQpM,cAAcK,iBAAiB,GACzD,OAAO,IAAIiM,IAAWD,OAKtBnI,GAAc,IAAIwH,IAAM,CAC5BC,OAAQ,IAAIC,IAAO,CACjBjI,MAAO,OACP9d,MAAO,MAIL0mB,GAAS,CAAC,QAAS,QAAS,QAAS,SA2+B3C,SAAStd,GAAUoP,EAAQlU,EAAMqiB,GAC/BnO,EAAOlU,GAAMsiB,WAAWD,GACX,UAATriB,EACFkU,EAAOnR,YAAYuf,WAAWD,GACZ,cAATriB,GACTkU,EAAOqO,gBAAgBD,WAAWD,GAItC,SAAS7d,GAAgB5E,EAAKsU,EAAQlU,EAAMoE,GAC1C8P,EAAOlU,GAAM2C,WAAWyB,EAAQ,KA+LlC,SAASoe,GAAM5D,GACb,OAAO,IAAI6D,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OAAI6U,OAAOC,SAAX,cAAiC,CACpC+E,OAAQ,OACRC,KAAM,OACNC,YAAa,UACbmM,QAAS,CACPC,eAAgB,oBAElBC,KAAMlH,KAAKoB,UAAU4B,KAEpBlI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAI8L,EAAQ9L,KACrBmM,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,OAiDzB,SAAS4d,GAAOhpB,GACd,OAAO,IAAIyoB,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OAAI6U,OAAOC,SAAX,8BAAA9U,OAAgD1C,GAAQ,CAC3Duc,OAAQ,MACRC,KAAM,OACNC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAI8L,EAAQ9L,KACrBmM,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,OAIzB,SAAS6d,GAAgB3mB,EAAW6S,EAAS+T,GAC3C,OAAO,IAAIT,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OACA6U,OAAOC,SADP,oBAAA9U,OACkCJ,EADlC,aAAAI,OACuDyS,EADvD,cAAAzS,OAC2EwmB,GAC9E,CACE3M,OAAQ,MACRC,KAAM,OACNC,YAAa,YAGdC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAI8L,EAAQ9L,KACrBmM,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,OAIzB,SAAS+d,GAAe7mB,EAAW8lB,EAAQgB,GACzC,OAAO,IAAIX,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OACA6U,OAAOC,SADP,qBAAA9U,OACmCJ,EADnC,YAAAI,OACuD0lB,EAAOiB,KAC/D,KAFC,SAAA3mB,OAGM0mB,EAHN,UAIH,CACE7M,OAAQ,MACRC,KAAM,OACNC,YAAa,YAGdC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAI8L,EAAQ9L,KACrBmM,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,OAIzB,SAASke,GAAeC,EAAUnB,EAAQrB,EAAKyC,GAC7C,OAAO,IAAIf,QAAQ,SAACC,EAASC,GAC3B,IAAIc,EAAG,GAAA/mB,OACL6U,OAAOmS,OADF,+DAAAhnB,OAEuD6mB,EAFvD,gDAAA7mB,OAE8GqkB,EAF9G,UAAArkB,OAE0H0lB,EAAOiB,KACtI,KAHK,UAAA3mB,OAIGqkB,EAJH,6BAAArkB,OAIkC8mB,GACzClN,MAAMmN,EAAK,CACTlN,OAAQ,MACRC,KAAM,OACNC,YAAa,YAEZC,KAAK,SAAAC,GACJpR,QAAQC,IAAImR,EAASiM,QAAQe,IAAI,iBAE/BhN,EAASiM,QAAQe,IAAI,gBAAgBC,WAAW,oBAEhDjN,EACGC,OACAF,KAAK,SAAAE,GAAI,OAAI8L,GAAQ,IAAImB,KAAUC,aAAalN,MAEnD8L,EAAQ,MAGXK,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,OAmBV2e,OA10Cf,SAAgBnqB,GAAO,IAAAoqB,EAAApe,KAAA/G,EACCC,IAAMC,WADPC,EAAAC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,GACde,EADcZ,EAAA,GACTilB,EADSjlB,EAAA,GAAAklB,EAEOplB,IAAMC,WAFbolB,EAAAllB,OAAAC,EAAA,EAAAD,CAAAilB,EAAA,GAEdhQ,EAFciQ,EAAA,GAENC,EAFMD,EAAA,GAAAE,EAGevlB,IAAMC,UAAS,GAH9BulB,EAAArlB,OAAAC,EAAA,EAAAD,CAAAolB,EAAA,GAGdE,EAHcD,EAAA,GAGFE,EAHEF,EAAA,GAAAG,EAIe3lB,IAAMC,UAAS,GAJ9B2lB,EAAAzlB,OAAAC,EAAA,EAAAD,CAAAwlB,EAAA,GAIdE,EAJcD,EAAA,GAIFE,EAJEF,EAAA,GAAAG,EAKW/lB,IAAMC,UAAS,GAL1B+lB,EAAA7lB,OAAAC,EAAA,EAAAD,CAAA4lB,EAAA,GAKdE,EALcD,EAAA,GAKJE,EALIF,EAAA,GAAAG,EAMGnmB,IAAMC,SAASiiB,IANlBkE,EAAAjmB,OAAAC,EAAA,EAAAD,CAAAgmB,EAAA,GAMdzO,EANc0O,EAAA,GAMRC,EANQD,EAAA,GAAAE,EAOatmB,IAAMC,UAAS,GAP5BsmB,EAAApmB,OAAAC,EAAA,EAAAD,CAAAmmB,EAAA,GAOdE,GAPcD,EAAA,GAOHxF,GAPGwF,EAAA,GAAAE,GAQezmB,IAAMC,UAAS,GAR9BymB,GAAAvmB,OAAAC,EAAA,EAAAD,CAAAsmB,GAAA,GAQdE,GARcD,GAAA,GAQFE,GAREF,GAAA,GAAAG,GASmB7mB,IAAMC,SAAS,IATlC6mB,GAAA3mB,OAAAC,EAAA,EAAAD,CAAA0mB,GAAA,GASd/R,GATcgS,GAAA,GASAC,GATAD,GAAA,GAAAE,GAUWhnB,IAAMC,SAAS,IAV1BgnB,GAAA9mB,OAAAC,EAAA,EAAAD,CAAA6mB,GAAA,GAUdlQ,GAVcmQ,GAAA,GAUJC,GAVID,GAAA,GAAAE,GAWGnnB,IAAMC,UAAS,GAXlBmnB,GAAAjnB,OAAAC,EAAA,EAAAD,CAAAgnB,GAAA,GAWd3f,GAXc4f,GAAA,GAWRhhB,GAXQghB,GAAA,GAAAC,GAYFrnB,IAAMC,SAAS,IAA3BqnB,GAZcnnB,OAAAC,EAAA,EAAAD,CAAAknB,GAAA,MAAAE,GAaWvnB,IAAMC,WAbjBunB,GAAArnB,OAAAC,EAAA,EAAAD,CAAAonB,GAAA,GAadzH,GAbc0H,GAAA,GAaJzH,GAbIyH,GAAA,GAAAC,GAcOznB,IAAMC,WAdbynB,GAAAvnB,OAAAC,EAAA,EAAAD,CAAAsnB,GAAA,GAcdhqB,GAdciqB,GAAA,GAcN5L,GAdM4L,GAAA,GAAAC,GAee3nB,IAAMC,SAAS,IAf9B2nB,GAAAznB,OAAAC,EAAA,EAAAD,CAAAwnB,GAAA,GAednX,GAfcoX,GAAA,GAeFC,GAfED,GAAA,GAAAE,GAgByB9nB,IAAMC,WAhB/B8nB,GAAA5nB,OAAAC,EAAA,EAAAD,CAAA2nB,GAAA,GAgBd1U,GAhBc2U,GAAA,GAgBGC,GAhBHD,GAAA,GAAArkB,GAkBGzD,mBACtB,IAAIgoB,IAAc,CAChBC,iBAAkBC,YAAe,GACjCppB,UAAW,wBACXqpB,cAAe,YAJZC,GAlBcloB,OAAAC,EAAA,EAAAD,CAAAuD,GAAA,MA0Bf4kB,GAAc,CAClBptB,KAAM,UACNsD,QAAS,UACTvD,UAAW,UACXD,WAAY,UACZiW,OAAQ,UACR7U,KAAM,WAGFmsB,GAAe,CACnBrtB,KAAM,UACNsD,QAAS,UACTvD,UAAW,UACXD,WAAY,UACZiW,OAAQ,UACR7U,KAAM,WAGFiX,GAAelO,sBACnB,SAAAqjB,GACE,IAAMC,EAAO3nB,EAAI4nB,UACXC,EAAUH,EACbI,QACAC,UAAU,QAAUprB,GAAOwkB,IAAKwG,EAAKK,iBACxCL,EAAKM,IAAIJ,EAAS,CAAEK,SAAU,IAAKC,QAAS,KAC5C7T,EAAO8T,OAAOC,YAAYC,QAC1BhU,EAAO8T,OAAOC,YAAYE,WACxB,IAAIC,IAAQ,CACV9V,SAAUmV,MAIhB,CAAC7nB,EAAKsU,EAAQ3X,KAMhB0Z,oBAAU,WACJrc,EAAMyuB,YACRzoB,EAAIyoB,cAEL,CAACzoB,EAAKhG,EAAMyuB,aAEfpS,oBAAU,WACR,GAAI/B,GAAUta,EAAM0uB,sBAClB,IAAK,IAAIhsB,KAAa1C,EAAM0uB,sBAAuB,CACjD,IAAIrlB,EAAarJ,EAAM0uB,sBAAsBhsB,GAC7CwI,GAAUoP,EAAQ5X,EAAW2G,KAGhC,CAACiR,EAAQta,EAAM0uB,wBAGlBrS,oBAAU,WACJrc,EAAM2uB,iBACR3oB,EAAIyoB,aACJjC,GAASxL,UAAUhhB,EAAM2uB,kBAE1B,CAAC3oB,EAAKwmB,GAAUxsB,EAAM2uB,iBAGzBtS,oBAAU,WACJrc,EAAM4uB,cACRxF,GAAOppB,EAAM4uB,cAAc9R,KAAK,SAAA+R,GAC1BA,EAAI3lB,OAAS2lB,EAAI3lB,MAAMd,OAAS,GAClCmQ,IAAa,IAAIC,KAAMsW,aAAaD,EAAI3lB,MAAM,GAAGwP,cAItD,CAACH,GAAcvY,EAAM4uB,eAGxBvS,oBAAU,WACJrc,EAAM+uB,WACRxW,GAAavY,EAAM+uB,YAEpB,CAACxW,GAAcvY,EAAM+uB,YAExB1S,oBAAU,WACJ1E,OAAM,gBACRA,OAAM,eAAmB3X,EAAMgvB,IAAKhV,KAErC,CAACha,EAAMgvB,IAAKhV,KAIf,IAAMiV,GAAa5kB,sBAAY,WACzB1H,GACFqD,EACG4nB,UACAK,KACC,IAAIzV,KACDsW,aAAansB,GAAO+qB,MACpBK,UAAU,YAAa,QAAUprB,GAAOwkB,KAC3C,CAAE+G,SAAU,MAGhBloB,EAAI4nB,UAAUK,IAAIzF,GAAQ,CAAE0F,SAAU,OAEvC,CAACloB,EAAKrD,KAEHusB,GAAiB7kB,sBAAY,WACjCrE,EAAI4nB,UAAUK,IAAIzF,GAAQ,CAAE0F,SAAU,MACtClN,MACC,CAAChb,IAEJwmB,GAASxL,UAAY,SAAAD,IA2kCvB,SAAyBA,GACvB,OAAO,IAAI8H,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OAAI6U,OAAOC,SAAX,iBAAoC,CACvC+E,OAAQ,MACRC,KAAM,OACNC,YAAa,UACbmM,QAAS,CACPC,eAAgB,oBAElBC,KAAMlH,KAAKoB,UAAUrC,KAEpBjE,KAAK,kBAAMgM,MACXK,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,QAtlCrB2jB,CAAgBpO,GAAUjE,KAAK,WAC7BkE,GAAUD,GACV+K,IAAc,GAEd,IAAMsD,EAAe,QAAUrO,EAASoG,IAElCuG,GAAO,IAAIlV,KACdsW,aAAa/N,EAAS2M,MACtBK,UAAU,YAAaqB,GAC1B9U,EAAO+U,QAAQhB,YAAYC,QAC3BhU,EAAO+U,QAAQhB,YAAYE,WACzB,IAAIC,IAAQ,CACV9V,SAAUgV,KAId,IAAMC,EAAO,IAAI2B,IAAK,CACpBC,WAAYH,EACZI,OAAQzB,aACN/nB,EAAI4nB,UAAU6B,YACdzpB,EAAI4nB,UAAUI,gBACdoB,GAEFM,KAAM1pB,EAAI4nB,UAAU+B,YAGtB3pB,EAAI4pB,QAAQjC,GACZA,EAAKM,IAAIP,EAAM,CAAEQ,SAAU,MAE3BtD,GAAc,GACdI,GAAc,GACdc,IAAc,GACdV,GAAY,GAg1BlB,SAAsB9Q,EAAQvX,EAAYC,EAAMmkB,GAC9C,IAAIzf,EAAQ4S,EAAOpR,MACf2mB,EAASnoB,EAAM2mB,YAAYyB,YAC/BD,EAAOxnB,OAAP,mBAAAvF,OAAmCC,EAAnC,KAAAD,OAAiDE,GACjD6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO3H,KACfkd,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOnH,KACf0c,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO/G,KACfsc,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,EAA1C,gBAAAF,OAA6DC,EAA7D,KAAAD,OAA2EE,GAC3E6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOpI,MACf2d,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,WAAAvF,OAA2BC,EAA3B,KAAAD,OAAyCE,GACzC6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO5G,MACfmc,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,kBAAAvF,OAAkCC,EAAlC,KAAAD,OAAgDE,GAChD6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO1F,UACfib,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,iBAAAvF,OAAiCC,EAAjC,KAAAD,OAA+CE,GAC/C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO0V,QACfH,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,UAAAvF,OAA0BC,EAA1B,KAAAD,OAAwCE,GACxC6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOhL,MACfugB,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,kBAAAvF,OAAkCC,EAAlC,KAAAD,OAAgDE,GAChD6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOhI,KACfud,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,gBAAAvF,OAAgCC,EAAhC,KAAAD,OAA8CE,GAC9C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO2V,IACfJ,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,WAAAvF,OAA2BC,EAA3B,KAAAD,OAAyCE,GACzC6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOzG,KACfgc,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOvG,IACf8b,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,WAAAvF,OAA2BC,EAA3B,KAAAD,OAAyCE,GACzC6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOpG,KACf2b,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOtG,KACf6b,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOnG,KACf0b,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOlG,OACfyb,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,cAAAvF,OAA8BC,EAA9B,KAAAD,OAA4CE,GAC5C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOhG,KACfub,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,YAAAvF,OAA4BC,EAA5B,KAAAD,OAA0CE,GAC1C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO/F,aACfsb,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,oBAAAvF,OAAoCC,EAApC,KAAAD,OAAkDE,GAClD6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO7F,MACfob,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,aAAAvF,OAA6BC,EAA7B,KAAAD,OAA2CE,GAC3C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO5F,OACfmb,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,cAAAvF,OAA8BC,EAA9B,KAAAD,OAA4CE,GAC5C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAO3F,QACfkb,EAASnoB,EAAM2mB,YAAYyB,aACpBznB,OAAP,eAAAvF,OAA+BC,EAA/B,KAAAD,OAA6CE,GAC7C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/BnoB,EAAQ4S,EAAOzI,WACfge,EAASnoB,EAAM2mB,YAAYyB,aAElBznB,OADU,OAAftF,EACF,kBAEA,YAAAD,OAA4BC,EAA5B,KAAAD,OAA0CE,GAE5C6sB,EAAON,WAAP,QAAAzsB,OAA4BqkB,GAC5Bzf,EAAM2mB,YAAY0B,aAAaF,GAE/B,IAAMK,EAAmB5V,EAAOnR,YAAYklB,YAC5C6B,EAAiBC,UAAU,SAAC3H,EAAQgB,EAAY+F,GAC9ChG,GAAe,QAASf,EAAQgB,GAAY1M,KAAK,SAAAE,GAC/CkT,EAAiBE,YAAc5G,EAC/B,IAAMhN,EAAM,IAAIhE,IAChB0X,EAAiBG,cAAcplB,QAAQ,SAAAod,GACrC6H,EAAiBI,cAAcjI,KAE7BrL,EAAK9T,OACPgnB,EAAiBK,YACfvT,EAAK9T,MAAMlD,IAAI,SAAAwF,GACb,OAAO,IAAIgjB,IAAQ,CACjB5b,MAAOpH,EAAEoH,MACT8F,SAAU8D,EAAIsS,aAAatjB,EAAEkN,mBAOzCwX,EAAiB5B,QAEjB,IAAMkC,EAAiBlW,EAAOqO,gBAAgB0F,YAC9CmC,EAAeL,UAAU,SAAC3H,EAAQgB,EAAY+F,GAC5ChG,GAAe,YAAaf,EAAQgB,GAAY1M,KAAK,SAAAE,GACnDwT,EAAeJ,YAAc5G,EAC7B,IAAMhN,EAAM,IAAIhE,IAChBgY,EAAeH,cAAcplB,QAAQ,SAAAod,GACnCmI,EAAeF,cAAcjI,KAE3BrL,EAAKnL,WACP2e,EAAeD,YACbvT,EAAKnL,UAAU7L,IAAI,SAAAwF,GACjB,OAAO,IAAIgjB,IAAQ,CACjB5b,MAAOpH,EAAEoH,MACT8F,SAAU8D,EAAIsS,aAAatjB,EAAEkN,mBAOzC8X,EAAelC,QAxgCXmC,CAAanW,EAAQyG,EAAShe,WAAYge,EAAS/d,KAAM+d,EAASoG,KAClEjc,GAAUoP,EAAQ,MAAM,GACxBiT,GAAcmD,cAActB,MAIhC/S,oBAAU,WACRuM,GAAM,IACH9L,KAAK,SAAAG,GACkB,IAAlBA,EAAOA,OACTgI,GAAYhI,GAEZgI,GAAY,QAGfkE,MAAM,SAAA3d,GAAC,OAAIG,QAAQC,IAAIJ,MACzB,IA8CH6Q,oBAAU,WACR,GAAIO,IAASyK,GAAW,CACtB/M,EAAOqW,KAAKtC,YAAYC,QACxB,IAAMsC,EAAa,IAAIC,IAAO,CAC5BC,OAAO,EACPC,OAAQ,IAAI9G,IACZsF,WAAY,QAAU5sB,GAAOwkB,IAC7B6J,OAAQ,SAASxI,EAAQgB,EAAY+F,GACnC,GAAI/F,EAAa,IAAK,CACpB,IAAMyH,EAAMlD,aAAUvF,EAAQ+G,EAAY,QAAU5sB,GAAOwkB,KAC3DuC,GAAc,mBAAA5mB,OACOH,GAAOI,WADd,KAAAD,OAC4BH,GAAOK,MAC/CiuB,EACAtuB,GAAOwkB,IACP,IAECrK,KAAK,SAAAd,GAAQ,OAAI4U,EAAWL,YAAYvU,KACxCkV,QAAQ,kBACPxH,GAAc,iBAAA5mB,OACKH,GAAOI,WADZ,KAAAD,OAC0BH,GAAOK,MAC7CiuB,EACAtuB,GAAOwkB,IACP,IAECrK,KAAK,SAAAd,GAAQ,OAAI4U,EAAWL,YAAYvU,KACxCkV,QAAQ,kBACPxH,GAAc,kBAAA5mB,OACMH,GAAOI,WADb,KAAAD,OAC2BH,GAAOK,MAC9CiuB,EACAtuB,GAAOwkB,IACP,IACArK,KAAK,SAAAd,GAAQ,OAAI4U,EAAWL,YAAYvU,WAKtDmV,SAAUC,MAGZ9W,EAAO+W,KAAO,IAAIC,IAAY,CAC5BC,OAAQX,EACR7R,MAAO,OAET/Y,EAAIwrB,SAASlX,EAAO+W,MAEpB,IAAMA,EAAO,IAAII,IAAK,CAAEF,OAAQjX,EAAO+W,KAAKhD,cACtCsC,EAAO,IAAIe,IAAK,CACpBH,OAAQjX,EAAOqW,KAAKtC,YACpBxtB,KAAM,YAcR,OAZA8vB,EAAKgB,GAAG,UAAW,SAAAC,GAEjBjmB,QAAQC,IAAI,UAAWgmB,EAAUvJ,SACjC,IAAM1N,EAASiX,EAAUvJ,QAAQpM,cAAcK,iBAAiB,GAChE3B,EAAOA,EAAOvS,OAAS,GAAKuS,EAAO,GACnCiX,EAAUvJ,QAAQwJ,IAAI,QAAQ,GAC9BzF,GAAY,CAACwF,EAAUvJ,UACvBkD,EAAQjE,MAEVthB,EAAI8rB,eAAenB,GACnB3qB,EAAI8rB,eAAeT,GAEZ,WACLrrB,EAAI+rB,YAAYzX,EAAO+W,MACvBrrB,EAAIgsB,kBAAkBrB,GACtB3qB,EAAIgsB,kBAAkBX,IAEnB,GAAIzU,IAAS0K,GAAW,CAC7B,IAAM+J,EAAO,IAAII,IAAK,CAAEF,OAAQjX,EAAO+W,KAAKhD,cACtC4D,EAAS,IAAIC,IAAO,CAAEX,OAAQjX,EAAOqW,KAAKtC,cAQhD,OAPA4D,EAAON,GAAG,YAAa,SAAArnB,GACrB8hB,GAAY,CAACpQ,GAAS,OAExBhW,EAAIwrB,SAASlX,EAAO+W,MACpBrrB,EAAI8rB,eAAeG,GACnBjsB,EAAI8rB,eAAeT,GAEZ,WACLrrB,EAAI+rB,YAAYzX,EAAO+W,MACvBrrB,EAAIgsB,kBAAkBC,GACtBjsB,EAAIgsB,kBAAkBX,MAGzB,CAACrrB,EAAK4W,EAAMtC,EAAQ3X,GAAQqZ,KAE/B,IAAM8B,GAAoBzT,sBACxB,SAAAsQ,GACEA,EAAOoB,KAAKpB,EAAO,IACnB,IAAM0N,EAAU,IAAImG,IAAQ,CAC1B9V,SAAU,IAAIyZ,IAAQ,CAACxX,IACvBvU,KAAM,OAERiiB,EAAQ+J,MAAM,GACd/J,EAAQwJ,IAAI,QAAQ,GACpBlmB,QAAQC,IAAI,oBAAqByc,GACjC/N,EAAOqW,KAAKtC,YAAYC,QACxBhU,EAAOqW,KAAKtC,YAAYE,WAAWlG,GACnCkD,EAAQjE,IACR8E,GAAY,CAAC/D,IACbriB,EAAI4nB,UAAUK,IAAI5F,EAAQpM,gBAE5B,CAACjW,EAAKsU,IAmBF+X,GAAiBhoB,sBAAY,SAAAG,GAEjCogB,GAAc,GAEdI,GAAc,GACdI,EAAY5gB,IACX,IAEG8nB,GAAejoB,sBAAY,WAC/B,IAAMsjB,EAAO3nB,EAAI4nB,UACjBD,EAAK4E,QAAQ,CAAE7C,KAAM/B,EAAKgC,UAAY,EAAGzB,SAAU,OAClD,CAACloB,IAEEwsB,GAAgBnoB,sBAAY,WAChC,IAAMsjB,EAAO3nB,EAAI4nB,UACjBD,EAAK4E,QAAQ,CAAE7C,KAAM/B,EAAKgC,UAAY,EAAGzB,SAAU,OAClD,CAACloB,IAEEysB,GAAgBpoB,sBAAY,SAAAG,GAC5BA,GACFkoB,SAASC,uBAAuB,uBAAuB,GAAG5T,MAAMa,MAC9D,QACF8S,SAASC,uBACP,iCACA,GAAG5T,MAAM3c,OAAS,kBACpBswB,SAASC,uBAAuB,iCAAiC,GAAG5T,MAClE,cACE,SAEJ2T,SAASC,uBAAuB,uBAAuB,GAAG5T,MAAMa,MAC9D,QACF8S,SAASC,uBACP,iCACA,GAAG5T,MAAM3c,OAAS,kBACpBswB,SAASC,uBAAuB,iCAAiC,GAAG5T,MAClE,cACE,QAENzT,GAAQd,IACP,IAEGooB,GAAcvoB,sBAClB,SAAAC,GACE,IAw1BOC,EAAGsoB,EAx1BJlY,EAASoT,aACbzjB,EAAMwoB,WACNxoB,EAAMtE,IAAI4nB,UAAUI,gBACpB,QAAUrrB,GAAOwkB,MAq1BZ5c,EAn1BHoQ,EAAO,GAm1BDkY,EAn1BKlY,EAAO,GAo1BnB,IAAIkO,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OACA6U,OAAOC,SADP,eAAA9U,OAC6ByH,EAD7B,OAAAzH,OACoC+vB,EADpC,YAAA/vB,OACgD2F,GAAOC,eAC1D,CACEiU,OAAQ,MACRC,KAAM,OACNC,YAAa,YAGdC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAI8L,EAAQ9L,KACrBmM,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,QA/1BOsR,KAAK,SAAAG,GAC7B8P,GAAc,IACdd,GAAgBhP,GAChBoV,IAAe,MAGnB,CAACA,GAAgB1vB,KAGbgc,GAAatU,sBAAY,SAAClI,EAAI4wB,IAq6BtC,SAAc5wB,EAAI4wB,GAChB,OAAO,IAAIlK,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OACA6U,OAAOC,SADP,iBAAA9U,OAC+BX,EAD/B,YAAAW,OAC4CiwB,GAC/C,CACEpW,OAAQ,OACRC,KAAM,OACNC,YAAa,YAGdC,KAAK,kBAAMgM,MACXK,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,QA/6BrB2X,CAAKhhB,EAAI4wB,GAAQjW,KAAK,WACpBxC,EAAOhI,IAAI+b,YAAY0B,aAAa,CAACiD,KAAQlN,KAAKmN,QAClD1H,EAAQnE,OAET,CAAC9M,IA8HJ,OA5HA+B,oBAAU,WACR,IAAI6W,EAAQltB,EACZ,IAAKktB,EAAO,EACVA,EAAQ,IAAIC,IAAI,CACdzoB,OAAQ,MACR0oB,SAAU,CACR,IAAIC,IAAY,CAAE3oB,OAAQ,MAC1B6iB,GACA,IAAI+F,KAENhZ,OAAQ,MAGJsT,UAAUK,IAAIzF,IAEpB,IAAMlO,EAwLZ,SAAsBtU,GACpB,IAAMutB,EAAQ5b,OAAOmS,OACfxP,EAAS,GAEfA,EAAOkZ,OAAS,IAAIC,IAAU,CAC5BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAK,kCACLgG,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOkZ,QAEpBlZ,EAAOyZ,OAAS,IAAIN,IAAU,CAC5BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,iCAAkCsrB,OAAO,GAC3DC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOyZ,QAEpBzZ,EAAO0Z,KAAO,IAAIP,IAAU,CAC1BQ,QAASC,IACT3C,OAAQ,IAAI4C,IAAS,CACnBhuB,IAAK,mEACLiuB,WAAY,6BAEdN,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO0Z,MAEpB1Z,EAAOrR,KAAO,IAAIwqB,IAAU,CAC1BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,sBAAuBsrB,OAAO,GAChDC,WAAY,YACZC,WAAY,MAGhB7tB,EAAIwrB,SAASlX,EAAOrR,MAEpBqR,EAAO2V,GAAK,IAAIwD,IAAU,CACxBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,UAAWsrB,OAAO,GACpCC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO2V,IAEpB3V,EAAO3H,IAAM,IAAI8gB,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,WAAYsrB,OAAO,GACrCC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO3H,KAEpB2H,EAAOnH,IAAM,IAAIsgB,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,WAAYsrB,OAAO,GACrCC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOnH,KAEpBmH,EAAO/G,IAAM,IAAIkgB,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,WAAYsrB,OAAO,GACrCC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO/G,KAEpB+G,EAAOpI,KAAO,IAAIuhB,IAAU,CAC1BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,iBAAkBsrB,OAAO,GAC3CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOpI,MAEpBoI,EAAO5G,KAAO,IAAI+f,IAAU,CAC1BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,wBAAyBsrB,OAAO,GAClDC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO5G,MAEpB4G,EAAOzG,IAAM,IAAI4f,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOzG,KAEpByG,EAAOvG,GAAK,IAAI0f,IAAU,CACxBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,iBAAkBsrB,OAAO,GAC3CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOvG,IAEpBuG,EAAOpG,IAAM,IAAIuf,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOpG,KAEpBoG,EAAOtG,IAAM,IAAIyf,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOtG,KAEpBsG,EAAOnG,IAAM,IAAIsf,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOnG,KAEpBmG,EAAOlG,MAAQ,IAAIqf,IAAU,CAC3BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,oBAAqBsrB,OAAO,GAC9CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOlG,OAEpBkG,EAAOhG,IAAM,IAAImf,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOhG,KAEpBgG,EAAO/F,YAAc,IAAIkf,IAAU,CACjClC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,0BAA2BsrB,OAAO,GACpDC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO/F,aAEpB+F,EAAO9F,IAAM,IAAIif,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO9F,KAEpB8F,EAAO7F,KAAO,IAAIgf,IAAU,CAC1BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,mBAAoBsrB,OAAO,GAC7CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO7F,MAEpB6F,EAAO5F,MAAQ,IAAI+e,IAAU,CAC3BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,oBAAqBsrB,OAAO,GAC9CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO5F,OAEpB4F,EAAO3F,OAAS,IAAI8e,IAAU,CAC5BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,qBAAsBsrB,OAAO,GAC/CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO3F,QAEpB2F,EAAO1F,SAAW,IAAI6e,IAAU,CAC9BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,uBAAwBsrB,OAAO,GACjDC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO1F,UAEpB0F,EAAOpR,MAAQ,IAAIuqB,IAAU,CAC3BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,gBAAiBsrB,OAAO,GAC1CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOpR,OAEpBoR,EAAO0V,OAAS,IAAIyD,IAAU,CAC5BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,gBAAiBsrB,OAAO,GAC1CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAO0V,QAEpB1V,EAAOhL,KAAO,IAAImkB,IAAU,CAC1BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,wBAAyBsrB,OAAO,GAClDC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOhL,MAEpBgL,EAAOhI,IAAM,IAAImhB,IAAU,CACzBlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,sBAAuBsrB,OAAO,GAChDC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOhI,KAEpBgI,EAAOzI,UAAY,IAAI4hB,IAAU,CAC/BlC,OAAQ,IAAImC,IAAQ,CAClB7J,IAAG,GAAA/mB,OAAKywB,EAAL,aACH1D,OAAQ,CAAExnB,OAAQ,kBAAmBsrB,OAAO,GAC5CC,WAAY,YACZC,WAAY,IAEdC,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOzI,WAEpB,IAAM2e,EAAiB,IAAIK,IAAO,CAChCC,OAAO,EACPC,OAAQ,IAAI9G,IACZsF,WAAY,YACZ4B,SAAU,SAAC3I,EAAQgB,GAIjB,OAHIgH,EAAeJ,cAAgB5G,GACjCgH,EAAe6D,oBAAoB/F,QAE9B,CAAC9F,MAIN0H,EAAmB,IAAIW,IAAO,CAClCC,OAAO,EACPC,OAAQ,IAAI9G,IACZsF,WAAY,YACZ4B,SAAU,SAAC3I,EAAQgB,GAIjB,OAHI0G,EAAiBE,cAAgB5G,GACnC0G,EAAiBmE,oBAAoB/F,QAEhC,CAAC9F,MAIN8L,EAAa,IAAI3M,IAAM,CAC3BvnB,KAAM,IAAI4nB,IAAK,CACbC,KAAM,0BACNsM,UAAU,EACVzM,KAAM,IAAIC,IAAK,CACbnI,MAAO,SAETgI,OAAQ,IAAIC,IAAO,CACjBjI,MAAO,OACP9d,MAAO,QA2Cb,OAtCAwY,EAAOnR,YAAc,IAAImoB,IAAY,CACnCC,OAAQrB,EACRnR,MAAO,SAAAsJ,GAEL,OADAiM,EAAWE,UAAUC,QAAQpM,EAAQ0B,IAAI,UAClCuK,GAETR,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOnR,aAEpBmR,EAAOqO,gBAAkB,IAAI2I,IAAY,CACvCC,OAAQf,EACRzR,MAAO,SAAAsJ,GAEL,OADAiM,EAAWE,UAAUC,QAAQpM,EAAQ0B,IAAI,UAClCuK,GAETR,SAAS,IAEX9tB,EAAIwrB,SAASlX,EAAOqO,iBAEpBrO,EAAO+U,QAAU,IAAIiC,IAAY,CAC/BC,OAAQ,IAAIV,IACZ9R,MAAOoB,KAETna,EAAIwrB,SAASlX,EAAO+U,SAEpB/U,EAAOqW,KAAO,IAAIW,IAAY,CAC5BC,OAAQ,IAAIV,IACZ9R,MAAO2I,KAET1hB,EAAIwrB,SAASlX,EAAOqW,MAEpBrW,EAAO8T,OAAS,IAAIkD,IAAY,CAC9BC,OAAQ,IAAIV,IACZ9R,MAAO2I,KAET1hB,EAAIwrB,SAASlX,EAAO8T,QAEb9T,EA1jBYoa,CAAaxB,GAE5B7I,EAAO6I,GACP1I,EAAUlQ,KAEX,CAACtU,EAAKunB,GAAejT,EAAQkS,KAEhCnQ,oBAAU,WACR,GAAIrW,GAAO4sB,IAAehW,IAASwK,GAGjC,OAFA9M,EAAOqW,KAAKtC,YAAYC,QACxBtoB,EAAI2rB,GAAG,cAAeiB,IACf,WACL5sB,EAAI2uB,GAAG,cAAe/B,MAGzB,CAAC5sB,EAAKsU,EAAQsC,EAAMgW,KA+FrBlyB,EAAAC,EAAAC,cAAA,OAAKme,MAAO,CAAEhd,OAAQ,SACnB/B,EAAM40B,YAAcl0B,EAAAC,EAAAC,cAACge,GAAD,CAAQlS,KAAMA,KACnChM,EAAAC,EAAAC,cAAA,OAAKuB,GAAG,MAAM4c,MAAO,CAAEhd,OAAQ,UAC/BrB,EAAAC,EAAAC,cAACi0B,GAAD,CACEt0B,MAAOmM,GAAO+gB,GAAeD,GAC7B3hB,KAAM8e,EACN7Q,QAlGN,WACE8Q,GAAc,IAiGW7e,KAAKC,MAC1Bd,UAAWA,GAAUa,KAAKC,KAAMsO,GAChC1P,gBAAiBA,GAAgBmB,KAAKC,KAAMhG,EAAKsU,GACjDhP,QAASmnB,GACThmB,sBA/UwB,SAAC/J,EAAWoyB,GACxCzL,GAAgB3mB,EAAW,EAAG,IAAIoa,KAAK,SAAAG,GACrCgP,GAAgBhP,GAChBiQ,GAAmB4H,GACnBzC,IAAe,KAGjBtF,GAAc,CACZrZ,KAAM,SAAA6B,GACJ8T,GAAgB3mB,EAAW6S,EAAS,IAAIuH,KAAK,SAAAG,GAC3CgP,GAAgBhP,SAsUlBvQ,KAAMA,GACN/J,OAAQA,KAEVjC,EAAAC,EAAAC,cAAC2f,GAAD,CACE1U,KAAMkf,EACNxqB,MAAOmM,GAAO+gB,GAAeD,KAnGjB,CACd,CACE7G,YAAa,uFACboO,aAAc,kBAAM9O,IAAcyF,KAClCkJ,YAAY,GAEd,CACEjO,YAAa,4EACboO,aAAcxJ,EAAQxf,KACpBqe,EACAxN,IAASwK,GAAcC,GAAYD,KAGvC,CACET,YAAa,kFACboO,aAAc,kBAAMjJ,IAAeD,MAErC,CACElF,YAAa,4EACboO,aAAc,kBAAM1C,IAAgBlH,IACpCyJ,YAAY,GAEd,CACEjO,YAAa,oGACboO,aAAc,SAAAzqB,GAAK,OAlJME,GAkJuBmgB,EAhJpDS,GAAY,GAEZJ,GAAc,QACdJ,EAAcpgB,GALO,IAAQA,IAoJ3B,CACEmc,YAAa,sHACboO,aAAc,SAAAzqB,GAAK,OA9IME,GA8IuBugB,EA5IpDH,GAAc,GAEdQ,GAAY,QACZJ,EAAcxgB,GALO,IAAQA,IAgJ3B,CACEmc,YAAa,4HACboO,aAAc,aACdH,YAAY,GAEd,CACEjO,YAAa,2FACboO,aAAc9F,IAEhB,CACEtI,YAAa,+DACboO,aAAczC,IAEhB,CACE3L,YAAa,mDACboO,aAAcvC,IAEhB,CACE7L,YAAa,6GACboO,aAAc7F,KAIHlpB,IAAI,SAAA5E,GACjB,OACIA,EAAOwzB,aAAc50B,EAAM40B,YACF,8EAAvBxzB,EAAOulB,aAA4D,8EAAvBvlB,EAAOulB,YAqBhD,KAlBLjmB,EAAAC,EAAAC,cAACo0B,GAAD,CACE7uB,IAAK/E,EAAOulB,YACZC,QAASxlB,EAAOulB,YAChBpmB,MAAOmM,GAAO+gB,GAAeD,GAC7BxI,SAAUA,GACV2B,YAAavlB,EAAOulB,YACpBG,YAAapa,GACb+Z,YAAarlB,EAAO2zB,aACpB1uB,MACyB,oFAAvBjF,EAAOulB,YACH,KACAhkB,GACAA,GAAOke,OACPzf,EAAOulB,gBA8BnBjmB,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,aACZtB,GAASukB,GAAevkB,GAAOwkB,KAAO,UAExC0E,IACCnrB,EAAAC,EAAAC,cAACggB,GAAD,CACErgB,MAAOmM,GAAO+gB,GAAeD,GAC7BxM,UAAWwL,GAASxL,UACpB9V,UAAWA,GAAUa,KAAKC,KAAMsO,GAChC3a,QAASK,EAAML,UAGlB+rB,IAAa1G,IACZtkB,EAAAC,EAAAC,cAACwlB,GAAD,CACE7lB,MAAOmM,GAAO+gB,GAAeD,GAC7BxI,SAAUA,GACVqB,aAxXa,WAggCd,IAAIwC,QAAQ,SAACC,EAASC,GAC3BrM,MAAK,GAAA5Z,OAAI6U,OAAOC,SAAX,eAAkC,CACrC+E,OAAQ,MACRC,KAAM,OACNC,YAAa,YAEZC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GAAI,OAAI8L,EAAQ9L,KACrBmM,MAAM,SAAA3d,GAAC,OAAIud,EAAOvd,OAtgClBsR,KAAK,WACJmI,GAAY,MACZgB,IAAa,KAEdkD,MAAM,SAAA3d,GAAC,OAAIG,QAAQC,IAAIJ,QAqXvBkgB,KAAc1G,IACbtkB,EAAAC,EAAAC,cAACmkB,GAAD,CACExkB,MAAOmM,GAAO+gB,GAAeD,GAC7BxI,SAAUA,GACVC,YA1YY,SAAAD,GAClB4D,GAAM5D,GACHlI,KAAK,SAAAG,GACJtR,QAAQC,IAAI,cAAeqR,GACL,IAAlBA,EAAOA,QACTgI,GAAYhI,KAGfkM,MAAM,SAAA3d,GAAC,OAAIG,QAAQC,IAAIJ,MAmYpBya,aAAc,SAAAzb,GACZyb,GAAazb,MAInB9J,EAAAC,EAAAC,cAACq0B,GAAD,CACEppB,KAAMsf,EACNrR,QAzIN,WACEsR,GAAY,IAwIcrf,KAAKC,MAC3BkpB,SAAUxC,SAASyC,eAAe,OAClCnb,aAAcA,GACdhU,IAAKA,EACLqU,MAAOC,EACP/B,aAAcA,GACdkB,aApYe,SAAArZ,GACnBgpB,GAAOhpB,GAAM0c,KAAK,SAAAG,GAChBgP,GAAgBhP,KAGlB8P,GAAc,KAgYVrX,WAAYA,GACZnV,MAAOmM,GAAO+gB,GAAeD,GAC7BlV,gBAAiBA,GACjB5L,KAAMA,KAERhM,EAAAC,EAAAC,cAAC8Z,GAAD,CACEna,MAAOmM,GAAO+gB,GAAeD,GAC7B3hB,KAAM+Q,IAASwK,GACftN,QAASyR,EACTvP,SAAUA,GACV8B,kBAAmBA,GACnBa,WAAYA,GACZiW,WAAY50B,EAAM40B,eCzsB1Bjd,OAAOmS,OAAP,GAAAhnB,OAAmB6U,OAAOyd,SAASC,SAAnC,MAAAvyB,OAAgD6U,OAAOyd,SAASE,KAAhE,cAIA3d,OAAOC,SAAP,GAAA9U,OAAqB6U,OAAOyd,SAASC,SAArC,MAAAvyB,OAAkD6U,OAAOyd,SAASE,KAAlE,kBA4GeC,eAzGb,SAAAA,EAAYv1B,GAAO,IAAAoqB,EAAA,OAAA/kB,OAAAmwB,EAAA,EAAAnwB,CAAA2G,KAAAupB,IACjBnL,EAAA/kB,OAAAowB,EAAA,EAAApwB,CAAA2G,KAAA3G,OAAAqwB,EAAA,EAAArwB,CAAAkwB,GAAAI,KAAA3pB,KAAMhM,KACD41B,MAAQ,CACXj2B,QAAS,GACT+uB,sBAAuB,GACvBK,eAAW3W,EACXwc,WAAyB,SAAb50B,EAAMmC,IAEpBioB,EAAKjoB,GAAKnC,EAAMmC,GARCioB,mFAWC,IAAAyL,EAAA7pB,KAClB0Q,MAAK,GAAA5Z,OAAI6U,OAAOC,SAAX,mBACFkF,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAE,GACJ6Y,EAAKC,SAAS,CAACn2B,QAASqd,MAEzBmM,MAAM,SAAA3d,GAAC,OAAIG,QAAQC,IAAIJ,sCAI1B,OACE9K,EAAAC,EAAAC,cAACnB,EAAWs2B,SAAZ,CAAqBvrB,MAAOwB,KAAKrM,SAC/Be,EAAAC,EAAAC,cAACo1B,GAAD,CACEr2B,QAASqM,KAAK4pB,MAAMj2B,QACpB+uB,sBAAuB1iB,KAAK4pB,MAAMlH,sBAClCK,UAAW/iB,KAAK4pB,MAAM7G,UACtB6F,WAAY5oB,KAAK4pB,MAAMhB,WACvBjG,eAAgB3iB,KAAK4pB,MAAMjH,eAC3BC,aAAc5iB,KAAK4pB,MAAMhH,aACzBH,WAAYziB,KAAK4pB,MAAMnH,WACvBO,IAAKhjB,KAAK7J,2CAQhB6J,KAAK8pB,SAASzwB,OAAOsF,OAAO,GAAIqB,KAAK4pB,MAAO,CAAEnH,WAAY3I,KAAKmN,8CAGpDjW,GAAM,IAAAiZ,EAAAjqB,KACjB3G,OAAO+F,KAAK4R,GAAM/R,QAAQ,SAAAirB,GACxB,OAAOA,GACL,IAAK,YACHD,EAAK/qB,UAAU8R,EAAKkZ,GAAUxuB,MAAOsV,EAAKkZ,GAAUzN,MACpD,MACF,IAAK,eACHwN,EAAKE,aAAanZ,EAAKkZ,GAAU1Z,KACjC,MACF,IAAK,eACDyZ,EAAKrH,aAAa5R,EAAKkZ,GAAUE,QACjC,MACJ,IAAK,iBACDH,EAAKtH,eAAe3R,EAAKkZ,GAAUG,6CAenC3zB,EAAW+lB,GACnB,IAAI6N,EAAM,GACVA,EAAI5zB,GAAa+lB,EACjBzc,KAAK8pB,SAASzwB,OAAOsF,OAAO,GAAIqB,KAAK4pB,MAAO,CAAElH,sBAAuB4H,0CAQ1D9Z,GACXxQ,KAAK8pB,SAASzwB,OAAOsF,OAAO,GAAIqB,KAAK4pB,MAAO,CAAE7G,WAAW,IAAIvW,KAAMC,qBAAqB+D,2CAG7E4Z,GACXpqB,KAAK8pB,SAASzwB,OAAOsF,OAAO,GAAIqB,KAAK4pB,MAAO,CAAEhH,aAAcwH,4CAG/CC,GACb,GAAIrqB,KAAK4pB,MAAMj2B,QACb,IAAK,IAAIuG,EAAI,EAAGA,EAAI8F,KAAK4pB,MAAMj2B,QAAQyI,OAAQlC,IAE7C,IADA,IAAMvD,EAASqJ,KAAK4pB,MAAMj2B,QAAQuG,GACzBoG,EAAI,EAAGA,EAAI3J,EAAOme,UAAU1Y,OAAQkE,IAAK,CAChD,IAAMyU,EAAWpe,EAAOme,UAAUxU,GAClC,GAAIyU,EAASwV,UAAYF,EAEvB,YADArqB,KAAK8pB,SAASzwB,OAAOsF,OAAO,GAAIqB,KAAK4pB,MAAO,CAAEjH,eAAgB5N,aAjGxD7b,IAAMsxB,WCDlBC,GAAcve,QACW,cAA7BP,OAAOyd,SAASsB,UAEe,UAA7B/e,OAAOyd,SAASsB,UAEhB/e,OAAOyd,SAASsB,SAASC,MACvB,2DAsCN,SAASC,GAAgBC,EAAOC,GAC9BC,UAAUC,cACPvP,SAASoP,GACT/Z,KAAK,SAAAma,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBvB,QACfmB,UAAUC,cAAcM,YAI1B3rB,QAAQC,IACN,iHAKEkrB,GAAUA,EAAOS,UACnBT,EAAOS,SAASN,KAMlBtrB,QAAQC,IAAI,sCAGRkrB,GAAUA,EAAOU,WACnBV,EAAOU,UAAUP,UAO5B9N,MAAM,SAAAtF,GACLlY,QAAQkY,MAAM,4CAA6CA,KCzFjE,IADA,IAAI4T,GAAU/E,SAASC,uBAAuB,2BACrCzsB,GACL,IAAMwxB,EAASD,GAAQvxB,GAES,GAA5BwxB,EAAOC,mBACPC,IAASC,OAAOn3B,EAAAC,EAAAC,cAACk3B,GAAD,CACRC,IAAK,SAACC,GAAUrgB,OAAM,OAAA7U,OAAQ40B,EAAOO,aAAa,QAAWD,GAC7D71B,GAAIu1B,EAAOO,aAAa,QACpBP,IAPXxxB,GAAI,EAAGA,GAAIuxB,GAAQrvB,OAAQlC,KAAMgyB,GAAjChyB,KDeF,SAAkB4wB,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIoB,IAAIC,IAAwBzgB,OAAOyd,SAAStgB,MACpDujB,SAAW1gB,OAAOyd,SAASiD,OAIvC,OAGF1gB,OAAO2gB,iBAAiB,OAAQ,WAC9B,IAAMzB,EAAK,GAAA/zB,OAAMs1B,IAAN,sBAEP3B,IAgEV,SAAiCI,EAAOC,GAEtCpa,MAAMma,GACH/Z,KAAK,SAAAC,GAEJ,IAAMwb,EAAcxb,EAASiM,QAAQe,IAAI,gBAEnB,MAApBhN,EAASgW,QACO,MAAfwF,IAA8D,IAAvCA,EAAY5U,QAAQ,cAG5CoT,UAAUC,cAAcwB,MAAM1b,KAAK,SAAAma,GACjCA,EAAawB,aAAa3b,KAAK,WAC7BnF,OAAOyd,SAASsD,aAKpB9B,GAAgBC,EAAOC,KAG1B3N,MAAM,WACLxd,QAAQC,IACN,mEArFA+sB,CAAwB9B,EAAOC,GAI/BC,UAAUC,cAAcwB,MAAM1b,KAAK,WACjCnR,QAAQC,IACN,gHAMJgrB,GAAgBC,EAAOC,MC7B/BE","file":"static/js/main.733251ce.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.09eddd34.png\";","import { createContext } from 'react';\r\n\r\nexport const AppContext = createContext({\r\n    regions: []\r\n});\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst CheckboxComponent = styled.input`\r\n  &[type=\"checkbox\"] {\r\n    appearance: none;\r\n    position: relative;\r\n    outline: none;\r\n  }\r\n  &[type=\"checkbox\"]::before {\r\n    content: \"\";\r\n    box-sizing: border-box;\r\n    width: 15px;\r\n    height: 15px;\r\n    position: absolute;\r\n    background-color: inherit;\r\n    top: -7.5px;\r\n    left: 5px;\r\n    border: 1.5px solid ${props => props.palette.additional};\r\n    border-radius: 2px;\r\n  }\r\n  &[type=\"checkbox\"]:hover:before {\r\n    cursor: pointer;\r\n    background-color: ${props => props.palette.additional};\r\n  }\r\n  &[type=\"checkbox\"]:hover:after {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    left: 9.25px;\r\n    top: -6.5px;\r\n    content: \"\";\r\n    width: 4px;\r\n    height: 8px;\r\n    transform: rotate(45deg);\r\n    border-bottom: 2px solid ${props => props.palette.secondary};\r\n    border-right: 2px solid ${props => props.palette.secondary};\r\n  }\r\n  &[type=\"checkbox\"]:checked:after {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    left: 9.25px;\r\n    top: -6.5px;\r\n    content: \"\";\r\n    width: 4px;\r\n    height: 8px;\r\n    transform: rotate(45deg);\r\n    border-bottom: 2px solid ${props => props.palette.secondary};\r\n    border-right: 2px solid ${props => props.palette.secondary};\r\n  }\r\n  &[type=\"checkbox\"]:checked:before {\r\n    background-color: ${props => props.palette.text};\r\n    border: 1.5px solid ${props => props.palette.text};\r\n  }\r\n`;\r\n\r\nconst Checkbox = ({ theme, isChecked, checkHandler }) => (\r\n  <CheckboxComponent\r\n    type=\"checkbox\"\r\n    palette={theme}\r\n    checked={isChecked}\r\n    onChange={checkHandler}\r\n  />\r\n)\r\n\r\nexport default Checkbox;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst RadioComponent = styled.input`\r\n  &[type=\"radio\"] {\r\n    appearance: none;\r\n    position: relative;\r\n    outline: none;\r\n  }\r\n  &[type=\"radio\"]::before {\r\n    content: \"\";\r\n    box-sizing: border-box;\r\n    width: 15px;\r\n    height: 15px;\r\n    position: absolute;\r\n    background-color: inherit;\r\n    top: -7.5px;\r\n    left: 5px;\r\n    border: 1.5px solid ${props => props.palette.text};\r\n    border-radius: 50%;\r\n  }\r\n  &[type=\"radio\"]:hover:before {\r\n    cursor: pointer;\r\n  }\r\n  &[type=\"radio\"]:hover:after {\r\n    content: \"\";\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    width: 7px;\r\n    height: 7px;\r\n    position: absolute;\r\n    top: -3px;\r\n    left: 8.5px;\r\n    border-radius: 50%;\r\n    background-color: ${props => props.palette.text};\r\n  }\r\n  &[type=\"radio\"]:checked:after {\r\n    content: \"\";\r\n    box-sizing: border-box;\r\n    width: 7px;\r\n    height: 7px;\r\n    position: absolute;\r\n    top: -3px;\r\n    left: 8.5px;\r\n    border-radius: 50%;\r\n    background-color: ${props => props.palette.text};\r\n  }\r\n`;\r\n\r\nconst Radio = ({ theme, isChecked, checkHandler }) => (\r\n  <RadioComponent\r\n    type=\"radio\"\r\n    palette={theme}\r\n    checked={isChecked}\r\n    onChange={checkHandler}\r\n    />\r\n)\r\n\r\nexport default Radio;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nconst RefreshButton = styled.button`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  outline: none;\r\n  background: inherit;\r\n  border: none;\r\n  padding: 6px 1px;\r\n  border-radius: 50%;\r\n  svg {\r\n    fill: ${props => props.palette.text};\r\n  }\r\n  &:hover {\r\n    background: ${props => props.palette.turq};\r\n  }\r\n  &:active {\r\n    svg {\r\n      transform: scale(1.25);\r\n    }\r\n  }\r\n`;\r\n\r\nconst RefreshLayer = ({ theme, handleRefresh, tooltipType }) => {\r\n  return (\r\n    <RefreshButton\r\n      palette={theme}\r\n      onClick={handleRefresh}\r\n      data-tip\r\n      data-for=\"refresh-tooltip\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"18\"\r\n        height=\"18\"\r\n        viewBox=\"0 0 18 18\"\r\n      >\r\n        <path d=\"M9 13.5c-2.49 0-4.5-2.01-4.5-4.5S6.51 4.5 9 4.5c1.24 0 2.36.52 3.17 1.33L10 8h5V3l-1.76 1.76C12.15 3.68 10.66 3 9 3 5.69 3 3.01 5.69 3.01 9S5.69 15 9 15c2.97 0 5.43-2.16 5.9-5h-1.52c-.46 2-2.24 3.5-4.38 3.5z\" />\r\n      </svg>\r\n      <ReactTooltip\r\n        id=\"refresh-tooltip\"\r\n        type={tooltipType}\r\n        border\r\n        delayShow={250}\r\n      >\r\n        Обновить слой\r\n      </ReactTooltip>\r\n    </RefreshButton>\r\n  );\r\n};\r\n\r\nexport default RefreshLayer;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst LayerIconComponent = styled.img`\r\n  box-sizing: border-box;\r\n  width: 16px;\r\n  height: 16px;\r\n`;\r\n\r\nconst LayerIcon = ({ layerName, region, isSublayer }) => {\r\n  if (region) {\r\n    if (isSublayer) {\r\n      return (\r\n        <LayerIconComponent\r\n          src={`legend-img/layerIcons/${region.regionCode +\r\n            region.code +\r\n            layerName}.png`}\r\n          alt=\"\"\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <LayerIconComponent\r\n          src={`legend-img/layerIcons/${layerName}.png`}\r\n          alt=\"\"\r\n        />\r\n      );\r\n    }\r\n  } else {\r\n    return (\r\n      <LayerIconComponent\r\n        src={`legend-img/layerIcons/${layerName}.png`}\r\n        alt=\"\"\r\n      />\r\n    );\r\n  }\r\n};\r\n\r\nexport default LayerIcon;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ListButtonComponent = styled.button`\r\n  visibility: ${props => (props.isVisible ? \"visible\" : \"hidden\")};\r\n  text-decoration: underline;\r\n  background-color: inherit;\r\n  border: none;\r\n  outline: none;\r\n  padding: 5px;\r\n  background-color: inherit;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  border-radius: 4px;\r\n  &:hover {\r\n    background-color: ${props => props.palette.turq};\r\n    cursor: pointer;\r\n  }\r\n  color: ${props => props.palette.text};\r\n`;\r\n\r\nconst ListButton = ({ theme, listButtonHandler, listButtonVisible }) => (\r\n  <ListButtonComponent\r\n    palette={theme}\r\n    onClick={listButtonHandler}\r\n    isVisible={listButtonVisible}\r\n  >\r\n    Список\r\n  </ListButtonComponent>\r\n);\r\n\r\nexport default ListButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nconst OpacityButtonComponent = styled.button`\r\n  border: none;\r\n  outline: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: inherit;\r\n  color: ${props => props.palette.text};\r\n  svg {\r\n    fill: ${props => props.palette.text};\r\n    background-size: 12px 12px;\r\n    background-position: center center;\r\n    background-image: linear-gradient(to right, ${props => props.palette.primary}, ${props => props.palette.primary} ${props => props.opacityLevel}%, transparent ${props => props.opacityLevel}%, transparent);\r\n    background-repeat: no-repeat;\r\n  }\r\n  svg::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    top: 0px;\r\n    background: red;\r\n    width: 20px;\r\n    height: 20px;\r\n  }\r\n  .tooltip {\r\n    padding: 2px 4px;\r\n  }\r\n  border-radius: 4px; \r\n  &:hover {\r\n    background-color: ${props => props.palette.turq};\r\n    cursor: pointer;\r\n    div {\r\n      border-color: ${props => props.palette.primary};\r\n      cursor: pointer;\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nconst OpacityButton = ({theme, menuId, opacityButtonId, tooltipType, opacityValue, handleOpacityButtonClick}) => (\r\n  <OpacityButtonComponent\r\n    palette={theme}\r\n    id={menuId}\r\n    onClick={handleOpacityButtonClick}\r\n    data-tip\r\n    data-for={opacityButtonId}\r\n    opacityLevel={opacityValue}\r\n  >\r\n    <ReactTooltip\r\n      className=\"tooltip\"\r\n      type={tooltipType}\r\n      border\r\n      delayShow={250}\r\n      id={opacityButtonId}\r\n    >\r\n      Изменить прозрачность\r\n    </ReactTooltip>\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M20 15.31L23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z\"/></svg>\r\n  </OpacityButtonComponent>\r\n)\r\n\r\nexport default OpacityButton;","import React from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport Checkbox from \"./Checkbox\";\r\nimport Radio from \"./Radio\";\r\nimport RefreshLayer from \"./RefreshLayer\";\r\nimport LayerIcon from \"./LayerIcon\";\r\nimport ListButton from \"./ListButton\";\r\nimport OpacityButton from \"./OpacityButton\";\r\n\r\nconst RowComponent = styled.div`\r\n  padding: 2px;\r\n  display: grid;\r\n  grid-template-columns: ${props =>\r\n    props.child || props.level2\r\n      ? \"7.5% 7.5% 7.5% 7.5% 37.5% 15% 7.5% 10%\"\r\n      : \"7.5% 7.5% 7.5% 45% 15% 7.5% 10%\"};\r\n  align-items: center;\r\n  background-color: ${props => props.palette.secondary};\r\n  div:hover {\r\n    cursor: default;\r\n  }\r\n`;\r\n\r\nconst CollapsibleRow = styled.div`\r\n  .row {\r\n    padding: 2px;\r\n    display: grid;\r\n    grid-template-columns: 7.5% 7.5% 7.5% 45% 15% 7.5% 10%;\r\n    align-items: center;\r\n    background-color: ${props => props.palette.secondary};\r\n    div:hover {\r\n      cursor: default;\r\n    }\r\n    .expanded-icon {\r\n      fill: ${props => props.palette.text};\r\n      transform: rotate(${props => (props.isExpanded ? \"90deg\" : \"0deg\")});\r\n      transition: transform 0.5s;\r\n    }\r\n  }\r\n  .expandable {\r\n    overflow: hidden;\r\n    max-height: ${props => (props.isExpanded ? \"500vh\" : 0)};\r\n    transition: max-height 0.5s ease-in-out;\r\n  }\r\n`;\r\n\r\nconst LegendRow = styled.div`\r\n  background-color: ${props => props.palette.secondary};\r\n  color: ${props => props.palette.text};\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 2px;\r\n  display: grid;\r\n  grid-template-columns: 7.5% 7.5% 7.5% 70%;\r\n`;\r\n\r\nconst Row = ({\r\n  theme,\r\n  sublayers,\r\n  child,\r\n  isCheckbox,\r\n  isChecked,\r\n  checkHandler,\r\n  layerName,\r\n  layerText,\r\n  region,\r\n  handleRefresh,\r\n  hasListButton,\r\n  listButtonHandler,\r\n  listButtonVisible,\r\n  menuId,\r\n  handleOpacityButtonClick,\r\n  opacityButtonId,\r\n  tooltipType,\r\n  opacityValue\r\n}) => {\r\n  const [expanded, setExpanded] = React.useState(false);\r\n  return sublayers ? (\r\n    <CollapsibleRow palette={theme} isExpanded={expanded}>\r\n      <div className=\"row\">\r\n        <svg\r\n          className=\"expanded-icon\"\r\n          onClick={() => setExpanded(!expanded)}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"20\"\r\n          height=\"20\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z\" />\r\n        </svg>\r\n        {isCheckbox ? (\r\n          <Checkbox\r\n            theme={theme}\r\n            isChecked={isChecked}\r\n            checkHandler={checkHandler}\r\n          />\r\n        ) : (\r\n          <Radio\r\n            theme={theme}\r\n            isChecked={isChecked}\r\n            checkHandler={checkHandler}\r\n          />\r\n        )}\r\n        {[\r\n          \"req\",\r\n          \"eval\",\r\n          \"func\",\r\n          \"pdp\",\r\n          \"gp\",\r\n          \"voz\",\r\n          \"vop\",\r\n          \"inv\",\r\n          \"water\",\r\n          \"gas\",\r\n          \"storm_water\",\r\n          \"con\",\r\n          \"heat\",\r\n          \"sewer\",\r\n          \"electr\",\r\n          \"pch\",\r\n          \"rst\",\r\n          \"ugl\",\r\n          \"ugpol\",\r\n          \"base\",\r\n          \"bing\",\r\n          \"garysh\",\r\n          \"kazgeo\"\r\n        ].includes(layerName) ? (\r\n          <div />\r\n        ) : (\r\n          <LayerIcon theme={theme} layerName={layerName} isSublayer={true} />\r\n        )}\r\n        <p>{layerText}</p>\r\n        {hasListButton ? (\r\n          <ListButton\r\n            theme={theme}\r\n            listButtonHandler={listButtonHandler}\r\n            listButtonVisible={listButtonVisible}\r\n          />\r\n        ) : (\r\n          <div />\r\n        )}\r\n        <RefreshLayer\r\n          theme={theme}\r\n          handleRefresh={handleRefresh}\r\n          tooltipType={tooltipType}\r\n        />\r\n        <OpacityButton\r\n          theme={theme}\r\n          menuId={menuId}\r\n          handleOpacityButtonClick={handleOpacityButtonClick}\r\n          opacityButtonId={opacityButtonId}\r\n          tooltipType={tooltipType}\r\n          opacityValue={opacityValue}\r\n        />\r\n      </div>\r\n      <div className=\"expandable\">\r\n        {sublayers.map((sublayer, i) => (\r\n          <LegendRow palette={theme} key={i}>\r\n            <div></div>\r\n            <div></div>\r\n            <LayerIcon\r\n              theme={theme}\r\n              layerName={sublayer.name}\r\n              region={[\"pdp\", \"gp\"].includes(layerName) ? region : null}\r\n            />\r\n            <p>{sublayer.title}</p>\r\n          </LegendRow>\r\n        ))}\r\n      </div>\r\n    </CollapsibleRow>\r\n  ) : (\r\n    <RowComponent palette={theme} child={child}>\r\n      <div></div>\r\n      {child ? <div></div> : null}\r\n      {isCheckbox ? (\r\n        <Checkbox\r\n          theme={theme}\r\n          isChecked={isChecked}\r\n          checkHandler={checkHandler}\r\n        />\r\n      ) : (\r\n        <Radio\r\n          theme={theme}\r\n          isChecked={isChecked}\r\n          checkHandler={checkHandler}\r\n        />\r\n      )}\r\n      {[\r\n        \"req\",\r\n        \"eval\",\r\n        \"func\",\r\n        \"pdp\",\r\n        \"gp\",\r\n        \"voz\",\r\n        \"vop\",\r\n        \"inv\",\r\n        \"water\",\r\n        \"gas\",\r\n        \"storm_water\",\r\n        \"con\",\r\n        \"heat\",\r\n        \"sewer\",\r\n        \"electr\",\r\n        \"pch\",\r\n        \"rst\",\r\n        \"ugl\",\r\n        \"ugpol\",\r\n        \"base\",\r\n        \"bing\",\r\n        \"garysh\",\r\n        \"kazgeo\"\r\n      ].includes(layerName) ? (\r\n        <div />\r\n      ) : (\r\n        <LayerIcon theme={theme} layerName={layerName} isSublayer={false} />\r\n      )}\r\n      <p>{layerText}</p>\r\n      {hasListButton ? (\r\n        <ListButton\r\n          theme={theme}\r\n          listButtonHandler={listButtonHandler}\r\n          listButtonVisible={listButtonVisible}\r\n        />\r\n      ) : (\r\n        <div />\r\n      )}\r\n      <RefreshLayer theme={theme} handleRefresh={handleRefresh} />\r\n      <OpacityButton\r\n        theme={theme}\r\n        menuId={menuId}\r\n        handleOpacityButtonClick={handleOpacityButtonClick}\r\n        opacityButtonId={opacityButtonId}\r\n        tooltipType={tooltipType}\r\n        opacityValue={opacityValue}\r\n      />\r\n    </RowComponent>\r\n  );\r\n};\r\n\r\nexport default Row;\r\n","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst fadeIn = keyframes`\r\n  to {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nconst SliderComponent = styled.div`\r\n  position: absolute;\r\n  width: 300px;\r\n  padding: 6px;\r\n  top: ${props => props.viewportOffset - 121}px;\r\n  transition: top 0.3s;\r\n  left: calc(100% + 5px);\r\n  border-radius: 0 6px 6px 0;\r\n  opacity: 0;\r\n  animation: ${fadeIn} 0.3s forwards;\r\n  background-color: ${props => props.palette.secondary};\r\n  p {\r\n    margin-top: 10px;\r\n  }\r\n  div {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin: 4px 0;\r\n    p {\r\n      text-align: center;\r\n    }\r\n    input[type=\"range\"] {\r\n      -webkit-appearance: none;\r\n      -moz-appearance: none;\r\n      margin: 0 4px;\r\n      width: 100%;\r\n      background: transparent;\r\n      outline: none;\r\n      &::-webkit-slider-thumb {\r\n        -webkit-appearance: none;\r\n        width: 10px;\r\n        height: 10px;\r\n        border-radius: 50%;\r\n        margin-top: -4px;\r\n        border: none;\r\n        background-color: ${props => props.palette.turq};\r\n      }\r\n      &::-moz-range-thumb {\r\n        -webkit-appearance: none;\r\n        width: 10px;\r\n        height: 10px;\r\n        border-radius: 50%;\r\n        margin-top: -4px;\r\n        border: none;\r\n        background-color: ${props => props.palette.turq};\r\n      }\r\n      &::-webkit-slider-runnable-track {\r\n        height: 2px;\r\n        background-color: ${props => props.palette.additional};\r\n      }\r\n      &::-moz-range-track {\r\n        height: 2px;\r\n        background-color: ${props => props.palette.additional};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  font-size: 12px;\r\n  outline: none;\r\n  border: none;\r\n  padding: 2px 6px;\r\n  float: right;\r\n  margin: 2px;\r\n  border-radius: 2px;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  background: ${props => props.palette.additional};\r\n  color: ${props => props.palette.text};\r\n  z-index: 10;\r\n  &:hover {\r\n    background: ${props => props.palette.turq};\r\n  }\r\n`;\r\n\r\nconst Slider = ({\r\n  theme,\r\n  handleCloseSlider,\r\n  defaultValue,\r\n  handleSliderChange,\r\n  viewportOffset\r\n}) => (\r\n  <SliderComponent palette={theme} viewportOffset={viewportOffset}>\r\n    <CloseButton onClick={handleCloseSlider} palette={theme}>\r\n      X\r\n    </CloseButton>\r\n    <p>Видимость(%):</p>\r\n    <div>\r\n      <p>0</p>\r\n      <input\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"100\"\r\n        step=\"1\"\r\n        defaultValue={defaultValue}\r\n        onChange={handleSliderChange}\r\n      />\r\n      <p>100</p>\r\n    </div>\r\n  </SliderComponent>\r\n);\r\n\r\nexport default Slider;\r\n","const OSKEMEN = \"05085\";\r\nconst SEMEI = \"05252\";\r\n\r\nconst getPdpSublayers = region => {\r\n  switch (region.regionCode + region.code) {\r\n    case OSKEMEN:\r\n      return getRegionSublayers(UK, \"ukPDP\");\r\n    case SEMEI:\r\n      return getRegionSublayers(SEM, \"semPDP\");\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nexport default getPdpSublayers;\r\n\r\nconst getRegionSublayers = (regionLayers, key) =>\r\n  regionLayers.map((layer, index) => ({\r\n    name: `${key + index}`,\r\n    title: layer\r\n  }));\r\n\r\nconst UK = [\r\n  \"Водозаборные сооружения\",\r\n  \"Электроподстанция проект.\",\r\n  \"Гаражи, депо\",\r\n  \"Прочие земли\",\r\n  \"Санитарно-защитные зеленые насаждения\",\r\n  \"Санитарно-защитная зона железной дороги\",\r\n  \"Солончаки\",\r\n  \"Граница проектируемой застройки\",\r\n  \"Резервные территории\",\r\n  \"КНС\",\r\n  \"Водные объекты\",\r\n  \"Улицы и проезды\",\r\n  \"Не определено\",\r\n  \"Жилая зона проект.\",\r\n  \"Здания общественные\", // 14\r\n  \"Здания жилые\",\r\n  \"Очистные сооружения\",\r\n  \"Оси автодорог\",\r\n  \"Функциональное зонирование общего пользования\",\r\n  \"Оси улиц\",\r\n  \"Общественные территории (проект.)\",\r\n  \"Территория учреждений здравоохранения проект.\",\r\n  \"Территории физкультурно-спортивных сооружений проект.\",\r\n  \"Зеленые насаждения общего пользования\",\r\n  \"Спец.озеленение/газон\",\r\n  \"Кладбища\",\r\n  \"Производственно-коммунально складские территории сущ.\",\r\n  \"Производственно-коммунально складские территории проект.\",\r\n  \"Автодороги (сущ.)\",\r\n  \"Тротуары\",\r\n  \"Площадки\",\r\n  \"Охранная зона подстанций\",\r\n  \"Тепловая насосная станция\",\r\n  \"Водяная насосная станция\",\r\n  \"Электроподстанция\",\r\n  \"Объекты связи\",\r\n  \"Резервуар воды\",\r\n  \"Граница существующей застройки\",\r\n  \"Автомобильные дороги и улицы\", // 38\r\n  \"Жилая зона сущ.\",\r\n  \"Общественно-деловая зона\",\r\n  \"Территории физкультурно-спортивных сооружений сущ.\",\r\n  \"Водоохранная зона\",\r\n  \"Ось основной улицы\",\r\n  \"Территория учреждений здравоохранения сущ.\",\r\n  \"Территории учреждений образования сущ.\",\r\n  \"Территории учреждений образования проект.\",\r\n  \"Территории парков и скверов\"\r\n];\r\n\r\nconst SEM = [\r\n  \"Оси автодорог\",\r\n  \"Оси улиц\",\r\n  \"Граница проектируемой застройки\",\r\n  \"Граница существующей застройки\",\r\n  \"Жилая зона сущ.\",\r\n  \"Здания жилые\",\r\n  \"Резервные территории\",\r\n  \"Функциональное зонирование общего пользования\",\r\n  \"Территория учреждений здравоохранения сущ.\",\r\n  \"Территория учреждений здравоохранения проект.\",\r\n  \"Территории учреждений образования сущ.\",\r\n  \"Территории учреждений образования проект.\",\r\n  \"Территории физкультурно-спортивных сооружений сущ.\",\r\n  \"Территории физкультурно-спортивных сооружений проект.\",\r\n  \"Территории парков и скверов\",\r\n  \"Спец.озеленение/газон\",\r\n  \"Водозаборные сооружения\",\r\n  \"Электроподстанция проект.\",\r\n  \"Гаражи, депо\",\r\n  \"Прочие земли\",\r\n  \"Автодороги (сущ.)\",\r\n  \"Площадки\",\r\n  \"Водоохранная зона\",\r\n  \"Охранная зона подстанций\",\r\n  \"Солончаки\",\r\n  \"New Subtype\",\r\n  \"Здания общественные\",\r\n  \"Тепловая насосная станция\",\r\n  \"Водяная насосная станция\",\r\n  \"Электроподстанция\",\r\n  \"Объекты связи\",\r\n  \"Резервуар воды\",\r\n  \"Тротуары\",\r\n  \"Озеленение улиц и дорог\",\r\n  \"Зоны религиозных сооружений\",\r\n  \"Зеленые насаждения общего пользования\",\r\n  \"Припойменные зеленые насаждения\",\r\n  \"Территории коммунально-складских объектов\",\r\n  \"Территории сооружений и объектов транспортной инфраструктуры проект.\",\r\n  \"Улицы и проезды\",\r\n  \"Санитарно-защитные зоны\",\r\n  \"Берегоукрепление\",\r\n  \"Территории малоэтажной застройки проект.\",\r\n  'Государственный лесной природный резервата \"Семей орманы\"',\r\n  \"Прочие зеленые насаждения\",\r\n  \"Территории коммунально-складских объектов проект.\",\r\n  \"Магистральная улица за расчетным сроком\",\r\n  \"Территории усадебной застройки проект.\",\r\n  \"Территории многоэтажной застройки проект.\",\r\n  \"Территории малоэтажной застройки сущ.\",\r\n  \"Территории кладбищ\",\r\n  \"Ветрозащитные зеленые насаждения\",\r\n  \"Территории многоэтажной застройки сущ.\",\r\n  \"Территории среднеэтажной застройки сущ.\",\r\n  \"Территории среднеэтажной застройки проект.\",\r\n  \"Территории адм.-общественных и культурно-бытовых учреждений проект.\",\r\n  \"Территории промышленного предприятия\",\r\n  \"Территории сооружений и объектов транспортной инфраструктуры\",\r\n  \"Автомобильные дороги и улицы\",\r\n  \"Санитарно-защитная зона железной дороги\",\r\n  \"Территории учреждений образования, здравоохранения и спортивных объектов проект.\",\r\n  \"Водные поверхности\",\r\n  \"Жилая застройка подлежащая выносу\",\r\n  \"Территории адм.-общественных и культурно-бытовых учреждений\",\r\n  \"Территории промышленно-производственных, коммунально-бытовых, транспортных предприятий, связи и инженерных коммуникаций\",\r\n  \"Территории промышленного предприятия проект.\",\r\n  \"Территории объектов инженерной инфраструктуры\",\r\n  \"Санитарно-защитные зеленые насаждения\"\r\n];\r\n","const OSKEMEN = \"05085\";\r\nconst SEMEI = \"05252\";\r\n\r\nconst getGpSublayers = region => {\r\n  switch (region.regionCode + region.code) {\r\n    case OSKEMEN:\r\n      return getRegionSublayers(UK, \"ukGP\");\r\n    case SEMEI:\r\n      return getRegionSublayers(SEM, \"semGP\");\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nexport default getGpSublayers;\r\n\r\nconst getRegionSublayers = (regionLayers, key) =>\r\n  regionLayers.map((layer, index) => ({\r\n    name: `${key + index}`,\r\n    title: layer\r\n  }));\r\n\r\nconst UK = [\r\n  \"Городские дороги и общегородские магистрали\",\r\n  \"Магистрали районного значения\",\r\n  \"Территории усадебной застройки сущ.\",\r\n  \"Территории усадебной застройки 1 очередь\",\r\n  \"Территории усадебной застройки проект.\",\r\n  \"Территории многоэтажной застройки сущ.\",\r\n  \"Территории многоэтажной застройки 1 очередь\",\r\n  \"Территории многоэтажной застройки проект.\",\r\n  \"Территории малоэтажной застройки сущ.\",\r\n  \"Границы жилых районов\",\r\n  \"Резерв селитебной территории\",\r\n  \"Жилая застройка подлежащая выносу\",\r\n  \"Территории адм.-деловых, общественных, культурно-бытовых, торговых учреждений сущ.\",\r\n  \"Территории адм.-деловых, общественных, культурно-бытовых, торговых учреждений проект.\",\r\n  \"Территории учреждений здравоохранения\",\r\n  \"Территории детских дошкольных учреждений и общеобразовательных школ\",\r\n  \"Территории высших и специальных учебных заведений\",\r\n  \"Зеленые насаждения общего пользования\",\r\n  \"Припойменные зеленые насаждения\",\r\n  \"Прочие зеленыее насаждения\",\r\n  \"Водные поверхности\",\r\n  \"Территории кладбищ\",\r\n  \"Территории подлежащие рекультивации\",\r\n  \"Территории транспортных организаций\",\r\n  \"Промышленно-производственные, коммунально-складские территории\",\r\n  \"Промпредприятия в водоохранной полосе подлежащие выносу\",\r\n  \"Резерв промышленно-производственных, коммунально-складских территорий\",\r\n  \"Оси городских дорог и общегородских магистралей\",\r\n  \"Оси магистралей районного значения\",\r\n  \"Санитарно-защитные зеленые насаждения\",\r\n  \"Дачные и садоводческие участки\",\r\n  \"Ветрозащитные зеленые насаждения\"\r\n];\r\n\r\nconst SEM = [\r\n  \"Городские дороги и общегородские магистрали\",\r\n  \"Магистрали районного значения\",\r\n  \"Территории усадебной застройки сущ.\",\r\n  \"Территории усадебной застройки 1 очередь\",\r\n  \"Территории усадебной застройки проект.\",\r\n  \"Территории многоэтажной застройки сущ.\",\r\n  \"Территории многоэтажной застройки 1 очередь\",\r\n  \"Территории многоэтажной застройки проект.\",\r\n  \"Территории малоэтажной застройки сущ.\",\r\n  \"Границы жилых районов\",\r\n  \"Резерв селитебной территории\",\r\n  \"Жилая застройка подлежащая выносу\",\r\n  \"Территории религиозных/культовых учреждений\",\r\n  \"Территории адм.-деловых, общественных, культурно-бытовых, торговых учреждений сущ.\",\r\n  \"Территории адм.-деловых, общественных, культурно-бытовых, торговых учреждений проект.\",\r\n  \"Территории под объекты торгово-производственного назначения и обслуживания населения\",\r\n  \"Территории учреждений здравоохранения\",\r\n  \"Территории детских дошкольных учреждений и общеобразовательных школ\",\r\n  \"Территории высших и специальных учебных заведений\",\r\n  \"Территории физкультурно-спортивных сооружений\",\r\n  \"Зеленые насаждения общего пользования\",\r\n  'Территории резервата \"Семей орманы\"',\r\n  \"Лесопарк\",\r\n  \"Припойменные зеленые насаждения\",\r\n  \"Прочие зеленыее насаждения\",\r\n  \"Водные поверхности\",\r\n  \"Территории кладбищ\",\r\n  \"Территории подлежащие рекультивации\",\r\n  \"Промышленно-производственные, коммунально-складские территории\",\r\n  \"Территории транспортных организаций\",\r\n  \"Промпредприятия в водоохранной полосе подлежащие выносу\",\r\n  \"Резерв промышленно-производственных, коммунально-складских территорий\",\r\n  \"Оси городских дорог и общегородских магистралей\",\r\n  \"Оси магистралей районного значения\",\r\n  \"Санитарно-защитные зеленые насаждения\",\r\n  \"Санитарно-защитная зона железной дороги\",\r\n  \"Дачные и садоводческие участки\",\r\n  \"Ветрозащитные зеленые насаждения\"\r\n];\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport Collapsible from \"react-collapsible\";\r\n\r\nimport Row from \"./Row\";\r\nimport Slider from \"./Slider\";\r\n\r\nimport getPdpSublayers from \"../info/getPdpSublayers\";\r\nimport getGpSublayers from \"../info/getGpSublayers\";\r\n\r\nconst LayersWrapper = styled.div`\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  left: 56px;\r\n  top: 120px;\r\n  width: 400px;\r\n  color: ${props => props.palette.text};\r\n  font: 400 12px Arial;\r\n  * {\r\n    margin: 0;\r\n    box-sizing: border-box;\r\n  }\r\n  .Collapsible {\r\n    .is-open {\r\n      div {\r\n        .expandedIcon {\r\n          transform: rotate(180deg);\r\n          transition: transform 0.2s;\r\n        }\r\n      }\r\n    }\r\n    .is-closed {\r\n      div {\r\n        .expandedIcon {\r\n          transform: rotate(0deg);\r\n          transition: transform 0.2s;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .container {\r\n    max-height: 80vh;\r\n    overflow-y: overlay;\r\n    overflow-x: hidden;\r\n    width: calc(100% + 5px);\r\n    &::-webkit-scrollbar {\r\n      background-color: ${props => props.palette.additional}\r\n      width: 5px;\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      background-color: ${props => props.palette.turq}\r\n      width: 5px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Trigger = styled.div`\r\n  width: 100%;\r\n  padding: 5px;\r\n  font-weight: 600;\r\n  background-color: ${props => props.palette.primary};\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid ${props => props.palette.secondary};\r\n  svg {\r\n    fill: ${props => props.palette.text};\r\n  }\r\n`;\r\n\r\nconst getFreeLandsTitles = () => {\r\n  let freeLands = new Array(40);\r\n\r\n  for (var i = 0; i < freeLands.length; i++) {\r\n    freeLands[i] = {\r\n      title: `Оценочная зона ${i + 1}`,\r\n      name: `oz${i + 1}`\r\n    };\r\n  }\r\n\r\n  return freeLands;\r\n};\r\n\r\nconst LAYERS = region => [\r\n  {\r\n    title: \"Земельные участки\",\r\n    items: [\r\n      {\r\n        name: \"lands\",\r\n        title: \"Зарегистрированные\"\r\n      },\r\n      { name: \"arrest\", title: \"с арестом\", parent: \"lands\" },\r\n      /*{\r\n        name: \"lands_label\",\r\n        title: \"Подписи ЗУ\"\r\n      },*/\r\n      { name: \"free\", title: \"Земельный аукцион\" },\r\n      {\r\n        name: \"req\",\r\n        title: \"Испрашиваемые\",\r\n        sublayers: [\r\n          { title: \"Заявление подано\", name: \"podano\" },\r\n          { title: \"Акт выбора согласован\", name: \"soglas\" },\r\n          { title: \"Постановление МИО выдано\", name: \"vydano\" },\r\n          { title: \"Землеустроительный проект разработан\", name: \"razrabot\" },\r\n          { title: \"Землеустроительный проект утвержден\", name: \"utver\" },\r\n          {\r\n            title:\r\n              \"Подача заявления о постановке на кадастровый учет и гос.регистрацию прав\",\r\n            name: \"podacha\"\r\n          },\r\n          {\r\n            title:\r\n              \"Постановка на кадастровый учет и гос.регистрацию прав осуществлена\",\r\n            name: \"postan\"\r\n          }\r\n        ]\r\n      },\r\n      { name: \"eval\", title: \"Оценочные зоны\", sublayers: getFreeLandsTitles() }\r\n    ]\r\n  },\r\n  {\r\n    title: \"Здания, строения, сооружения\",\r\n    items: [\r\n      { name: \"buildings\", title: \"Строения\" }\r\n      // { name: \"buildings_label\", title: \"Подписи строений\" }\r\n    ]\r\n  },\r\n  {\r\n    title: \"Градостроительные регламенты\",\r\n    items: [\r\n      { name: \"redlines\", title: \"Красные линии\" },\r\n      { name: \"func\", title: \"Функциональные зоны\" },\r\n      {\r\n        name: \"pdp\",\r\n        title: \"Проекты детальной планировки\",\r\n        sublayers:\r\n          region && [\"05085\", \"05252\"].includes(region.regionCode + region.code)\r\n            ? getPdpSublayers(region)\r\n            : null\r\n      },\r\n      {\r\n        name: \"gp\",\r\n        title: \"Генеральный план\",\r\n        sublayers:\r\n          region && [\"05085\", \"05252\"].includes(region.regionCode + region.code)\r\n            ? getGpSublayers(region)\r\n            : null\r\n      },\r\n      {\r\n        name: \"voz\",\r\n        title: \"Водоохранные зоны\"\r\n      },\r\n      {\r\n        name: \"vop\",\r\n        title: \"Водоохранные полосы\"\r\n      },\r\n      {\r\n        name: \"inv\",\r\n        title: \"Граница инвентаризации\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    title: \"Зоны обеспечения\",\r\n    items: [\r\n      { name: \"water\", title: \"Водоснабжение\" },\r\n      { name: \"gas\", title: \"Газоснабжение\" },\r\n      { name: \"storm_water\", title: \"Ливневая канализация\" },\r\n      { name: \"con\", title: \"Телефонизация\" },\r\n      { name: \"heat\", title: \"Теплоснабжение\" },\r\n      { name: \"sewer\", title: \"Канализация\" },\r\n      { name: \"electr\", title: \"Электроснабжение\" }\r\n    ]\r\n  },\r\n  {\r\n    title: \"Обследование\",\r\n    items: [\r\n      { name: \"pch\", title: \"Почвенные контура\" },\r\n      { name: \"rst\", title: \"Геоботанические контура\" },\r\n      {\r\n        name: \"ugl\",\r\n        title: \"Сельхоз угодия\",\r\n        sublayers: []\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    title: \"Картографическая основа\",\r\n    radio: true,\r\n    items: [\r\n      { name: \"base\", title: \"Базовая карта\" },\r\n      { name: \"bing\", title: \"Спутник (Bing)\" },\r\n      { name: \"garysh\", title: \"Гарыш Сапары\" },\r\n      { name: \"kazgeo\", title: \"Казгеодезия\" }\r\n    ]\r\n  }\r\n];\r\n\r\nexport const Config = {\r\n  visibleLayers: [\"base\"]\r\n};\r\n\r\nfunction EknMapLayers(props) {\r\n  const [opacity, setOpacity] = useState({});\r\n  const [visibility, setVisibility] = useState({\r\n    base: true,\r\n    lands: true,\r\n    lands_label: true\r\n  });\r\n  const [sliderName, setSliderName] = useState(null);\r\n  const [openSlider, setOpenSlider] = useState(false);\r\n  const [expanded, setExpanded] = useState([\r\n    true,\r\n    true,\r\n    true,\r\n    true,\r\n    true,\r\n    true\r\n  ]);\r\n  const [viewportOffset, setViewportOffset] = useState(null);\r\n\r\n  const handleOpacityChange = useCallback(\r\n    (name, event) => {\r\n      const x = [];\r\n      const value = parseInt(event.target.value);\r\n      x[name] = value;\r\n      setOpacity(Object.assign([], opacity, x));\r\n      props.setLayerOpacity(name, value);\r\n    },\r\n    [props, opacity]\r\n  );\r\n\r\n  const handleExpanded = useCallback(\r\n    (index, value) => {\r\n      expanded[index] = value;\r\n      setExpanded(Object.assign({}, expanded));\r\n    },\r\n    [expanded]\r\n  );\r\n\r\n  const handleVisibilityChange2 = useCallback(\r\n    (group, item) => {\r\n      const x = [];\r\n      if (group.radio) {\r\n        group.items.forEach(value => {\r\n          if (value.name !== item.name) {\r\n            x[value.name] = false;\r\n            props.showLayer(value.name, false);\r\n          }\r\n        });\r\n      }\r\n      const value = !visibility[item.name];\r\n      x[item.name] = value;\r\n      const newVisibility = Object.assign([], visibility, x);\r\n      Config.visibleLayers = Object.keys(newVisibility).filter(\r\n        key => newVisibility[key] === true\r\n      );\r\n      /*if (item.name === \"buildings\") {\r\n        newVisibility[\"buildings_label\"] = true;\r\n      }*/\r\n      setVisibility(newVisibility);\r\n      props.showLayer(item.name, value);\r\n      if (\r\n        value &&\r\n        (item.name === \"bing\" || item.name === \"kazgeo\" || item.id === \"garysh\")\r\n      ) {\r\n        props.setDark(true);\r\n      } else if (value && item.name === \"base\") {\r\n        props.setDark(false);\r\n      }\r\n    },\r\n    [props, visibility]\r\n  );\r\n\r\n  const handleSliderClick = useCallback((name, e) => {\r\n    setSliderName(name);\r\n    setOpenSlider(true);\r\n    setViewportOffset(e.target.getBoundingClientRect().top);\r\n  }, []);\r\n\r\n  const handleRefresh = () => {\r\n    console.log(\"handleRefresh\");\r\n  };\r\n\r\n  return (\r\n    props.open && (\r\n      <LayersWrapper palette={props.theme}>\r\n        <div className=\"container\">\r\n          {openSlider && props.open && (\r\n            <Slider\r\n              theme={props.theme}\r\n              handleCloseSlider={() => setOpenSlider(false)}\r\n              defaultValue={opacity[sliderName] ? opacity[sliderName] : 100}\r\n              handleSliderChange={handleOpacityChange.bind(this, sliderName)}\r\n              viewportOffset={viewportOffset}\r\n            />\r\n          )}\r\n          {LAYERS(props.region || null).map((group, i) => (\r\n            <Collapsible\r\n              key={i}\r\n              transitionTime={200}\r\n              trigger={\r\n                <Trigger palette={props.theme}>\r\n                  {group.title}\r\n                  <svg\r\n                    className=\"expandedIcon\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"18\"\r\n                    height=\"18\"\r\n                    viewBox=\"0 0 18 18\"\r\n                  >\r\n                    <path d=\"M12.44 6.44L9 9.88 5.56 6.44 4.5 7.5 9 12l4.5-4.5z\" />\r\n                  </svg>\r\n                </Trigger>\r\n              }\r\n              open={expanded[i]}\r\n              onOpening={() => handleExpanded(i, true)}\r\n              onClosing={() => handleExpanded(i, false)}\r\n            >\r\n              {group.items.map((item, j) => (\r\n                <Row\r\n                  key={j}\r\n                  sublayers={item.sublayers}\r\n                  theme={props.theme}\r\n                  child={item.parent}\r\n                  needsCheckboxes={item.name === \"req\"}\r\n                  // Checkbox / Radio props\r\n                  isCheckbox={!group.radio}\r\n                  isChecked={\r\n                    visibility[item.name] ? visibility[item.name] : false\r\n                  }\r\n                  checkHandler={\r\n                    [\"zo\"].includes(item.name)\r\n                      ? () => {}\r\n                      : () => handleVisibilityChange2(group, item)\r\n                  }\r\n                  // HandleRefresh props\r\n                  handleRefresh={handleRefresh}\r\n                  // LayerIcon props\r\n                  layerName={item.name}\r\n                  layerText={item.title}\r\n                  region={props.region}\r\n                  // ListButton props\r\n                  hasListButton={\r\n                    ![\r\n                      \"redlines\",\r\n                      \"func\",\r\n                      \"base\",\r\n                      \"bing\",\r\n                      \"kazgeo\",\r\n                      \"garysh\",\r\n                      \"lands_label\",\r\n                      \"buildings_label\"\r\n                    ].includes(item.name)\r\n                  }\r\n                  listButtonVisible={visibility[item.name]}\r\n                  listButtonHandler={() =>\r\n                    props.handleGetLayerObjects(item.name, visibility[\"arrest\"])\r\n                  }\r\n                  // OpacityButton props\r\n                  menuId={`menu${item.id}`}\r\n                  handleOpacityButtonClick={e =>\r\n                    handleSliderClick(item.name, e)\r\n                  }\r\n                  opacityButtonId={`opacity-button-${j}`}\r\n                  tooltipType={props.dark ? \"light\" : \"dark\"}\r\n                  opacityValue={Math.round(\r\n                    opacity[item.name] ? opacity[item.name] : 100\r\n                  )}\r\n                />\r\n              ))}\r\n            </Collapsible>\r\n          ))}\r\n        </div>\r\n      </LayersWrapper>\r\n    )\r\n  );\r\n}\r\n\r\nexport default EknMapLayers;\r\n","import React from \"react\";\r\n\r\nconst Type = Object.freeze({\r\n  string: 1,\r\n  date: 2,\r\n  area_m2: 3,\r\n  area_ga: 4,\r\n  length: 5,\r\n  cost_kzt: 6,\r\n  capacity_kwt: 7,\r\n  capacity_gcal_h: 8,\r\n  capacity_m3_h: 9,\r\n  FNT: 10,\r\n  closed: 11,\r\n  hidden: 12,\r\n  link: 13,\r\n  area_m2only: 14\r\n});\r\n\r\nexport const Properties = {\r\n  lands: {\r\n    getTitle: props =>\r\n      (props.kad_nomer ? props.kad_nomer : \"\") +\r\n      (props.address_ru ? \", \" + props.address_ru : \"\") + (props.rka ? \", РКА \" + props.rka : \"\"),\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              kad_nomer: [<>Кадастровый номер</>],\r\n              address_ru: [<>Адрес<br />(местоположение)</>],\r\n              category_rus: [<>Категория земель</>],\r\n              pravo_rus: [<>Вид права</>],\r\n              tsn_rus: [<>Целевое назначение</>],\r\n              shape_leng: [<>Длина<br />периметра</>,Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        getTitle: () => <>Правообладатели</>,\r\n        getItems: props => props.owners,\r\n        groups: [\r\n          {\r\n            getTitle: () => <>Правообладатель</>,\r\n            props: {\r\n              owner_name: [<>Наименование</>],\r\n              owner_iin_bin: [<>БИН</>]\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        getTitle: () => <>Аресты</>,\r\n        getItems: props => props.arrests,\r\n        groups: [\r\n          {\r\n            getTitle: props => props.rt_name_ru,\r\n            props: {\r\n              org: [<>Заинтересованное<br />лицо</>],\r\n              date_start: [<>Дата начала</>],\r\n              date_end: [<>Дата окончания</>],\r\n              doc_name: [<>Наименование ПД</>],\r\n              doc_num: [<>Номер ПД</>],\r\n              doc_date: [<>Дата ПД</>]\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        getTitle: () => <>Обременения</>,\r\n        getItems: props => props.obrems,\r\n        groups: [\r\n          {\r\n            getTitle: props => props.rt_name_ru,\r\n            props: {\r\n              org: [<>Заинтересованное<br />лицо</>],\r\n              date_start: [<>Дата начала</>],\r\n              date_end: [<>Дата окончания</>],\r\n              doc_name: [<>Наименование ПД</>],\r\n              doc_num: [<>Номер ПД</>],\r\n              doc_date: [<>Дата ПД</>]\r\n            }\r\n          }\r\n        ]\r\n      },\r\n    ]\r\n  },\r\n\r\n\r\n  free: {\r\n    getTitle: props => props.address_rus || \"\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              address_rus: [<>Адрес<br />(местоположение)</>],\r\n              lot_number: [<>Номер лота</>],\r\n              target_rus: [<>Целевое назначение</>],\r\n              purpose_use_name_ru: [<>Цель использования</>],\r\n              func_use_name_ru: [<>Функциональное назначение</>],\r\n              area: [<>Площадь</>, Type.area_ga],\r\n              right_type_name_ru: [<>Наименование права</>],\r\n              rent_condition_rus: [<>Условие аренды</>],\r\n              cadastre_cost: [<>Кадастровая стоимость</>, Type.cost_kzt],\r\n              start_cost: [<>Первоначальная стоимость</>, Type.cost_kzt],\r\n              tax_cost: [<>Налоговая стоимость</>, Type.cost_kzt],\r\n              auction_time: [<>Дата проведения аукциона</>],\r\n              auction_place_rus: [<>Место проведения аукциона</>],\r\n              request_address_rus: [<>Адрес приема заявлений</>],\r\n              publish_date: [<>Дата публикации</>],\r\n              comment_rus: [<>Описание</>]\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        getTitle: () => <>ТУ</>,\r\n        groups: [\r\n          {\r\n            getTitle: () => <>Электроснабжение</>,\r\n            props: {\r\n              elektr_power: [<>Выделяемая мощность (лимит)</>, Type.capacity_kwt],\r\n              elektr_faza_1: [<>Характер нагрузки: Однофазная</>, Type.capacity_kwt],\r\n              elektr_faza_3: [<>Характер нагрузки: Трехфазная</>,Type.capacity_kwt]\r\n            }\r\n          },\r\n          {\r\n            getTitle: () => <>Водоснабжение</>,\r\n            props: {\r\n              water_power: [<>Общая потребность в воде (лимит)</>, Type.capacity_m3_h],\r\n              water_hoz: [<>На хозпитьевые нужды</>, Type.capacity_m3_h],\r\n              water_production: [<>На производственные нужды</>,Type.capacity_m3_h]\r\n            }\r\n          },\r\n          {\r\n            getTitle: () => <>Канализационная система</>,\r\n            props: {\r\n              sewerage_power: [<>Общее количество сточных вод</>, Type.capacity_m3_h],\r\n              sewerage_fecal: [<>Фекальных</>, Type.capacity_m3_h],\r\n              sewerage_production: [<>Производственно-загрязненных</>, Type.capacity_m3_h],\r\n              sewerage_clean: [<>Условно-чистых сбрасываемых на городскую канализацию</>, Type.capacity_m3_h]\r\n            }\r\n          },\r\n          {\r\n            getTitle: () => <>Теплоснабжение</>,\r\n            props: {\r\n              heat_power: [<>Общая тепловая нагрузка (лимит)</>, Type.capacity_gcal_h],\r\n              heat_firing: [<>Отопление</>, Type.capacity_gcal_h],\r\n              heat_ventilation: [<>Вентиляция</>, Type.capacity_gcal_h],\r\n              heat_hot_water: [<>Горячее водоснабжение</>, Type.capacity_gcal_h]\r\n            }\r\n          },\r\n          {\r\n            props: {\r\n              category_name: [<>Ливневая канализация</>]\r\n            }\r\n          },\r\n          {\r\n            props: {\r\n              telekom: [<>Телефонизация</>]\r\n            }\r\n          },\r\n          {\r\n            getTitle: () => <>Газоснабжение</>,\r\n            props: {\r\n              gas_power: [<>Общая потребность (лимит)</>, Type.capacity_m3_h],\r\n              gas_on_cooking: [<>На приготовление пищи</>, Type.capacity_m3_h],\r\n              gas_heating: [<>Газ отопление</>, Type.capacity_m3_h],\r\n              gas_ventilation: [<>Вентиляция</>, Type.capacity_m3_h],\r\n              gas_conditioning: [<>Кондиционирование</>, Type.capacity_m3_h],\r\n              gas_hot_water: [<>Горячее водоснабжение при газификации многоэтажных домов</>, Type.capacity_m3_h]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  buildings: {\r\n    getTitle: props => props.address_ru || \"\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              stor_num: [<>Этажность</>],\r\n              caption: [<>Категория<br />фонда</>],\r\n              name: [<>Наименование</>],\r\n              litera: [<>Литера</>],\r\n              funce_purp: [<>Функционально<br />назначение</>],\r\n              shape_leng: [<>Длина<br />периметра</>,Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2only]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  eval: {\r\n    getTitle: props => \"Оценочная зона \" + props.nzona,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              nzona: [<>Номер зоны</>],\r\n              price: [<>Базовая ставка</>, Type.cost_kzt],\r\n              coef: [<>Поправочный коэффициент</>],\r\n              shape_leng: [<>Длина<br />периметра</>,Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  req: {\r\n    getTitle: props => props.address_ru || \"\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              id: [<>Идентификатор</>],\r\n              address_ru: [<>Адрес</>],\r\n              pravo_rus: [<>Вид права</>],\r\n              category_r: [<>Категория земель</>],\r\n              purpose_use_name_ru: [<>Цель использования</>],\r\n              tsn_rus: [<>Функциональное назначение</>],\r\n              datecreate: [<>Дата создания</>],\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        getTitle: () => <>Документы</>,\r\n        getItems: props => props.docs,\r\n        groups: [\r\n          {\r\n            props: {\r\n              file_name: [<></>, Type.link]\r\n            }\r\n          }\r\n        ]\r\n      },\r\n    ]\r\n  },\r\n\r\n  pch: {\r\n    getTitle: props => props.label || \"\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              label: [<>Шифр</>],\r\n              ts_name_ru: [<>Наименование (рус)</>],\r\n              ts_name_kz: [<>Наименование (каз)</>],\r\n              desc_: [<>Описание</>],\r\n              mcs_name_ru: [<>Мех состав</>],\r\n              ball_b: [<>Балл бонитета</>],\r\n              shape_area: [<>Площадь</>, Type.area_m2],\r\n              shape_length: [<>Периметр</>, Type.length]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  rst: {\r\n    getTitle: props => props.bg_name_ru || \"Нет значения\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              bg_name_ru: [<>Наименование (рус)</>],\r\n              bg_name_kz: [<>Наименование (каз)</>],\r\n              uroj: [<>Урожай</>],\r\n              shape_area: [<>Площадь</>, Type.area_m2],\r\n              shape_length: [<>Периметр</>, Type.length]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  ugl: {\r\n    getTitle: props => props.name || \"С/х угодие\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              name: [<>Наименование</>],\r\n              shape_length: [<>Длина</>, Type.length],\r\n              shirina: [<>Ширина</>, Type.length]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  ugpol: {\r\n    getTitle: props => props.name || \"С/х угодие\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              name: [<>Наименование</>],\r\n              shape_length: [<>Периметр</>, Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  func: {\r\n    getTitle: props => props.name || \"Функциональная зона\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              name: [<>Наименование</>],\r\n              category: [<>Категория</>],\r\n              descritpio: [<>Описание</>],\r\n              shape_leng: [<>Периметр</>, Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  pdp: {\r\n    getTitle: props => props.pc_name_ru || \"ПДП\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              name: [<>Описание</>],\r\n              shape_length: [<>Периметр</>, Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  gp: {\r\n    getTitle: props => props.id || \"Генеральный план\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              id: [<>Идентификатор</>],\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  inv: {\r\n    getTitle: props => props.note || \"Граница инвентаризации\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  vop: {\r\n    getTitle: () => \"Водоохранная полоса\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              shape_length: [<>Периметр</>, Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  voz: {\r\n    getTitle: () => \"Водоохранная зона\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              shape_length: [<>Периметр</>, Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  water: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  gas: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  storm_water: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  con: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  heat: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  sewer: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  electr: {\r\n    getTitle: props => props.gid,\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  redlines: {\r\n    getTitle: () => \"Красные линии\",\r\n    tabs: [\r\n      {\r\n        getTitle: () => <>Сведения</>,\r\n        groups: [\r\n          {\r\n            props: {\r\n              shape_length: [<>Периметр</>, Type.length],\r\n              shape_area: [<>Площадь</>, Type.area_m2]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n\r\n  formatValue: (value, type, href) => {\r\n    switch (type) {\r\n      case Type.area_m2:\r\n        return <>{value ? Number(value).toFixed(2) : 0} м.<sup>2</sup> ({value ? (Number(value)/10000).toFixed(4) : 0} га.)</>;\r\n      case Type.area_m2only:\r\n        return <>{value ? Number(value).toFixed(2) : 0} м.<sup>2</sup></>;\r\n      case Type.area_ga:\r\n        return <>{value ? (Number(value) * 10000).toFixed(2) : 0} м.<sup>2</sup> ({value ? (value).toFixed(4) : 0} га.)</>;\r\n      case Type.length:\r\n        return <>{value ? Number(value).toFixed(2) : 0} м.</>;\r\n      case Type.cost_kzt:\r\n        return <>{value ? Number(value).toFixed(0) : 0} тг.</>;\r\n      case Type.capacity_kwt:\r\n        return <>{value} кВт.</>;\r\n      case Type.capacity_gcal_h:\r\n        return <>{value} ГКал./ч.</>;\r\n      case Type.capacity_m3_h:\r\n        return <>{value} м.<sup>3</sup>/ч.</>;\r\n      case Type.link:\r\n        return <a href={href} target=\"_blank\" className=\"doc-link\" rel=\"noopener noreferrer\">Скачать</a>\r\n      default:\r\n        return <>{value}</>;\r\n    }\r\n  }\r\n};\r\n","import React, { useState, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst BottomBar = styled.div`\r\n  background-color: ${props => props.palette.additional};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  p {\r\n    margin: 0 6px;\r\n    display: inline-block;\r\n    font: 400 12px Arial;\r\n    color: ${props => props.palette.text};\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  border: none;\r\n  outline: none;\r\n  cursor: pointer;\r\n  padding: 2px 4px;\r\n  margin: 4px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 5px;\r\n  margin-left: 6px;\r\n  text-transform: uppercase;\r\n  background: ${props => props.palette.secondary};\r\n  color: ${props => props.palette.text};\r\n  &:hover {\r\n    background: ${props => props.palette.turq};\r\n  }\r\n  svg {\r\n    fill: ${props => props.palette.text};\r\n  }\r\n`;\r\n\r\nconst PageNav = props => {\r\n  const [pageNum, setPageNum] = useState(0);\r\n\r\n  const handleNextPage = useCallback(() => {\r\n    props.getObjects.func(pageNum + 1);\r\n    setPageNum(pageNum + 1);\r\n  }, [props, pageNum]);\r\n\r\n  const handlePrevPage = useCallback(() => {\r\n    props.getObjects.func(pageNum - 1);\r\n    setPageNum(pageNum - 1);\r\n  }, [props, pageNum]);\r\n\r\n  return (\r\n    <BottomBar palette={props.theme}>\r\n      {pageNum > 0 && (\r\n        <Button onClick={handlePrevPage} palette={props.theme}>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path d=\"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z\" />\r\n          </svg>\r\n        </Button>\r\n      )}\r\n      <p>Страница {pageNum + 1}</p>\r\n      <Button onClick={handleNextPage} palette={props.theme}>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z\" />\r\n        </svg>\r\n      </Button>\r\n      {/*\r\n      <Button palette={props.theme}>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z\" />\r\n        </svg>\r\n      </Button>\r\n      */}\r\n    </BottomBar>\r\n  );\r\n};\r\n\r\nexport default PageNav;\r\n","import React, { useState } from \"react\";\r\nimport { WKT } from \"ol/format\";\r\n\r\nimport styled from \"styled-components\";\r\nimport Collapsible from \"react-collapsible\";\r\nimport { Properties as LayerProps } from \"./components/info/config\";\r\n\r\nimport PageNav from \"./components/PageNav\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nconst FeaturesWrapper = styled.div`\r\n#container {\r\n  max-height: 70vh;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  width: calc(100% + 5px);\r\n  &::-webkit-scrollbar {\r\n    background-color: ${props => props.palette.additional}\r\n    width: 5px;\r\n  }\r\n  &::-webkit-scrollbar-thumb {\r\n    background-color: ${props => props.palette.turq}\r\n    width: 5px;\r\n  }\r\n}\r\n\r\n`;\r\n\r\nconst CollapsibleContainer = styled.div`\r\n  background-color: ${props => props.palette.primary};\r\n  * {\r\n    margin: 0;\r\n  }\r\n  color: ${props => props.palette.text};\r\n  font: 400 12px Arial;\r\n  width: 400px;\r\n  min-width: 400px;\r\n  .row-wrapper {\r\n    background-color: ${props => props.palette.additional};\r\n    padding-bottom: 12px;\r\n  }\r\n  .Collapsible__contentOuter {\r\n    background: ${props => props.palette.additional};\r\n  }\r\n`;\r\n\r\nconst Trigger = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 10% 75% 15%;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  padding: 5px 8px 5px 8px;\r\n  height: 55px;\r\n  background-color: ${props =>\r\n    props.expanded ? props.palette.additional : props.palette.primary};\r\n  * {\r\n    margin: 2px;\r\n  }\r\n  p:first-child {\r\n    font-size: 14px;\r\n    text-align: center;\r\n  }\r\n  border-top: 1px solid ${props => props.palette.additional};\r\n  &:hover {\r\n    background: ${props => props.palette.additional};\r\n`;\r\n\r\nconst ButtonsAndGoTo = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .tab-buttons {\r\n    display: flex;\r\n    overflow-x: auto;\r\n    padding-right: 5px;\r\n    &::-webkit-scrollbar {\r\n      background-color: ${props => props.palette.accent}\r\n      height: 5px;\r\n      border-radius: 2px;\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      background-color: ${props => props.palette.turq}\r\n      height: 5px;\r\n      border-radius: 2px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Download = styled.div`\r\n  margin: 0 6px;\r\n  padding: 5px 8px 5px 8px;\r\n  text-align: right;\r\n  a {\r\n    color: ${props => props.palette.text} !important;\r\n    text-align: right;\r\n    &:visited {\r\n      color: ${props => props.palette.primary};\r\n    }\r\n  }\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: grid;\r\n  box-sizing: border-box;\r\n  grid-template-columns: 50% 45%;\r\n  grid-gap: 5px;\r\n  background: ${props => props.palette.secondary};\r\n  margin: 0 6px;\r\n  color: ${props => props.palette.text};\r\n  font-style: normal;\r\n  padding: 5px 8px 5px 8px;\r\n  border-bottom: 1px solid ${props => props.palette.additional};\r\n  &:last-of-type {\r\n    border-radius: 0 0 5px 5px;\r\n  }\r\n  p {\r\n    font-size: 14px;\r\n    font-family: Calibri;\r\n  }\r\n  p:first-of-type {\r\n    font-style: italic;\r\n  }\r\n  .doc-link {\r\n    color: ${props => props.palette.text} !important;\r\n    float: right;\r\n    &:visited {\r\n      color: ${props => props.palette.primary};\r\n  }\r\n`;\r\n\r\nconst GroupName = styled.div`\r\n  background: ${props => props.palette.secondary};\r\n  p {\r\n    margin: 0 12px;\r\n  }\r\n  margin: 0px 6px 0px 6px;\r\n  color: ${props => props.palette.text};\r\n  font-size: 16px;\r\n  padding: 8px 5px 4px 24px;\r\n  border-bottom: 1px solid ${props => props.palette.accent};\r\n`;\r\n\r\nconst Tabs = styled.div`\r\n  background-color: ${props => props.palette.additional};\r\n  margin: 12px 6px;\r\n  padding: 6px;\r\n  border: 1px solid ${props => props.palette.secondary};\r\n  border-radius: 5px;\r\n  svg {\r\n    fill: ${props => props.palette.text};\r\n    float: right;\r\n    width: 20px;\r\n    padding: 2px 5px;\r\n    margin: 5px 5px 10px 5px;\r\n    background: ${props => props.palette.secondary};\r\n    border-radius: 5px;\r\n    :hover {\r\n      cursor: pointer;\r\n      background: #2ea297;\r\n    }\r\n  }\r\n  .group-wrapper {\r\n    padding-bottom: 6px;\r\n    border-top: 1px solid ${props => props.palette.additional};\r\n    &:first-of-type {\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n  .passport {\r\n    margin: 6px;\r\n    padding: 5px 8px 5px 8px;\r\n    text-align: right;\r\n    font-style: underline;\r\n  }\r\n`;\r\n\r\nconst Line = styled.div`\r\n  height: 4px;\r\n  width: 80%;\r\n  margin: 0 6px;\r\n  background-color: ${props => props.palette.additional};\r\n`;\r\n\r\nconst Button = styled.button`\r\n  font-size: 12px;\r\n  outline: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  padding: 8px 12px;\r\n  border-radius: 5px;\r\n  margin: 5px 5px 10px 0px;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  background: ${props =>\r\n    props.isActive ? props.palette.turq : props.palette.secondary};\r\n  background: ${props => (props.isArrestButton ? \"#660000\" : null)};\r\n  background: ${props =>\r\n    props.isArrestButton && props.isActive ? \"#990000\" : null};\r\n  color: ${props => props.palette.text};\r\n  &:hover {\r\n    background: ${props => props.palette.turq};\r\n    background: ${props => (props.isArrestButton ? \"#990000\" : null)};\r\n  }\r\n  .react-tooltip {\r\n    text-transform: none;\r\n  }\r\n`;\r\n\r\nfunction ObjectsInfoTable(props) {\r\n  const [activeTab, setActiveTab] = useState();\r\n  const [activeObj, setActiveObj] = useState();\r\n\r\n  const getTabContent = (objProps, layerName, obj) => {\r\n    if (activeTab) {\r\n      const items = activeTab.getItems\r\n        ? activeTab.getItems(objProps)\r\n        : [objProps];\r\n      if (\r\n        objProps.owners &&\r\n        !objProps.owners.length &&\r\n        activeTab.getItems &&\r\n        activeTab.getTitle().props.children === \"Правообладатели\"\r\n      ) {\r\n        return (\r\n          <GroupName palette={props.theme}>\r\n            Информация о правообладателях отсутствует\r\n          </GroupName>\r\n        );\r\n      } else if (\r\n        objProps.obrems &&\r\n        !objProps.obrems.length &&\r\n        activeTab.getItems &&\r\n        activeTab.getTitle().props.children === \"Обременения\"\r\n      ) {\r\n        return (\r\n          <GroupName palette={props.theme}>\r\n            Информация об обременениях отсутствует\r\n          </GroupName>\r\n        );\r\n      } else if (\r\n        objProps.docs &&\r\n        !objProps.docs.length &&\r\n        activeTab.getItems &&\r\n        activeTab.getTitle().props.children === \"Документы\"\r\n      ) {\r\n        return (\r\n          <GroupName palette={props.theme}>Документы отсутствуют</GroupName>\r\n        );\r\n      } else {\r\n        return items.map(item =>\r\n          activeTab.groups.map((group, i) => (\r\n            <div className=\"group-wrapper\" key={i}>\r\n              {group.getTitle ? (\r\n                <GroupName palette={props.theme}>\r\n                  <p>{group.getTitle(item)}</p>\r\n                </GroupName>\r\n              ) : (\r\n                <Line palette={props.theme} />\r\n              )}\r\n              {item[\"owner_type_person_id\"] === \"001\" ? (\r\n                <Row palette={props.theme}>Информация скрыта</Row>\r\n              ) : (\r\n                Object.keys(group.props).map(key => {\r\n                  return (\r\n                    <Row palette={props.theme} key={key}>\r\n                      <p>\r\n                        {key === \"file_name\" && objProps.docs.length\r\n                          ? objProps.docs[0].file_name\r\n                          : group.props[key]\r\n                          ? group.props[key][0] || group.props[key]\r\n                          : key}\r\n                      </p>\r\n                      <p>\r\n                        {LayerProps.formatValue(\r\n                          item[key],\r\n                          group.props[key][1],\r\n                          objProps.docs && objProps.docs.length\r\n                            ? `${window.REST_URL}/map/passport?cadnum=${objProps.docs[0].id}`\r\n                            : null\r\n                        )}\r\n                      </p>\r\n                    </Row>\r\n                  );\r\n                })\r\n              )}\r\n            </div>\r\n          ))\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const displayButtons = (layerName, obj, arrestsChecked) => {\r\n    if (layerName !== \"lands\") {\r\n      return LayerProps[layerName].tabs.map(\r\n        (tab, i) =>\r\n          (!tab.getItems || tab.getItems(obj.properties)) && (\r\n            <Button\r\n              onClick={() => setActiveTab(tab)}\r\n              palette={props.theme}\r\n              isActive={activeTab === tab}\r\n              key={i}\r\n              data-tip\r\n              data-for={`button-tooltip-${i}`}\r\n            >\r\n              <ReactTooltip\r\n                className=\"react-tooltip\"\r\n                id={`button-tooltip-${i}`}\r\n                delayShow={250}\r\n                type={props.dark ? \"light\" : \"dark\"}\r\n              >\r\n                Открыть вкладку \"{tab.getTitle()}\"\r\n              </ReactTooltip>\r\n              {tab.getTitle()}\r\n            </Button>\r\n          )\r\n      );\r\n    } else if (layerName === \"lands\") {\r\n      const hasArrests = Boolean(obj.properties.arrests.length);\r\n      if (!hasArrests || !arrestsChecked) {\r\n        return LayerProps[layerName].tabs\r\n          .filter((tab, i) => i !== 2)\r\n          .map(\r\n            (tab, i) =>\r\n              (!tab.getItems || tab.getItems(obj.properties)) && (\r\n                <Button\r\n                  onClick={() => setActiveTab(tab)}\r\n                  palette={props.theme}\r\n                  isActive={activeTab === tab}\r\n                  key={i}\r\n                  data-tip\r\n                  data-for={`button-tooltip-${i}`}\r\n                >\r\n                  <ReactTooltip\r\n                    className=\"react-tooltip\"\r\n                    id={`button-tooltip-${i}`}\r\n                    delayShow={250}\r\n                    type={props.dark ? \"light\" : \"dark\"}\r\n                  >\r\n                    Открыть вкладку \"{tab.getTitle()}\"\r\n                  </ReactTooltip>\r\n                  {tab.getTitle()}\r\n                </Button>\r\n              )\r\n          );\r\n      } else {\r\n        return LayerProps[layerName].tabs.map(\r\n          (tab, i) =>\r\n            (!tab.getItems || tab.getItems(obj.properties)) && (\r\n              <Button\r\n                onClick={() => setActiveTab(tab)}\r\n                palette={props.theme}\r\n                isActive={activeTab === tab}\r\n                key={i}\r\n                isArrestButton={i === 2}\r\n                data-tip\r\n                data-for={`button-tooltip-${i}`}\r\n              >\r\n                <ReactTooltip\r\n                  className=\"react-tooltip\"\r\n                  id={`button-tooltip-${i}`}\r\n                  delayShow={250}\r\n                  type={props.dark ? \"light\" : \"dark\"}\r\n                >\r\n                  Открыть вкладку \"{tab.getTitle()}\"\r\n                </ReactTooltip>\r\n                {tab.getTitle()}\r\n              </Button>\r\n            )\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  function createObject(layerName, obj, i) {\r\n    return (\r\n      <CollapsibleContainer palette={props.theme} key={obj.id}>\r\n        <Collapsible\r\n          transitionTime={200}\r\n          onOpening={() => {\r\n            setActiveObj(obj);\r\n            setActiveTab(LayerProps[layerName].tabs[0]);\r\n          }}\r\n          onClosing={() => {\r\n            if (obj === activeTab) {\r\n              setActiveObj(undefined);\r\n            }\r\n          }}\r\n          open={obj === activeObj}\r\n          trigger={\r\n            <Trigger\r\n              palette={props.theme}\r\n              expanded={obj === activeObj}\r\n              data-tip\r\n              data-for=\"learn-more\"\r\n            >\r\n              <p></p>\r\n              <p>\r\n                {LayerProps[layerName] && LayerProps[layerName].getTitle\r\n                  ? LayerProps[layerName].getTitle(obj.properties)\r\n                  : obj.id}\r\n              </p>\r\n              <ReactTooltip\r\n                id=\"learn-more\"\r\n                delayShow={250}\r\n                type={props.dark ? \"light\" : \"dark\"}\r\n              >\r\n                Узнать больше\r\n              </ReactTooltip>\r\n            </Trigger>\r\n          }\r\n        >\r\n          {obj === activeObj && (\r\n            <Tabs palette={props.theme}>\r\n              <ButtonsAndGoTo palette={props.theme}>\r\n                <div className=\"tab-buttons\">\r\n                  {displayButtons(layerName, obj, props.arrestIsChecked)}\r\n                </div>\r\n                <ReactTooltip\r\n                  id={`go-to-${i}`}\r\n                  delayShow={250}\r\n                  type={props.dark ? \"light\" : \"dark\"}\r\n                >\r\n                  Показать на карте\r\n                </ReactTooltip>\r\n                <svg\r\n                  data-tip\r\n                  data-for={`go-to-${i}`}\r\n                  onClick={() =>\r\n                    props.handleSelect(\r\n                      new WKT().readGeometryFromText(obj.geometry)\r\n                    )\r\n                  }\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  width=\"24\"\r\n                  height=\"24\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path d=\"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z\" />\r\n                </svg>\r\n              </ButtonsAndGoTo>\r\n              {(layerName === \"lands\" || layerName === \"buildings\") &&\r\n              obj.properties.passport_exists ? (\r\n                <Download palette={props.theme} download={true}>\r\n                  <p></p>\r\n                  <a\r\n                    href={`${window.REST_URL}/map/passport?cadnum=${obj.properties.kad_nomer}`}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    data-tip\r\n                    data-for={`download-tooltip-${i}`}\r\n                  >\r\n                    <ReactTooltip\r\n                      delayShow={250}\r\n                      type={props.dark ? \"light\" : \"dark\"}\r\n                      id={`download-tooltip-${i}`}\r\n                    >\r\n                      Открыть\r\n                    </ReactTooltip>\r\n                    Кадастровый паспорт\r\n                  </a>\r\n                </Download>\r\n              ) : layerName === \"lands\" || layerName === \"buildings\" ? (\r\n                <p className=\"passport\">Кадастровый паспорт отсутствует</p>\r\n              ) : null}\r\n              {getTabContent(obj.properties, layerName, obj)}\r\n            </Tabs>\r\n          )}\r\n        </Collapsible>\r\n      </CollapsibleContainer>\r\n    );\r\n  }\r\n  return (\r\n    <FeaturesWrapper palette={props.theme}>\r\n      <div id=\"container\">\r\n        {Object.keys(props.info).map(layer =>\r\n          props.info[layer].map((obj, i) => createObject(layer, obj, i))\r\n        )}\r\n      </div>\r\n      {props.getObjects.func && (\r\n        <PageNav getObjects={props.getObjects} theme={props.theme} />\r\n      )}\r\n    </FeaturesWrapper>\r\n  );\r\n}\r\n\r\nexport default ObjectsInfoTable;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Message = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 50px;\r\n  background-color: ${props => props.palette.primary};\r\n  color: ${props => props.palette.text};\r\n  font-family: Arial;\r\n  font-size: 14px;\r\n  z-index: 5;\r\n`;\r\n\r\nconst NoObj = props => (\r\n  <Message id=\"12\" palette={props.theme}>\r\n    По вашему запросу объектов не найдено\r\n  </Message>\r\n);\r\n\r\nexport default NoObj;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nconst Search = styled.div`\r\n  input {\r\n    box-sizing: border-box;\r\n    height: 36px;\r\n    background-color: ${props => props.palette.primary};\r\n    color: ${props => props.palette.text};\r\n    border: none;\r\n    outline: none;\r\n    width: 100%;\r\n    padding: 8px;\r\n    margin-bottom: 4px;\r\n  }\r\n  #search-tooltip {\r\n    font-family: Arial;\r\n    font-size: 12px;\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n\r\n\r\nexport default function SearchBar(props) {\r\n  return (\r\n    <Search\r\n      palette={props.theme}\r\n      data-tip\r\n      data-for=\"search-tooltip\"\r\n    >\r\n      <ReactTooltip id=\"search-tooltip\" effect=\"solid\" border type={props.dark ? \"light\" : \"dark\"}>Например: 12345689012 или ул. Байтурсынова 34</ReactTooltip>\r\n      <input\r\n        placeholder=\"Найти объект по кадастровому номеру / адресу\"\r\n        onKeyPress={e => {\r\n          if (e.charCode === 13) {\r\n            props.handleSearch(e.target.value);\r\n          }\r\n        }}\r\n      />\r\n    </Search>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ObjectsInfoTable from \"./ObjectsInfoTable\";\r\nimport NoObj from \"./components/NoObj\";\r\n\r\nimport styled from \"styled-components\";\r\nimport SearchBar from \"./components/SearchBar\";\r\n\r\nconst Wrapper = styled.div`\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  left: 56px;\r\n  top: 80px;\r\n  width: 400px;\r\n`;\r\n\r\nfunction EknMapInfo(props) {\r\n  const handleClose = () => {\r\n    props.setOpen();\r\n  };\r\n\r\n  const nothingFound = () => {\r\n    let resultEmpty = false;\r\n    if (Object.keys(props.searchResult).length === 0) {\r\n      resultEmpty = true;\r\n      return resultEmpty;\r\n    } else {\r\n      for (let prop in props.searchResult) {\r\n        resultEmpty = props.searchResult[prop].length === 0;\r\n        if (!resultEmpty) {\r\n          return resultEmpty;\r\n        }\r\n      }\r\n    }\r\n    return resultEmpty;\r\n  };\r\n\r\n  return (\r\n    props.open && (\r\n      <Wrapper onClose={handleClose}>\r\n        <SearchBar\r\n          handleSearch={props.handleSearch}\r\n          theme={props.theme}\r\n          dark={props.dark}\r\n        />\r\n        {nothingFound() && <NoObj theme={props.theme} />}\r\n        {props.searchResult && Object.keys(props.searchResult).length > 0 && (\r\n          <ObjectsInfoTable\r\n            info={props.searchResult}\r\n            map={props.map}\r\n            lyers={props.layers}\r\n            handleSelect={props.handleSelect}\r\n            getObjects={props.getObjects}\r\n            theme={props.theme}\r\n            arrestIsChecked={props.arrestIsChecked}\r\n            dark={props.dark}\r\n          />\r\n        )}\r\n      </Wrapper>\r\n    )\r\n  );\r\n}\r\n\r\nexport default EknMapInfo;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { WKT } from \"ol/format\";\r\n\r\nconst LandRequestDialog = styled.div`\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 46px;\r\n  right: 46px;\r\n  width: 250px;\r\n  font: 400 12px Arial;\r\n  color: ${props => props.palette.text};\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  form {\r\n    padding: 6px;\r\n    button {\r\n      margin-top: 4px;\r\n      padding: 0 4px;\r\n    }\r\n    background-color: ${props => props.palette.secondary};\r\n  }\r\n\r\n  #file-upload {\r\n    height: 1px;\r\n    width: 1px;\r\n    overflow: hidden;\r\n    clip: rect(0, 0, 0, 0);\r\n    z-index: -10;\r\n    background-color: ${props => props.palette.secondary};\r\n  }\r\n\r\n  #file-upload-label {\r\n    display:inline-block;\r\n    font-size: 12px;\r\n    padding: 5px;\r\n    margin: 2px 4px 2px -2px;\r\n    border-radius: 2px;\r\n    border: none;\r\n    outline: none;\r\n    background-color: ${props => props.palette.additional};\r\n    color: ${props => props.palette.text} !important;\r\n    flex: 1;\r\n    text-align: center;\r\n    :hover {\r\n      cursor: pointer;\r\n      background-color: ${props => props.palette.turq};\r\n      }\r\n  }\r\n\r\n  .table-row {\r\n    padding: 5px;\r\n    display: grid;\r\n    grid-template-columns: 10% 40% 40% 10%;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    overflow-x: hidden;\r\n    * {\r\n      margin: 2px;\r\n    }\r\n    input {\r\n      background-color: ${props => props.palette.secondary};\r\n      color: ${props => props.palette.text};\r\n      border: none;\r\n      outline: none;\r\n      width: 12ch;\r\n      border-bottom: 1px solid ${props => props.palette.additional};\r\n      &::placeholder {\r\n        color: ${props => props.palette.primary};\r\n      }\r\n      &:hover {\r\n        border-bottom: 1px solid ${props => props.palette.text};\r\n      }\r\n      &:focus {\r\n        border-bottom: 1px solid ${props => props.palette.text};\r\n      }\r\n    }\r\n    svg {\r\n      width: 100%;\r\n      text-align: center;\r\n      fill: ${props => props.palette.text};\r\n      &:hover {\r\n        background-color: ${props => props.palette.additional};\r\n        cursor: pointer;\r\n      }\r\n    }\r\n    background-color: ${props => props.palette.secondary};\r\n    &.table-header {\r\n      background-color: ${props => props.palette.primary};\r\n      font-weight: 600;\r\n    }\r\n  }\r\n\r\n  #scroll-wrapper {\r\n    width: 100%;\r\n    max-height: 204px;\r\n    overflow: auto;\r\n    scrollbar-color: ${props => props.palette.primary}\r\n      ${props => props.palette.additional};\r\n    &::-webkit-scrollbar {\r\n      width: 5px;\r\n      background-color: ${props => props.palette.additional};\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      width: 5px;\r\n      background-color: ${props => props.palette.primary};\r\n    }\r\n  }\r\n\r\n  #table-body {\r\n    background-color: ${props => props.palette.secondary};\r\n  }\r\n\r\n  .data-field {\r\n    * {\r\n      padding: 5px;\r\n    }\r\n    background-color: ${props => props.palette.secondary};\r\n    div {\r\n      background-color: ${props => props.palette.secondary};\r\n      sup {\r\n        padding: 1px;\r\n      }\r\n    }\r\n    h3 {\r\n      background-color: ${props => props.palette.primary};\r\n    }\r\n    p {\r\n      display: inline-block;\r\n    }\r\n    a {\r\n      color: ${props => props.palette.text} !important;\r\n      float: right;\r\n      &:visited {\r\n        color: ${props => props.palette.primary};\r\n      }\r\n    }\r\n    svg {\r\n      padding: 0;\r\n      fill: yellow;\r\n      float: right;\r\n    }\r\n  }\r\n\r\n  #buttons {\r\n    background-color: ${props => props.palette.primary};\r\n    padding: 5px;\r\n    * {\r\n      font-size: 12px;\r\n      padding: 5px;\r\n      margin: 0 10px;\r\n      border: none;\r\n      outline: none;\r\n      background-color: ${props => props.disabled ? props.palette.turq : props.palette.additional};\r\n      color: ${props => props.palette.text} !important;\r\n      flex: 1;\r\n      text-align: center;\r\n    }\r\n    *:hover {\r\n      cursor: pointer;\r\n      background-color: ${props => props.palette.secondary};\r\n    }\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    align-content: stretch;\r\n  }\r\n`;\r\n\r\nexport default function RequestDialog(props) {\r\n  const [coords, setCoords] = useState([]);\r\n  const [newCoord, setNewCoord] = useState([\"\", \"\"]);\r\n  const [area, setArea] = useState(0);\r\n  const [errIntersect, setErrIntersect] = useState(0);\r\n  const [cost, setCost] = useState(0.0);\r\n  const [orderUrl, setOrderUrl] = useState();\r\n  const [valuationUrl, setValuationUrl] = useState();\r\n  const [fileName, setFileName] = useState();\r\n\r\n  const handleChange = (event, i, j) => {\r\n    coords[i][j] = event.target.value;\r\n    setCoords(Object.assign([], coords));\r\n    coords.push(coords[0]);\r\n    props.features[0].getGeometry().setCoordinates([coords]);\r\n    setArea(props.features[0].getGeometry().getArea());\r\n  };\r\n\r\n  const handleRemove = i => {\r\n    coords.splice(i, 1);\r\n    setCoords(Object.assign([], coords));\r\n    coords.push(coords[0]);\r\n    props.features[0].getGeometry().setCoordinates([coords]);\r\n    setArea(props.features[0].getGeometry().getArea());\r\n  };\r\n\r\n  const handleRemoveAll = () => {\r\n    setCoords([]);\r\n    props.features[0].getGeometry().setCoordinates([]);\r\n    setCost(0.0);\r\n    setArea(0);\r\n    setErrIntersect(0);\r\n    setValuationUrl();\r\n  };\r\n\r\n  const handleChangeNew = (event, j) => {\r\n    newCoord[j] = event.target.value;\r\n    setNewCoord(Object.assign([], newCoord));\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    coords.push(newCoord);\r\n    setCoords(Object.assign([], coords));\r\n    coords.push(coords[0]);\r\n    props.features[0].getGeometry().setCoordinates([coords]);\r\n    setArea(props.features[0].getGeometry().getArea());\r\n    setNewCoord([\"\", \"\"]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.features.length > 0) {\r\n      setCoords(\r\n        props.features[0]\r\n          .getGeometry()\r\n          .getCoordinates()[0]\r\n          .slice(0, -1)\r\n      );\r\n      setArea(props.features[0].getGeometry().getArea());\r\n    } else {\r\n      setCoords([]);\r\n      setNewCoord([\"\", \"\"]);\r\n      setArea(0);\r\n    }\r\n  }, [props.features]);\r\n\r\n  useEffect(() => {\r\n    if (props.features.length > 0) {\r\n      const wkt = new WKT().writeGeometry(props.features[0].getGeometry());\r\n      fetch(window.REST_URL + \"/map/intersections?geom=\" + wkt, {\r\n        method: \"GET\",\r\n        mode: \"cors\",\r\n        credentials: \"include\"\r\n      })\r\n        .then(response => response.json())\r\n        .then(result => setErrIntersect(result.result));\r\n    }\r\n  }, [props.features]);\r\n\r\n  useEffect(() => {\r\n    if (props.features.length > 0) {\r\n      const srid = 3857;\r\n      const wkt = new WKT().writeGeometry(props.features[0].getGeometry());\r\n      fetch(window.REST_URL + \"/map/cost?geom=\" + wkt, {\r\n        method: \"GET\",\r\n        mode: \"cors\",\r\n        credentials: \"include\"\r\n      })\r\n        .then(response => response.json())\r\n        .then(result => setCost(result.result));\r\n\r\n      setOrderUrl(`${window.REST_URL}/map/report?srid=${srid}&geom=${wkt}`);\r\n      setValuationUrl(\r\n        `${window.REST_URL}/map/valuation?srid=${srid}&geom=${wkt}`\r\n      );\r\n    }\r\n  }, [props.features]);\r\n\r\n  const formatNumber = (n, dec) => {\r\n    let numAsString = n\r\n      .toFixed(dec)\r\n      .toString()\r\n      .replace(/\\./, \",\");\r\n    if (/\\d{4},/.test(numAsString)) {\r\n      numAsString = numAsString.replace(/(\\d)(?=\\d{3},)/, \"$1 \");\r\n    }\r\n    while (/^\\d{4}/g.test(numAsString)) {\r\n      numAsString = numAsString.replace(/(?=\\d)(\\d{3})(?=\\s)/, \" $1\");\r\n    }\r\n    return numAsString;\r\n  };\r\n\r\n  const handleFileUpload = event => {\r\n    const coordinateFile = event.target.files[0];\r\n    let reader = new FileReader();\r\n    reader.onload = e => {addCoordsFromFile(e.target.result); setFileName(coordinateFile.name)};\r\n    reader.readAsText(coordinateFile);\r\n  }\r\n\r\n  const addCoordsFromFile = text => {\r\n    const coords = text.split(\"\\n\").map(line => line.split(\" \").map(str => parseFloat(str)));\r\n    props.handleLoadFeature(coords);\r\n  }\r\n\r\n  return (\r\n    props.open && (\r\n      <LandRequestDialog palette={props.theme}>\r\n        <form >\r\n          <input type='file' id='file-upload' onChange={e => handleFileUpload(e)}></input>\r\n          <label htmlFor=\"file-upload\" id=\"file-upload-label\">Загрузить файл</label>\r\n          {fileName ? \r\n            <span>{fileName}</span> : null\r\n          }\r\n        </form>\r\n        <div id=\"table\">\r\n          <div className=\"table-row table-header\">\r\n            <div>&nbsp;</div>\r\n            <p>X-координаты</p>\r\n            <p>Y-координаты</p>\r\n            <div>\r\n              {coords.length > 0 && (\r\n                <svg\r\n                  onClick={() => handleRemoveAll()}\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  width=\"20\"\r\n                  height=\"20\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\r\n                </svg>\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div id=\"table-body\">\r\n            <div id=\"scroll-wrapper\">\r\n              {coords.map((coord, i) => (\r\n                <div className=\"table-row\" key={i}>\r\n                  <p>{i + 1}</p>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"1\"\r\n                    value={parseFloat(coord[0]).toFixed(2)}\r\n                    onChange={e => handleChange(e, i, 0)}\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"1\"\r\n                    value={parseFloat(coord[1]).toFixed(2)}\r\n                    onChange={e => handleChange(e, i, 1)}\r\n                  />\r\n                  <svg\r\n                    onClick={() => handleRemove(i)}\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"20\"\r\n                    height=\"20\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\r\n                  </svg>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"table-row\">\r\n          <div>&nbsp;</div>\r\n          <input\r\n            placeholder=\"Введите X\"\r\n            type=\"number\"\r\n            step=\"1\"\r\n            value={newCoord[0]}\r\n            onChange={e => handleChangeNew(e, 0)}\r\n          />\r\n          <input\r\n            placeholder=\"Введите Y\"\r\n            type=\"number\"\r\n            step=\"1\"\r\n            value={newCoord[1]}\r\n            onChange={e => handleChangeNew(e, 1)}\r\n          />\r\n          <svg\r\n            onClick={handleAdd}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\r\n          </svg>\r\n        </div>\r\n        <div className=\"data-field\">\r\n          <h3>Площадь</h3>\r\n\r\n          <div>\r\n            {formatNumber(area, 2)} м<sup>2</sup> ({formatNumber(area/10000, 4)} га.)\r\n          </div>\r\n        </div>\r\n        <div className=\"data-field\">\r\n          <h3>Оценочная стоимость</h3>\r\n          <p>{formatNumber(cost, 2)} тг</p>\r\n          {\r\n            valuationUrl && !errIntersect ?\r\n            <a href={valuationUrl} target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Скачать акт\r\n            </a> :\r\n            null\r\n          }\r\n        </div>\r\n        <div className=\"data-field error\">\r\n          {((errIntersect & 1) > 0 || (errIntersect & 2) > 0) && (\r\n            <h3>\r\n              Ошибки\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"18\"\r\n                height=\"18\"\r\n                viewBox=\"0 0 18 18\"\r\n              >\r\n                <path d=\"M.5 16h17L9 1 .5 16zm9.5-2H8v-2h2v2zm0-3H8V7h2v4z\" />\r\n              </svg>\r\n            </h3>\r\n          )}\r\n          {(errIntersect & 1) > 0 && <p>Наложение на существующий ЗУ!</p>}\r\n          {(errIntersect & 2) > 0 && <p>Наложение на красные линии!</p>}\r\n          {(errIntersect & 4) > 0 && <p>За пределами жилой зоны!</p>}\r\n        </div>\r\n        {\r\n          (valuationUrl && !errIntersect) ?\r\n          <div id=\"buttons\">\r\n            <a\r\n            role=\"button\"\r\n            href={orderUrl}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            >\r\n              Схема\r\n            </a>\r\n          <button onClick={() => { props.handleSend('02036031190920191659', 1);} }>Подать заявку</button>\r\n          </div> :\r\n          null\r\n        }\r\n        \r\n      </LandRequestDialog>\r\n    )\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport logo from \"../img/logo.png\";\r\n\r\nexport default function Header({ dark }) {\r\n  const textColor = dark ? \"white\" : \"black\";\r\n  const outlineColor = dark ? \"black\" : \"white\";\r\n\r\n  return (\r\n    <header\r\n      style={{\r\n        position: \"absolute\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        margin: 10,\r\n        padding: 0,\r\n        zIndex: 1\r\n      }}\r\n    >\r\n      <img\r\n        src={logo}\r\n        alt=\"\"\r\n        style={{\r\n          width: \"2em\",\r\n          backgroundColor: \"black\",\r\n          borderRadius: \"50%\",\r\n          border: `1px solid white`,\r\n          padding: 2,\r\n          filter: `invert(${dark ? \"100%\" : \"0%\"})`\r\n        }}\r\n      />\r\n      <span\r\n        style={{\r\n          fontFamily: \"Calibri\",\r\n          fontSize: \"18px\",\r\n          margin: 5,\r\n          fontWeight: 600,\r\n          color: textColor,\r\n          textShadow: `-1px -1px 0 ${outlineColor},\r\n                        1px -1px 0 ${outlineColor},\r\n                        -1px 1px 0 ${outlineColor},\r\n                        1px 1px 0 ${outlineColor}`\r\n        }}\r\n      >\r\n        ПУБЛИЧНАЯ КАДАСТРОВАЯ КАРТА\r\n      </span>\r\n    </header>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Collapsible from \"react-collapsible\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Legend = styled.div`\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 160px;\r\n  left: 56px;\r\n  width: 250px;\r\n  font: 400 12px Arial;\r\n\r\n  background-color: ${props => props.palette.primary};\r\n  color: ${props => props.palette.text};\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n  }\r\n  h4 {\r\n    font: 600 12px Arial;\r\n    padding: 5px;\r\n    &:hover {\r\n      cursor: default;\r\n    }\r\n  }\r\n  #container {\r\n    max-height: 60vh;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    &::-webkit-scrollbar {\r\n      width: 5px;\r\n      background-color: ${props => props.palette.additional};\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      width: 5px;\r\n      background-color: ${props => props.palette.primary};\r\n    }\r\n  }\r\n  .Collapsible {\r\n    .Collapsible__trigger {\r\n      div {\r\n        width: 250px;\r\n        padding: 5px;\r\n        font-weight: 600;\r\n        background-color: ${props => props.palette.additional};\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        border-bottom: 1px solid ${props => props.palette.secondary};\r\n        svg {\r\n          fill: ${props => props.palette.text};\r\n        }\r\n      }\r\n    }\r\n    .is-open {\r\n      div {\r\n        svg {\r\n          transform: rotate(180deg);\r\n          transition: transform 0.2s;\r\n        }\r\n      }\r\n    }\r\n    .is-closed {\r\n      div {\r\n        svg {\r\n          transform: rotate(0deg);\r\n          transition: transform 0.2s;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  padding: 2px 5px;\r\n  background-color: ${props => props.palette.secondary};\r\n  img {\r\n    width: 24px;\r\n  }\r\n  p {\r\n    margin-left: 5px;\r\n    font: 400 12px Arial;\r\n    &:hover {\r\n      background-color: inherit;\r\n      cursor: default;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ColorSquare = styled.div`\r\n  box-sizing: border-box;\r\n  width: 24px;\r\n  height: 24px;\r\n  background-color: ${props =>\r\n    props.backgroundColor ? props.backgroundColor : \"green\"};\r\n  border: 1px ${props => (props.borderStyle ? props.borderStyle : \"solid\")}\r\n    ${props => (props.borderColor ? props.borderColor : props.backgroundColor)};\r\n`;\r\n\r\nconst getValZones = () => {\r\n  const zoneColors = [\r\n    \"#FFD9CA\",\r\n    \"#CCFFEE\",\r\n    \"#FFC1B5\",\r\n    \"#FFB599\",\r\n    \"#EDC3A5\",\r\n    \"#FFDB99\",\r\n    \"#FFEF99\",\r\n    \"#FFFF99\",\r\n    \"#FFFFF3\",\r\n    \"#F1F1F1\",\r\n    \"#FDFDED\",\r\n    \"#FFF9EE\",\r\n    \"#C2EBDD\",\r\n    \"#FFF0E3\",\r\n    \"#F8F6DD\",\r\n    \"#F9F5D1\",\r\n    \"#E5E2C4\",\r\n    \"#F5F5FD\",\r\n    \"#EFE5EF\",\r\n    \"#F1D9F1\",\r\n    \"#F8CDF8\",\r\n    \"#E4D2D2\",\r\n    \"#D3F8D3\",\r\n    \"#D7EBAD\",\r\n    \"#F0DBA6\",\r\n    \"#D4C6F1\",\r\n    \"#EBBEBE\",\r\n    \"#FDCCC7\",\r\n    \"#FF9999\",\r\n    \"#D85BA9\",\r\n    \"#FF5AB3\",\r\n    \"#E69BB3\",\r\n    \"#F7BF8F\",\r\n    \"#DBC285\",\r\n    \"#7F7FFF\",\r\n    \"#7FDFDB\",\r\n    \"#C5FF6D\",\r\n    \"#4CFBB8\",\r\n    \"#76CA9B\",\r\n    \"#92B5F2\"\r\n  ];\r\n\r\n  const valZonesArray = zoneColors.map((color, i) => ({\r\n    name: `Оценочная зона ${i + 1}`,\r\n    backgroundColor: color,\r\n    borderColor: \"#A4A4A4\"\r\n  }));\r\n\r\n  return valZonesArray;\r\n};\r\n\r\nconst LegendLib = [\r\n  {\r\n    name: \"base\",\r\n    title: \"Базовая карта\",\r\n    items: [\r\n      {\r\n        name: \"Гидрография\",\r\n        backgroundColor: \"#87CEFA\"\r\n      },\r\n      {\r\n        name: \"Парки и скверы\",\r\n        backgroundColor: \"#90EE90\"\r\n      },\r\n      {\r\n        name: \"Улицы\",\r\n        icon: \"legend-img/streets.png\",\r\n        backgroundColor: \"#87CEFA\"\r\n      },\r\n      {\r\n        name: \"Железные дороги\",\r\n        icon: \"legend-img/railways.png\",\r\n        backgroundColor: \"#87CEFA\"\r\n      },\r\n      {\r\n        name: \"Шоссе\",\r\n        icon: \"legend-img/highways.png\",\r\n        backgroundColor: \"#87CEFA\"\r\n      },\r\n      {\r\n        name: \"Поселки\",\r\n        backgroundColor: \"#FBEED5\",\r\n        borderColor: \"#DFDBD1\"\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    name: \"oz\",\r\n    title: \"Оценочные зоны\",\r\n    items: getValZones()\r\n  },\r\n  {\r\n    name: \"planning\",\r\n    title: \"Функциональные зоны\",\r\n    items: [\r\n      {\r\n        name: \"Жилая зона\",\r\n        backgroundColor: \"#FFEBD5\"\r\n      },\r\n      {\r\n        name: \"Зона инж. и транс. инфр.\",\r\n        backgroundColor: \"#F7F7F7\"\r\n      },\r\n      {\r\n        name: \"Зона спец. назнач\",\r\n        backgroundColor: \"#F6DEFD\"\r\n      },\r\n      {\r\n        name: \"Общественно-деловая зона\",\r\n        backgroundColor: \"#FFD8CA\"\r\n      },\r\n      {\r\n        name: \"Производственная зона\",\r\n        backgroundColor: \"#E2E2E2\"\r\n      },\r\n      {\r\n        name: \"Рекреакционная зона\",\r\n        backgroundColor: \"#EAF7E5\"\r\n      },\r\n      {\r\n        name: \"Сельскохозяйственная зона\",\r\n        backgroundColor: \"#EDF9CC\"\r\n      },\r\n      {\r\n        name: \"Транспортно-ком. зона\",\r\n        backgroundColor: \"#EFD5CC\"\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nexport default function LegendWindow(props) {\r\n  const [expanded, setExpanded] = useState({});\r\n\r\n  const handleExpanded = (layer, value) => {\r\n    const x = {};\r\n    x[layer.name] = value;\r\n    setExpanded(Object.assign({}, expanded, x));\r\n  };\r\n\r\n  return (\r\n    props.open && (\r\n      <Legend palette={props.theme}>\r\n        <h4>Условные знаки</h4>\r\n        <div id=\"container\">\r\n          {LegendLib.map(layer => (\r\n            <Collapsible\r\n              key={layer.name}\r\n              trigger={\r\n                <div>\r\n                  {layer.title}\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"18\"\r\n                    height=\"18\"\r\n                    viewBox=\"0 0 18 18\"\r\n                  >\r\n                    <path d=\"M12.44 6.44L9 9.88 5.56 6.44 4.5 7.5 9 12l4.5-4.5z\" />\r\n                  </svg>\r\n                </div>\r\n              }\r\n              transitionTime={200}\r\n              easing=\"ease-out\"\r\n              open={expanded[layer.name]}\r\n              onOpening={() => handleExpanded(layer, true)}\r\n              onClosing={() => handleExpanded(layer, false)}\r\n            >\r\n              {layer.items.map(item => (\r\n                <Row key={item.name} palette={props.theme}>\r\n                  {item.icon ? (\r\n                    <img src={item.icon} alt=\"\" />\r\n                  ) : (\r\n                    <ColorSquare\r\n                      backgroundColor={item.backgroundColor}\r\n                      borderColor={item.borderColor}\r\n                      borderStyle={item.borderStyle}\r\n                    />\r\n                  )}\r\n                  <p>{item.name}</p>\r\n                </Row>\r\n              ))}\r\n            </Collapsible>\r\n          ))}\r\n        </div>\r\n      </Legend>\r\n    )\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Collapsible from \"react-collapsible\";\r\n\r\nconst RegionSelect = styled.div`\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 46px;\r\n  right: 46px;\r\n  width: 250px;\r\n  font: 400 12px Arial;\r\n  oveflow: hidden;\r\n  background-color: ${props => props.palette.primary};\r\n  color: ${props => props.palette.text};\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n  }\r\n  h4 {\r\n    font: 600 12px Arial;\r\n    padding: 5px;\r\n  }\r\n  p {\r\n    font: 400 12px Arial;\r\n    padding: 2px 5px;\r\n    background-color: ${props => props.palette.secondary};\r\n    margin: 0;\r\n  }\r\n  p:hover {\r\n    background-color: ${props => props.palette.additional};\r\n    cursor: pointer;\r\n  }\r\n  #container {\r\n    max-height: 60vh;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    &::-webkit-scrollbar {\r\n      width: 5px;\r\n      background-color: ${props => props.palette.additional};\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      width: 5px;\r\n      background-color: ${props => props.palette.primary};\r\n    }\r\n  }\r\n  .Collapsible {\r\n    .Collapsible__trigger {\r\n      div {\r\n        width: 250px;\r\n        padding: 5px;\r\n        font-weight: 600;\r\n        background-color: ${props => props.palette.primary};\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        border-bottom: 1px solid ${props => props.palette.secondary};\r\n        svg {\r\n          fill: ${props => props.palette.text};\r\n        }\r\n      }\r\n    }\r\n    .is-open {\r\n      div {\r\n        svg {\r\n          transform: rotate(180deg);\r\n          transition: transform 0.2s;\r\n        }\r\n      }\r\n    }\r\n    .is-closed {\r\n      div {\r\n        svg {\r\n          transform: rotate(0deg);\r\n          transition: transform 0.2s;\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function ChooseRegion(props) {\r\n  return (\r\n    <RegionSelect palette={props.theme}>\r\n      <div id=\"container\">\r\n        {props.regions.map(region => (\r\n          <Collapsible\r\n            key={region.code}\r\n            trigger={\r\n              <div>\r\n                {region.nameRu}\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  width=\"18\"\r\n                  height=\"18\"\r\n                  viewBox=\"0 0 18 18\"\r\n                >\r\n                  <path d=\"M12.44 6.44L9 9.88 5.56 6.44 4.5 7.5 9 12l4.5-4.5z\" />\r\n                </svg>\r\n              </div>\r\n            }\r\n            transitionTime={200}\r\n            easing=\"ease-out\"\r\n          >\r\n            {region.districts.map(district => (\r\n              <p\r\n                key={region.code + district.code}\r\n                onClick={() => {props.setRegion(district); props.showLayer('lands', true)}}\r\n              >\r\n                {district.nameRu}\r\n              </p>\r\n            ))}\r\n          </Collapsible>\r\n        ))}\r\n      </div>\r\n    </RegionSelect>\r\n  );\r\n}\r\n","var webSocket = null;\r\nvar heartbeatMsg = '--heartbeat--';\r\nvar heartbeatInterval = null;\r\n\r\nvar nca_callback = null;\r\n\r\n//var keyType = 'AUTH';\r\nvar storageAlias = 'PKCS12';\r\n\r\nfunction initNCALayer(callbackM) {\r\n\twebSocket = new WebSocket('wss://127.0.0.1:13579/');\r\n\r\n\twebSocket.onopen = function() {\r\n\t\tif (heartbeatInterval === null) {\r\n\t\t\theartbeatInterval = setInterval(pingLayer, 1000);\r\n\t\t}\r\n\t\tif (callbackM) {\r\n\t\t\tcallbackM();\r\n\t\t}\r\n\t};\r\n\r\n\twebSocket.onclose = function(event) {};\r\n\r\n\twebSocket.onmessage = function(event) {\r\n\t\tvar result;\r\n\t\tvar rw;\r\n\t\tif (event.data === heartbeatMsg) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tresult = JSON.parse(event.data);\r\n\t\trw = {\r\n\t\t\tresult: result.result,\r\n\t\t\tsecondResult: result.secondResult,\r\n\t\t\terrorCode: result.errorCode,\r\n\t\t\tcode: result.code,\r\n\t\t\tresponseObject: result.responseObject,\r\n\t\t\tmessage: result.message,\r\n\t\t\tgetResult: function() {\r\n\t\t\t\treturn this.result;\r\n\t\t\t},\r\n\t\t\tgetSecondResult: function() {\r\n\t\t\t\treturn this.secondResult;\r\n\t\t\t},\r\n\t\t\tgetErrorCode: function() {\r\n\t\t\t\treturn this.errorCode;\r\n\t\t\t},\r\n\t\t\tgetMessage: function () {\r\n\t\t\t\treturn this.message;\r\n\t\t\t},\r\n\t\t\tgetResponseObject: function () {\r\n\t\t\t\treturn this.responseObject;\r\n\t\t\t},\r\n\t\t\tgetCode: function () {\r\n\t\t\t\treturn this.code;\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (nca_callback)\r\n\t\t\tnca_callback(rw);\t\t\r\n\t};\r\n\t\r\n\twebSocket.onerror = function(event) {\r\n\t\topenNcaLayerError(\"Ошибка соединения с NCALayer!\");\r\n\t}\r\n}\r\n\r\nexport function chooseNCAStorageCall(callback) {\r\n\tif (webSocket === null || webSocket.readyState === 3 || webSocket.readyState === 2) {\r\n\t\tinitNCALayer(function() {\r\n\t\t\tchooseNCAStorageCall(callback);\r\n\t\t});\t\t\r\n\t} else {\r\n\t\t// signXmlNewCall(function(result) {\r\n\t\t// \tsignXmlNewBack(result);\r\n\t\t// });\r\n\t\tgetKeyInfo(function(result) {\r\n\t\t\tcallback(result);\r\n\t\t\t//webSocket.close();\r\n\t\t});\r\n\t}\t\r\n}\r\n\r\nfunction openNcaLayerError(message) {\r\n\talert(message ? message : 'Ошибка');\t\r\n}\r\n\r\n/*\r\nfunction signXmlNewCall(callbackM) {\r\n    var data = '<login>login</login>';\r\n    var args = [storageAlias, keyType, data, \"\", \"\"];\r\n    getDataNew('signXml', args, callbackM);    \r\n}\r\n\r\nfunction signXmlNewBack(result) {\r\n\tif (result) {\r\n\t\tif (result['code'] === \"500\") {\r\n\t\t\tif (result['message'] != null && result['message'] != 'action.canceled') {\r\n\t\t\t\topenNcaLayerError();\r\n\t\t\t}\r\n\t\t} else if (result['code'] === \"200\") {\r\n\t\t\tvar signedData = result['responseObject'];\r\n\t\t\tfillPersonData(signedData);\r\n\t\t\twebSocket.close();\r\n\t\t}\r\n\t}\r\n}\r\n*/\r\n\r\nfunction getKeyInfo(callbackM) {\r\n\tvar args = [storageAlias];\r\n\tgetDataNew('getKeyInfo', args, callbackM);\r\n}\r\n\r\n/*\r\nfunction getKeyInfoBack(result) {\r\n\tif (result) {\r\n\t\tif (result['code'] === \"500\") {\r\n\t\t\tif (result['message'] != null && result['message'] != 'action.canceled') {\r\n\t\t\t\topenNcaLayerError();\r\n\t\t\t}\r\n\t\t} else if (result['code'] === \"200\") {\r\n\t\t\tfillPersonData(result);\r\n\t\t\tfillOrgData(result);\r\n\t\t\twebSocket.close();\r\n\t\t}\r\n\t}\t\r\n}\r\n\r\nfunction fillPersonData(data) {\r\n\tvar responseObject = data.responseObject;\r\n\tvar subjectDn = responseObject.subjectDn;\r\n\tvar subjectAttrs = subjectDn.split(',');\r\n\tvar iin = findSubjectAttr(subjectAttrs, 'SERIALNUMBER').substr(3);\r\n\tvar email = findSubjectAttr(subjectAttrs, 'E');\r\n\tvar cn = findSubjectAttr(subjectAttrs, 'CN');\r\n\tcn = cn || '';\r\n\tvar middleName = findSubjectAttr(subjectAttrs, 'G');\r\n\tmiddleName = middleName || '';\r\n\tvar fullName = cn.concat(\" \").concat(middleName);\r\n  \r\n\tconsole.log(iin);\r\n\tconsole.log(email);\r\n\tconsole.log(fullName);\r\n}\r\n\r\nfunction fillOrgData(data) {\r\n\tvar responseObject = data.responseObject;\r\n\tvar subjectDn = responseObject.subjectDn;\r\n\tvar subjectAttrs = subjectDn.split(',');\r\n\tvar bin = findSubjectAttr(subjectAttrs, 'OU');\r\n\tvar organizationName = findSubjectAttr(subjectAttrs, 'O');\r\n  \tif (bin !== null) {\r\n\t  if (bin.length > 3) {\r\n\t\tbin = bin.substr(3);\r\n\t  }\r\n\t  console.log(bin);\r\n\t  console.log(organizationName);\r\n\t}\r\n}\r\n*/\r\n\r\nexport function findSubjectAttr(attrs, attr) {\r\n\tvar tmp;\r\n\tvar numb;\r\n  \r\n\tfor (numb = 0; numb < attrs.length; numb++) {\r\n\t  tmp = attrs[numb].replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n\t  if (tmp.indexOf(attr + '=') === 0) {\r\n\t\treturn tmp.substr(attr.length + 1);\r\n\t  }\r\n\t}\r\n  \r\n\treturn null;\r\n}\r\n\r\nfunction getDataNew(method, args, callbackM) {\r\n    var methodVariable = {\r\n        'module': 'kz.gov.pki.knca.commonUtils',\r\n        'method': method,\r\n        'args': args\r\n    };\r\n    if (callbackM) nca_callback = callbackM;\r\n    webSocket.send(JSON.stringify(methodVariable));\r\n}\r\n\r\nfunction pingLayer() {\r\n\ttry {\r\n\t  webSocket.send(heartbeatMsg);\r\n\t} catch (error) {\r\n\t  clearInterval(heartbeatInterval);\r\n\t  heartbeatInterval = null;\r\n\t  webSocket.close();\r\n\t}\r\n  }","export function formatDate(date) {\r\n  var dd = date.getDate();\r\n  var mm = date.getMonth() + 1; //January is 0!\r\n  \r\n  var yyyy = date.getFullYear();\r\n  if (dd < 10) {\r\n    dd = '0' + dd;\r\n  } \r\n  if (mm < 10) {\r\n    mm = '0' + mm;\r\n  } \r\n  return dd + '.' + mm + '.' + yyyy;\r\n}","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { chooseNCAStorageCall, findSubjectAttr } from \"../NCALayerOps\";\r\nimport { formatDate } from \"../util\";\r\n\r\nconst LoginWindow = styled.div`\r\n  position: absolute;\r\n  left: 37.5%;\r\n  top: 30%;\r\n  width: 400px;\r\n  padding: 15px 30px 15px 20px;\r\n  background-color: ${props => props.palette.primary};\r\n  color: ${props => props.palette.text};\r\n  & h1 {\r\n    margin: 12px;\r\n    font: 600 20px Arial;\r\n  }\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  margin: 2px;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  & p {\r\n    margin: 5px;\r\n    font: 400 14px Arial;\r\n  }\r\n  & input, h3 {\r\n    width: 70%;\r\n    margin: 0;\r\n    height: 18px;\r\n    font: 400 14px Arial;\r\n    background-color: ${props => props.palette.primary};\r\n    color: ${props => props.palette.text};\r\n    outline: none;\r\n    border: none;\r\n    border-bottom: 1px solid ${props => props.palette.text};\r\n    }\r\n  }\r\n  & div {\r\n    display: flex;\r\n    overflow-x: hidden;\r\n    width: 70%;\r\n  }\r\n`;\r\n\r\nconst ButtonContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n`;\r\n\r\nconst Button1 = styled.button`\r\n  background-color: ${props => props.palette.additional};\r\n  text-align: center;\r\n  margin: 12px 25px 15px 5px;\r\n  font: 600 14px Arial;\r\n  padding: 10px;\r\n  color: ${props => props.palette.text};\r\n  border: none;\r\n  outline: none;\r\n  &:hover {\r\n    background-color: ${props => props.palette.secondary};\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst Button2 = styled.button`\r\n  background-color: ${props => props.palette.additional};\r\n  text-align: center;\r\n  margin: 12px 0 15px 5px;\r\n  font: 600 14px Arial;\r\n  padding: 10px;\r\n  color: ${props => props.palette.text};\r\n  border: none;\r\n  outline: none;\r\n  &:hover {\r\n    background-color: ${props => props.palette.secondary};\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport default function LoginDialog(props) {\r\n  const [userInfo, setUserInfo] = useState({});\r\n\r\n  const handleLogin = () => {\r\n    props.setOpenLogin(false);\r\n    props.setUserInfo(userInfo);\r\n  };\r\n\r\n  const handleChooseCert = () => {\r\n    chooseNCAStorageCall(result => {\r\n      if (result) {\r\n        if (result.code === \"500\") {\r\n          if (result.message && result.message !== \"action.canceled\") {\r\n            //openNcaLayerError();\r\n          }\r\n        } else if (result.code === \"200\") {\r\n          const info = {};\r\n          var responseObject = result.responseObject;\r\n          var subjectDn = responseObject.subjectDn;\r\n          var subjectAttrs = subjectDn.split(\",\");\r\n          info.iin = findSubjectAttr(subjectAttrs, \"SERIALNUMBER\").substr(3);\r\n          info.email = findSubjectAttr(subjectAttrs, \"E\");\r\n          var cn = findSubjectAttr(subjectAttrs, \"CN\");\r\n          cn = cn || \"\";\r\n          var middleName = findSubjectAttr(subjectAttrs, \"G\");\r\n          middleName = middleName || \"\";\r\n          info.fullName = cn.concat(\" \").concat(middleName);\r\n\r\n          info.dateStart = formatDate(\r\n            new Date(parseInt(responseObject.certNotBefore))\r\n          );\r\n          info.dateEnd = formatDate(\r\n            new Date(parseInt(responseObject.certNotAfter))\r\n          );\r\n\r\n          setUserInfo(info);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <LoginWindow palette={props.theme}>\r\n      <h1>ЭЦП</h1>\r\n      <Row palette={props.theme}>\r\n        <p>ИИН</p>\r\n        <h3>{userInfo.iin}</h3>\r\n      </Row>\r\n      <Row palette={props.theme}>\r\n        <p>E-mail</p>\r\n        <h3>{userInfo.email}</h3>\r\n      </Row>\r\n      <Row palette={props.theme}>\r\n        <p>ФИО</p>\r\n        <h3>{userInfo.fullName}</h3>\r\n      </Row>\r\n      <Row palette={props.theme}>\r\n        <p>Срок действия</p>\r\n        <div>\r\n          <h3 style={{ marginRight: \"10px\" }}>{userInfo.dateStart}</h3>-\r\n          <h3 style={{ marginLeft: \"10px\" }}>{userInfo.dateEnd}</h3>\r\n        </div>\r\n      </Row>\r\n      <ButtonContainer palette={props.theme}>\r\n        <Button1 palette={props.theme} onClick={handleChooseCert}>\r\n          ВЫБРАТЬ СЕРТИФИКАТ\r\n        </Button1>\r\n        <Button2 palette={props.theme} onClick={handleLogin}>\r\n          ВХОД\r\n        </Button2>\r\n      </ButtonContainer>\r\n    </LoginWindow>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst UserInfo = styled.div`\r\n  position: absolute;\r\n  right: 46px;\r\n  top: 46px;\r\n  box-sizing: border-box;\r\n  padding: 8px;\r\n  color: ${props => props.palette.text};\r\n  text-align: end;\r\n  font: 400 14px Arial;\r\n  background-color: ${props => props.palette.additional};;\r\n  * {\r\n    margin: 0;\r\n  }\r\n  h2 {\r\n    width: 100%;\r\n    font: 400 14px Arial;\r\n    padding-bottom: 6px;\r\n    margin-bottom: 12px;\r\n    border-bottom: 1px solid ${props => props.palette.text};\r\n  }\r\n  div {\r\n    display: flex;\r\n    margin: 2px;\r\n    justify-content: space-between;\r\n    p {\r\n      font: 400 12px Arial;\r\n    }\r\n  }\r\n  }\r\n  button {\r\n    color: ${props => props.palette.text};\r\n    height: 25px;\r\n    border: none;\r\n    outline: none;\r\n    background-color: inherit;\r\n    text-decoration: underline;\r\n    &:hover {\r\n      cursor: pointer\r\n    }\r\n\r\n  }\r\n`;\r\n\r\nexport default function UserProfile({ userInfo, handleLogout, theme }) {\r\n  return (\r\n    <UserInfo palette={theme}>\r\n      <h2>{userInfo.fullName}</h2>\r\n      <div>\r\n        <p>ИИН</p>\r\n        <p>{userInfo.iin}</p>\r\n      </div>{\" \"}\r\n      <div>\r\n        <p>Email</p>\r\n        <p>{userInfo.email}</p>\r\n      </div>\r\n      <button\r\n        href=\"\"\r\n        onClick={event => {\r\n          handleLogout();\r\n          event.preventDefault();\r\n        }}\r\n      >\r\n        Выйти\r\n      </button>\r\n    </UserInfo>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nconst ButtonComp = styled.button`\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n  * {\r\n      margin: 0;\r\n  }\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: ${props => (props.title ? \"auto\" : \"36px\")};\r\n  height: 36px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  outline: none;\r\n  background-color: ${props => props.palette.additional};\r\n  color: ${props => props.palette.text}\r\n  &:hover {\r\n    background-color: ${props => props.palette.turq};\r\n  }\r\n  svg {\r\n      fill: ${props => props.palette.text};\r\n  }\r\n  .tooltip {\r\n    opacity: 1;\r\n    font-size: 12px;\r\n  }\r\n`;\r\n\r\nexport default function Button(props) {\r\n  return (\r\n    <ButtonComp\r\n      onClick={props.handleClick}\r\n      palette={props.theme}\r\n      style={positionButton(props.tooltipText)}\r\n      tooltipText={props.tooltipText}\r\n      data-tip\r\n      data-for={props.dataFor}\r\n      title={props.title}\r\n    >\r\n      {props.title ? (\r\n        <p>{props.title}</p>\r\n      ) : (\r\n        displaySvg(props.tooltipText, props.userInfo)\r\n      )}\r\n      <ReactTooltip\r\n        className=\"tooltip\"\r\n        delayShow={250}\r\n        id={props.tooltipText}\r\n        effect=\"solid\"\r\n        border={true}\r\n        type={props.tooltipDark ? \"light\" : \"dark\"}\r\n      >\r\n        {props.tooltipText}\r\n      </ReactTooltip>\r\n    </ButtonComp>\r\n  );\r\n}\r\n\r\nconst displaySvg = (tooltipText, userInfo) => {\r\n  switch (tooltipText) {\r\n    case \"Авторизоваться\":\r\n      if (userInfo) {\r\n        return (\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"18\"\r\n            height=\"18\"\r\n            viewBox=\"0 0 18 18\"\r\n          >\r\n            <path d=\"M9 8c1.66 0 2.99-1.34 2.99-3S10.66 2 9 2C7.34 2 6 3.34 6 5s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V16h14v-2.5c0-2.33-4.67-3.5-7-3.5z\" />\r\n          </svg>\r\n        );\r\n      } else {\r\n        return (\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path d=\"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" />\r\n          </svg>\r\n        );\r\n      }\r\n    case \"Подать заявку\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\" />\r\n        </svg>\r\n      );\r\n    case \"Поиск объекта\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" />\r\n        </svg>\r\n      );\r\n    case \"Управление картой\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z\" />\r\n        </svg>\r\n      );\r\n    case \"Условные обозначения\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\" />\r\n        </svg>\r\n      );\r\n    case \"Посмотреть статистику\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10zm2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99zm0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99h-8.97z\" />\r\n        </svg>\r\n      );\r\n    case \"Общий вид (Казахстан)\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z\" />\r\n        </svg>\r\n      );\r\n    case \"Приблизить\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\r\n        </svg>\r\n      );\r\n    case \"Отдалить\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M19 13H5v-2h14v2z\" />\r\n        </svg>\r\n      );\r\n    case \"Общий вид (регион)\":\r\n      return (\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"24\"\r\n          height=\"24\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path d=\"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z\" />\r\n        </svg>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nconst positionButton = tooltipText => {\r\n  switch (tooltipText) {\r\n    case \"Авторизоваться\":\r\n      return {\r\n        top: \"5px\",\r\n        right: \"5px\"\r\n      };\r\n    case \"Подать заявку\":\r\n      return {\r\n        top: \"45px\",\r\n        right: \"5px\"\r\n      };\r\n    case \"Выбрать регион\":\r\n      return {\r\n        top: \"5px\",\r\n        right: \"45px\"\r\n      };\r\n    case \"Поиск объекта\":\r\n      return {\r\n        top: \"80px\",\r\n        left: \"10px\"\r\n      };\r\n    case \"Управление картой\":\r\n      return {\r\n        top: \"120px\",\r\n        left: \"10px\"\r\n      };\r\n    case \"Условные обозначения\":\r\n      return {\r\n        top: \"160px\",\r\n        left: \"10px\"\r\n      };\r\n    case \"Посмотреть статистику\":\r\n      return {\r\n        top: \"200px\",\r\n        left: \"10px\"\r\n      };\r\n    case \"Общий вид (регион)\":\r\n      return {\r\n        bottom: \"90px\",\r\n        right: \"10px\"\r\n      };\r\n    case \"Приблизить\":\r\n      return {\r\n        bottom: \"50px\",\r\n        right: \"10px\"\r\n      };\r\n    case \"Отдалить\":\r\n      return {\r\n        bottom: \"10px\",\r\n        right: \"10px\"\r\n      };\r\n    case \"Общий вид (Казахстан)\":\r\n      return {\r\n        bottom: \"130px\",\r\n        right: \"10px\"\r\n      };\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","const getCoordSystem = (srs) => {\r\n  srs = srs.toString();\r\n  if (/(326)(\\d{2})$/g.test(srs)) {\r\n    return srs.replace(/(326)(\\d{2})$/g, \"WGS 84 / UTM-зона $2N\");\r\n  } else {\r\n    return 'WGS 84 / Pseudo-Mercator';\r\n  }\r\n  \r\n}\r\n\r\nexport default getCoordSystem;","import React, { useEffect, useCallback, useState } from \"react\";\r\n// import \"ol/ol.css\";\r\nimport \"./App.css\";\r\nimport { Map, View, Feature } from \"ol\";\r\nimport TileLayer from \"ol/layer/Tile\";\r\nimport VectorLayer from \"ol/layer/Vector\";\r\nimport { Vector, TileWMS, BingMaps } from \"ol/source\";\r\nimport { GeoJSON, WKT } from \"ol/format\";\r\nimport { MousePosition, OverviewMap, ScaleLine } from \"ol/control.js\";\r\nimport { Draw, Modify, Snap } from \"ol/interaction\";\r\nimport { bbox as bboxStrategy } from \"ol/loadingstrategy\";\r\nimport { Circle, Fill, Stroke, Style, Text } from \"ol/style.js\";\r\nimport { createStringXY } from \"ol/coordinate.js\";\r\nimport { MultiPoint, Polygon } from \"ol/geom\";\r\n\r\nimport EknMapLayers, { Config } from \"./components/Layers/EknMapLayers\";\r\nimport EknMapInfo from \"./EknMapInfo\";\r\nimport EknMapLandRequest from \"./EknMapLandRequest\";\r\nimport Header from \"./components/Header\";\r\nimport LegendWindow from \"./components/LegendWindow\";\r\nimport ChooseRegion from \"./components/ChooseRegion\";\r\nimport LoginDialog from \"./components/LoginDialog\";\r\nimport UserProfile from \"./components/UserProfile\";\r\nimport Button from \"./components/Button\";\r\nimport { transform } from \"ol/proj\";\r\nimport { register } from \"ol/proj/proj4\";\r\nimport proj4 from \"proj4\";\r\n\r\nimport getCoordSystem from \"./components/info/getCoordSystem\";\r\n\r\nimport \"./buttons.css\";\r\n\r\nconst MODE_SELECT = 0;\r\nconst MODE_DRAW = 1;\r\nconst MODE_EDIT = 2;\r\n\r\nproj4.defs(\r\n  \"EPSG:32638\",\r\n  \"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32639\",\r\n  \"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32640\",\r\n  \"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32641\",\r\n  \"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32642\",\r\n  \"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32643\",\r\n  \"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32644\",\r\n  \"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nproj4.defs(\r\n  \"EPSG:32645\",\r\n  \"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs\"\r\n);\r\nregister(proj4);\r\n\r\nconst highlightStyle = [\r\n  new Style({\r\n    stroke: new Stroke({\r\n      color: \"#f00\",\r\n      width: 1\r\n    }),\r\n    fill: new Fill({\r\n      color: \"rgba(255,0,0,0.1)\"\r\n    }),\r\n    text: new Text({\r\n      font: \"12px Calibri,sans-serif\",\r\n      fill: new Fill({\r\n        color: \"#000\"\r\n      }),\r\n      stroke: new Stroke({\r\n        color: \"#f00\",\r\n        width: 3\r\n      })\r\n    })\r\n  }),\r\n  new Style({\r\n    image: new Circle({\r\n      radius: 5,\r\n      fill: new Fill({\r\n        color: \"orange\"\r\n      })\r\n    }),\r\n    geometry: function(feature) {\r\n      // return the coordinates of the first ring of the polygon\r\n      var coordinates = feature.getGeometry().getCoordinates()[0];\r\n      return new MultiPoint(coordinates);\r\n    }\r\n  })\r\n];\r\n\r\nconst borderStyle = new Style({\r\n  stroke: new Stroke({\r\n    color: \"#f00\",\r\n    width: 2\r\n  })\r\n});\r\n\r\nconst extent = [4975133, 4759886, 9925806, 7548309];\r\n\r\nfunction EknMap(props) {\r\n  const [map, setMap] = React.useState();\r\n  const [layers, setLayers] = React.useState();\r\n  const [openLayers, setOpenLayers] = React.useState(false);\r\n  const [openLegend, setOpenLegend] = React.useState(false);\r\n  const [openInfo, setOpenInfo] = React.useState(false);\r\n  const [mode, setMode] = React.useState(MODE_SELECT);\r\n  const [openLogin, setOpenLogin] = React.useState(false);\r\n  const [openRegion, setOpenRegion] = React.useState(false);\r\n  const [searchResult, setSearchResult] = React.useState({});\r\n  const [features, setFeatures] = React.useState([]);\r\n  const [dark, setDark] = React.useState(false);\r\n  const [handlers] = React.useState({});\r\n  const [userInfo, setUserInfo] = React.useState();\r\n  const [region, setRegion] = React.useState();\r\n  const [getObjects, setGetObjects] = React.useState({});\r\n  const [arrestIsChecked, setArrestIsChecked] = React.useState();\r\n\r\n  const [mousePosition] = useState(\r\n    new MousePosition({\r\n      coordinateFormat: createStringXY(4),\r\n      className: \"custom-mouse-position\",\r\n      undefinedHTML: \"&nbsp;\"\r\n    })\r\n  );\r\n\r\n  const darkPalette = {\r\n    text: \"#ffffff\",\r\n    primary: \"#303030\",\r\n    secondary: \"#606060\",\r\n    additional: \"#484848\",\r\n    accent: \"#909090\",\r\n    turq: \"#2EA297\"\r\n  };\r\n\r\n  const lightPalette = {\r\n    text: \"#000000\",\r\n    primary: \"#DCDCDC\",\r\n    secondary: \"#ffffff\",\r\n    additional: \"#C5C5C5\",\r\n    accent: \"#909090\",\r\n    turq: \"#2ea297\"\r\n  };\r\n\r\n  const handleSelect = useCallback(\r\n    geom => {\r\n      const view = map.getView();\r\n      const selGeom = geom\r\n        .clone()\r\n        .transform(\"EPSG:\" + region.srs, view.getProjection());\r\n      view.fit(selGeom, { duration: 500, maxZoom: 19 });\r\n      layers.select.getSource().clear();\r\n      layers.select.getSource().addFeature(\r\n        new Feature({\r\n          geometry: selGeom\r\n        })\r\n      );\r\n    },\r\n    [map, layers, region]\r\n  );\r\n\r\n  /**\r\n   * Внешние функции\r\n   */\r\n  useEffect(() => {\r\n    if (props.updateSize) {\r\n      map.updateSize();\r\n    }\r\n  }, [map, props.updateSize]);\r\n\r\n  useEffect(() => {\r\n    if (layers && props.changeLayerVisibility) {\r\n      for (let layerName in props.changeLayerVisibility) {\r\n        let visibility = props.changeLayerVisibility[layerName];\r\n        showLayer(layers, layerName, visibility);\r\n      }\r\n    }\r\n  }, [layers, props.changeLayerVisibility]);\r\n\r\n  // Выбор района\r\n  useEffect(() => {\r\n    if (props.selectDistrict) {\r\n      map.updateSize();\r\n      handlers.setRegion(props.selectDistrict);\r\n    }\r\n  }, [map, handlers, props.selectDistrict]);\r\n\r\n  // Выделение ЗУ по кадастровому номеру.\r\n  useEffect(() => {\r\n    if (props.selectCadnum) {\r\n      search(props.selectCadnum).then(res => {\r\n        if (res.lands && res.lands.length > 0) {\r\n          handleSelect(new WKT().readGeometry(res.lands[0].geometry))\r\n        }\r\n      })\r\n    }\r\n  }, [handleSelect, props.selectCadnum]);\r\n\r\n  // Выделение полигона\r\n  useEffect(() => {\r\n    if (props.selection) {\r\n      handleSelect(props.selection);\r\n    }\r\n  }, [handleSelect, props.selection]);\r\n\r\n  useEffect(() => {\r\n    if (window['requestFromGis']) {\r\n      window['requestFromGis'](props.uid, searchResult);\r\n    }\r\n  }, [props.uid, searchResult]);\r\n\r\n  // Окончание блока внешних функций\r\n\r\n  const viewRegion = useCallback(() => {\r\n    if (region) {\r\n      map\r\n        .getView()\r\n        .fit(\r\n          new WKT()\r\n            .readGeometry(region.geom)\r\n            .transform(\"EPSG:3857\", \"EPSG:\" + region.srs),\r\n          { duration: 1000 }\r\n        );\r\n    } else {\r\n      map.getView().fit(extent, { duration: 1000 });\r\n    }\r\n  }, [map, region]);\r\n\r\n  const setDefaultView = useCallback(() => {\r\n    map.getView().fit(extent, { duration: 1000 });\r\n    setRegion();\r\n  }, [map]);\r\n\r\n  handlers.setRegion = district => {\r\n    restSetDistrict(district).then(() => {\r\n      setRegion(district);\r\n      setOpenRegion(false);\r\n\r\n      const newPojection = \"EPSG:\" + district.srs;\r\n\r\n      const geom = new WKT()\r\n        .readGeometry(district.geom)\r\n        .transform(\"EPSG:3857\", newPojection);\r\n      layers.borders.getSource().clear();\r\n      layers.borders.getSource().addFeature(\r\n        new Feature({\r\n          geometry: geom\r\n        })\r\n      );\r\n\r\n      const view = new View({\r\n        projection: newPojection,\r\n        center: transform(\r\n          map.getView().getCenter(),\r\n          map.getView().getProjection(),\r\n          newPojection\r\n        ),\r\n        zoom: map.getView().getZoom()\r\n      });\r\n\r\n      map.setView(view);\r\n      view.fit(geom, { duration: 1000 });\r\n\r\n      setOpenLayers(false);\r\n      setOpenLegend(false);\r\n      setOpenRegion(false);\r\n      setOpenInfo(false);\r\n      updateLayers(layers, district.regionCode, district.code, district.srs);\r\n      showLayer(layers, \"uk\", true);\r\n      mousePosition.setProjection(newPojection);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    login({})\r\n      .then(result => {\r\n        if (result.result === 0) {\r\n          setUserInfo(result);\r\n        } else {\r\n          setUserInfo(null);\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }, []);\r\n\r\n  const handleLogin = userInfo => {\r\n    login(userInfo)\r\n      .then(result => {\r\n        console.log(\"handleLogin\", result);\r\n        if (result.result === 0) {\r\n          setUserInfo(result);\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout()\r\n      .then(() => {\r\n        setUserInfo(null);\r\n        setOpenLogin(false);\r\n      })\r\n      .catch(e => console.log(e));\r\n  };\r\n\r\n  const handleSearch = text => {\r\n    search(text).then(result => {\r\n      setSearchResult(result);\r\n    });\r\n\r\n    setGetObjects({});\r\n  };\r\n\r\n  const handleGetLayerObjects = (layerName, arrestChecked) => {\r\n    getLayerObjects(layerName, 0, 10).then(result => {\r\n      setSearchResult(result);\r\n      setArrestIsChecked(arrestChecked);\r\n      handleOpenInfo(true);\r\n    });\r\n\r\n    setGetObjects({\r\n      func: pageNum => {\r\n        getLayerObjects(layerName, pageNum, 10).then(result => {\r\n          setSearchResult(result);\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (mode === MODE_DRAW) {\r\n      layers.draw.getSource().clear();\r\n      const snapSource = new Vector({\r\n        wrapX: false,\r\n        format: new GeoJSON(),\r\n        projection: \"EPSG:\" + region.srs,\r\n        loader: function(extent, resolution, projection) {\r\n          if (resolution < 100) {\r\n            const box = transform(extent, projection, \"EPSG:\" + region.srs);\r\n            wfsGetFeatures(\r\n              `egkn:gzk_geom.u_${region.regionCode}_${region.code}`,\r\n              box,\r\n              region.srs,\r\n              50\r\n            )\r\n              .then(features => snapSource.addFeatures(features))\r\n              .finally(() =>\r\n                wfsGetFeatures(\r\n                  `egkn:redlines_${region.regionCode}_${region.code}`,\r\n                  box,\r\n                  region.srs,\r\n                  50\r\n                )\r\n                  .then(features => snapSource.addFeatures(features))\r\n                  .finally(() =>\r\n                    wfsGetFeatures(\r\n                      `egkn:funczones_${region.regionCode}_${region.code}`,\r\n                      box,\r\n                      region.srs,\r\n                      50\r\n                    ).then(features => snapSource.addFeatures(features))\r\n                  )\r\n              );\r\n          }\r\n        },\r\n        strategy: bboxStrategy\r\n      });\r\n\r\n      layers.snap = new VectorLayer({\r\n        source: snapSource,\r\n        style: null\r\n      });\r\n      map.addLayer(layers.snap);\r\n\r\n      const snap = new Snap({ source: layers.snap.getSource() });\r\n      const draw = new Draw({\r\n        source: layers.draw.getSource(),\r\n        type: \"Polygon\"\r\n      });\r\n      draw.on(\"drawend\", drawEvent => {\r\n        // Корректируем последнюю коородинату\r\n        console.log(\"drawend\", drawEvent.feature);\r\n        const coords = drawEvent.feature.getGeometry().getCoordinates()[0];\r\n        coords[coords.length - 1] = coords[0];\r\n        drawEvent.feature.set(\"temp\", true);\r\n        setFeatures([drawEvent.feature]);\r\n        setMode(MODE_EDIT);\r\n      });\r\n      map.addInteraction(draw);\r\n      map.addInteraction(snap);\r\n\r\n      return () => {\r\n        map.removeLayer(layers.snap);\r\n        map.removeInteraction(draw);\r\n        map.removeInteraction(snap);\r\n      };\r\n    } else if (mode === MODE_EDIT) {\r\n      const snap = new Snap({ source: layers.snap.getSource() });\r\n      const modify = new Modify({ source: layers.draw.getSource() });\r\n      modify.on(\"modifyend\", event => {\r\n        setFeatures([features[0]]);\r\n      });\r\n      map.addLayer(layers.snap);\r\n      map.addInteraction(modify);\r\n      map.addInteraction(snap);\r\n\r\n      return () => {\r\n        map.removeLayer(layers.snap);\r\n        map.removeInteraction(modify);\r\n        map.removeInteraction(snap);\r\n      };\r\n    }\r\n  }, [map, mode, layers, region, features]);\r\n\r\n  const handleLoadFeature = useCallback(\r\n    coords => {\r\n      coords.push(coords[0]);\r\n      const feature = new Feature({\r\n        geometry: new Polygon([coords]),\r\n        name: \"f1\"\r\n      });\r\n      feature.setId(1);\r\n      feature.set(\"temp\", true);\r\n      console.log(\"handleLoadFeature\", feature);\r\n      layers.draw.getSource().clear();\r\n      layers.draw.getSource().addFeature(feature);\r\n      setMode(MODE_EDIT);\r\n      setFeatures([feature]);\r\n      map.getView().fit(feature.getGeometry());\r\n    },\r\n    [map, layers]\r\n  );\r\n\r\n  var handleOpenLayers = (event, value) => {\r\n    // Закрываем окно поиска\r\n    setOpenInfo(false);\r\n    // Закрываем окно легенды\r\n    setOpenLegend(false);\r\n    setOpenLayers(value);\r\n  };\r\n\r\n  var handleOpenLegend = (event, value) => {\r\n    // Закрываем окно слоев\r\n    setOpenLayers(false);\r\n    // Закрываем окно поиска\r\n    setOpenInfo(false);\r\n    setOpenLegend(value);\r\n  };\r\n\r\n  const handleOpenInfo = useCallback(value => {\r\n    // Закрываем окно слоев\r\n    setOpenLayers(false);\r\n    // Закрываем окно легенды\r\n    setOpenLegend(false);\r\n    setOpenInfo(value);\r\n  }, []);\r\n\r\n  const handleZoomIn = useCallback(() => {\r\n    const view = map.getView();\r\n    view.animate({ zoom: view.getZoom() + 1, duration: 200 });\r\n  }, [map]);\r\n\r\n  const handleZoomOut = useCallback(() => {\r\n    const view = map.getView();\r\n    view.animate({ zoom: view.getZoom() - 1, duration: 200 });\r\n  }, [map]);\r\n\r\n  const handleSetDark = useCallback(value => {\r\n    if (value) {\r\n      document.getElementsByClassName(\"ol-scale-line-inner\")[0].style.color =\r\n        \"white\";\r\n      document.getElementsByClassName(\r\n        \"ol-scale-line ol-unselectable\"\r\n      )[0].style.border = \"1px solid white\";\r\n      document.getElementsByClassName(\"ol-scale-line ol-unselectable\")[0].style[\r\n        \"border-top\"\r\n      ] = \"none\";\r\n    } else {\r\n      document.getElementsByClassName(\"ol-scale-line-inner\")[0].style.color =\r\n        \"black\";\r\n      document.getElementsByClassName(\r\n        \"ol-scale-line ol-unselectable\"\r\n      )[0].style.border = \"1px solid black\";\r\n      document.getElementsByClassName(\"ol-scale-line ol-unselectable\")[0].style[\r\n        \"border-top\"\r\n      ] = \"none\";\r\n    }\r\n    setDark(value);\r\n  }, []);\r\n\r\n  const infoHandler = useCallback(\r\n    event => {\r\n      const coords = transform(\r\n        event.coordinate,\r\n        event.map.getView().getProjection(),\r\n        \"EPSG:\" + region.srs\r\n      );\r\n      get(coords[0], coords[1]).then(result => {\r\n        setGetObjects({});\r\n        setSearchResult(result);\r\n        handleOpenInfo(true);\r\n      });\r\n    },\r\n    [handleOpenInfo, region]\r\n  );\r\n\r\n  const handleSend = useCallback((id, status) => {\r\n    send(id, status).then(() => {\r\n      layers.req.getSource().updateParams({\"time\": Date.now()});\r\n      setMode(MODE_SELECT);\r\n    })\r\n  }, [layers]);\r\n\r\n  useEffect(() => {\r\n    let myMap = map;\r\n    if (!myMap) {\r\n      myMap = new Map({\r\n        target: \"map\",\r\n        controls: [\r\n          new OverviewMap({ target: \"1\" }),\r\n          mousePosition,\r\n          new ScaleLine()\r\n        ],\r\n        layers: []\r\n      });\r\n\r\n      myMap.getView().fit(extent);\r\n\r\n      const layers = createLayers(myMap);\r\n\r\n      setMap(myMap);\r\n      setLayers(layers);\r\n    }\r\n  }, [map, mousePosition, layers, handlers]);\r\n\r\n  useEffect(() => {\r\n    if (map && infoHandler && mode === MODE_SELECT) {\r\n      layers.draw.getSource().clear();\r\n      map.on(\"singleclick\", infoHandler);\r\n      return () => {\r\n        map.un(\"singleclick\", infoHandler);\r\n      };\r\n    }\r\n  }, [map, layers, mode, infoHandler]);\r\n\r\n  //Alex\r\n  function closeLayers() {\r\n    setOpenLayers(false);\r\n  }\r\n\r\n  function closeMapInfo() {\r\n    setOpenInfo(false);\r\n  }\r\n\r\n  const createButtons = () => {\r\n    const buttons = [\r\n      {\r\n        tooltipText: \"Авторизоваться\",\r\n        clickHandler: () => setOpenLogin(!openLogin),\r\n        standalone: true\r\n      },\r\n      {\r\n        tooltipText: \"Подать заявку\",\r\n        clickHandler: setMode.bind(\r\n          this,\r\n          mode === MODE_SELECT ? MODE_DRAW : MODE_SELECT\r\n        )\r\n      },\r\n      {\r\n        tooltipText: \"Выбрать регион\",\r\n        clickHandler: () => setOpenRegion(!openRegion)\r\n      },\r\n      {\r\n        tooltipText: \"Поиск объекта\",\r\n        clickHandler: () => handleOpenInfo(!openInfo),\r\n        standalone: true\r\n      },\r\n      {\r\n        tooltipText: \"Управление картой\",\r\n        clickHandler: event => handleOpenLayers(event, !openLayers)\r\n      },\r\n      {\r\n        tooltipText: \"Условные обозначения\",\r\n        clickHandler: event => handleOpenLegend(event, !openLegend)\r\n      },\r\n      {\r\n        tooltipText: \"Посмотреть статистику\",\r\n        clickHandler: () => {},\r\n        standalone: true\r\n      },\r\n      {\r\n        tooltipText: \"Общий вид (регион)\",\r\n        clickHandler: viewRegion\r\n      },\r\n      {\r\n        tooltipText: \"Приблизить\",\r\n        clickHandler: handleZoomIn\r\n      },\r\n      {\r\n        tooltipText: \"Отдалить\",\r\n        clickHandler: handleZoomOut\r\n      },\r\n      {\r\n        tooltipText: \"Общий вид (Казахстан)\",\r\n        clickHandler: setDefaultView\r\n      }\r\n    ];\r\n\r\n    return buttons.map(button => {\r\n      if (\r\n        (!button.standalone || props.standalone)\r\n        && (button.tooltipText === \"Подать заявку\" || !(button.tooltipText === \"Подать заявку\"))\r\n      ) {\r\n        return (\r\n          <Button\r\n            key={button.tooltipText}\r\n            dataFor={button.tooltipText}\r\n            theme={dark ? lightPalette : darkPalette}\r\n            userInfo={userInfo}\r\n            tooltipText={button.tooltipText}\r\n            tooltipDark={dark}\r\n            handleClick={button.clickHandler}\r\n            title={\r\n              button.tooltipText !== \"Выбрать регион\"\r\n                ? null\r\n                : region\r\n                ? region.nameRu\r\n                : button.tooltipText\r\n            }\r\n          />\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ height: \"100%\" }}>\r\n      {props.standalone && <Header dark={dark} />}\r\n      <div id=\"map\" style={{ height: \"100%\" }} />\r\n      <EknMapLayers\r\n        theme={dark ? lightPalette : darkPalette}\r\n        open={openLayers}\r\n        setOpen={closeLayers.bind(this)}\r\n        showLayer={showLayer.bind(this, layers)}\r\n        setLayerOpacity={setLayerOpacity.bind(this, map, layers)}\r\n        setDark={handleSetDark}\r\n        handleGetLayerObjects={handleGetLayerObjects}\r\n        dark={dark}\r\n        region={region}\r\n      />\r\n      <LegendWindow\r\n        open={openLegend}\r\n        theme={dark ? lightPalette : darkPalette}\r\n      />\r\n      {createButtons()}\r\n      <div className=\"srs-title\">\r\n        {region ? getCoordSystem(region.srs) : \"WGS 84\"}\r\n      </div>\r\n      {openRegion && (\r\n        <ChooseRegion\r\n          theme={dark ? lightPalette : darkPalette}\r\n          setRegion={handlers.setRegion}\r\n          showLayer={showLayer.bind(this, layers)}\r\n          regions={props.regions}\r\n        />\r\n      )}\r\n      {openLogin && userInfo && (\r\n        <UserProfile\r\n          theme={dark ? lightPalette : darkPalette}\r\n          userInfo={userInfo}\r\n          handleLogout={handleLogout}\r\n        />\r\n      )}\r\n      {openLogin && !userInfo && (\r\n        <LoginDialog\r\n          theme={dark ? lightPalette : darkPalette}\r\n          userInfo={userInfo}\r\n          setUserInfo={handleLogin}\r\n          setOpenLogin={value => {\r\n            setOpenLogin(value);\r\n          }}\r\n        />\r\n      )}\r\n      <EknMapInfo\r\n        open={openInfo}\r\n        setOpen={closeMapInfo.bind(this)}\r\n        anchorEl={document.getElementById(\"map\")}\r\n        searchResult={searchResult}\r\n        map={map}\r\n        lyers={layers}\r\n        handleSelect={handleSelect}\r\n        handleSearch={handleSearch}\r\n        getObjects={getObjects}\r\n        theme={dark ? lightPalette : darkPalette}\r\n        arrestIsChecked={arrestIsChecked}\r\n        dark={dark}\r\n      />\r\n      <EknMapLandRequest\r\n        theme={dark ? lightPalette : darkPalette}\r\n        open={mode !== MODE_SELECT}\r\n        setOpen={setMode}\r\n        features={features}\r\n        handleLoadFeature={handleLoadFeature}\r\n        handleSend={handleSend}\r\n        standalone={props.standalone}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction createLayers(map) {\r\n  const gsUrl = window.GS_URL;\r\n  const layers = {};\r\n\r\n  layers.kazgeo = new TileLayer({\r\n    source: new TileWMS({\r\n      url: \"https://kazmap.kz/geoserver/wms\",\r\n      params: { LAYERS: \"Kazakhstan_aero\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.kazgeo);\r\n\r\n  layers.garysh = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:basemap.For_all_Mosaic_KZ\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.garysh);\r\n\r\n  layers.bing = new TileLayer({\r\n    preload: Infinity,\r\n    source: new BingMaps({\r\n      key: \"AuydQjZggYuwKfCMY808Wmzcil6xXHWOkb-t20IZ8ivHXq6ZtaZ5DDZrbRJ6BQq4\",\r\n      imagerySet: \"AerialWithLabelsOnDemand\"\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.bing);\r\n\r\n  layers.base = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/base/wms`,\r\n      params: { LAYERS: \"base:basemap.geocom\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    })\r\n  });\r\n  map.addLayer(layers.base);\r\n\r\n  layers.uk = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"base:uk\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.uk);\r\n\r\n  layers.pch = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:pch\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.pch);\r\n\r\n  layers.rst = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:rst\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.rst);\r\n\r\n  layers.ugl = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:ugl\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.ugl);\r\n\r\n  layers.eval = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:oz_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.eval);\r\n\r\n  layers.func = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:funczones_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.func);\r\n\r\n  layers.pdp = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:pdp_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.pdp);\r\n\r\n  layers.gp = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:gp_05_085\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.gp);\r\n\r\n  layers.vop = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:vop_05_085\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.vop);\r\n\r\n  layers.inv = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:inv_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.inv);\r\n\r\n  layers.voz = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:voz_05_085\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.voz);\r\n\r\n  layers.water = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:water_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.water);\r\n\r\n  layers.gas = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:gas_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.gas);\r\n\r\n  layers.storm_water = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:storm_water_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.storm_water);\r\n\r\n  layers.con = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:con_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.con);\r\n\r\n  layers.heat = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:heat_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.heat);\r\n\r\n  layers.sewer = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:sewer_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.sewer);\r\n\r\n  layers.electr = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:electr_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.electr);\r\n\r\n  layers.redlines = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:redlines_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.redlines);\r\n\r\n  layers.lands = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:u_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.lands);\r\n\r\n  layers.arrest = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:a_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.arrest);\r\n\r\n  layers.free = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:freelands_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.free);\r\n\r\n  layers.req = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:reqland_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.req);\r\n\r\n  layers.buildings = new TileLayer({\r\n    source: new TileWMS({\r\n      url: `${gsUrl}/egkn/wms`,\r\n      params: { LAYERS: \"egkn:ned_02_036\", TILED: true },\r\n      serverType: \"geoserver\",\r\n      transition: 0\r\n    }),\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.buildings);\r\n\r\n  const nedLabelSource = new Vector({\r\n    wrapX: false,\r\n    format: new GeoJSON(),\r\n    projection: \"EPSG:3857\",\r\n    strategy: (extent, resolution) => {\r\n      if (nedLabelSource.resolution_ !== resolution) {\r\n        nedLabelSource.loadedExtentsRtree_.clear();\r\n      }\r\n      return [extent];\r\n    }\r\n  });\r\n\r\n  const landsLabelSource = new Vector({\r\n    wrapX: false,\r\n    format: new GeoJSON(),\r\n    projection: \"EPSG:3857\",\r\n    strategy: (extent, resolution) => {\r\n      if (landsLabelSource.resolution_ !== resolution) {\r\n        landsLabelSource.loadedExtentsRtree_.clear();\r\n      }\r\n      return [extent];\r\n    }\r\n  });\r\n\r\n  const labelStyle = new Style({\r\n    text: new Text({\r\n      font: \"12px Calibri,sans-serif\",\r\n      overflow: true,\r\n      fill: new Fill({\r\n        color: \"#000\"\r\n      }),\r\n      stroke: new Stroke({\r\n        color: \"#fff\",\r\n        width: 3\r\n      })\r\n    })\r\n  });\r\n\r\n  layers.lands_label = new VectorLayer({\r\n    source: landsLabelSource,\r\n    style: feature => {\r\n      labelStyle.getText().setText(feature.get(\"label\"));\r\n      return labelStyle;\r\n    },\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.lands_label);\r\n\r\n  layers.buildings_label = new VectorLayer({\r\n    source: nedLabelSource,\r\n    style: feature => {\r\n      labelStyle.getText().setText(feature.get(\"label\"));\r\n      return labelStyle;\r\n    },\r\n    visible: false\r\n  });\r\n  map.addLayer(layers.buildings_label);\r\n\r\n  layers.borders = new VectorLayer({\r\n    source: new Vector(),\r\n    style: borderStyle\r\n  });\r\n  map.addLayer(layers.borders);\r\n\r\n  layers.draw = new VectorLayer({\r\n    source: new Vector(),\r\n    style: highlightStyle\r\n  });\r\n  map.addLayer(layers.draw);\r\n\r\n  layers.select = new VectorLayer({\r\n    source: new Vector(),\r\n    style: highlightStyle\r\n  });\r\n  map.addLayer(layers.select);\r\n\r\n  return layers;\r\n}\r\n\r\nfunction showLayer(layers, name, show) {\r\n  layers[name].setVisible(show);\r\n  if (name === \"lands\") {\r\n    layers.lands_label.setVisible(show);\r\n  } else if (name === \"buildings\") {\r\n    layers.buildings_label.setVisible(show);\r\n  }\r\n}\r\n\r\nfunction setLayerOpacity(map, layers, name, value) {\r\n  layers[name].setOpacity(value / 100);\r\n}\r\n\r\nfunction updateLayers(layers, regionCode, code, srs) {\r\n  let layer = layers.lands;\r\n  let params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:gzk_geom.u_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.pch;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:pch_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.rst;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:rst_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.ugl;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:ugl_${regionCode}_${code},egkn:ugpol_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.eval;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:oz_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.func;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:funczones_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.redlines;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:redlines_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.arrest;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:a_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.free;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:freelands_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.req;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:reqland_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.uk;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:uk_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.pdp;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:pdp_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.gp;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:gp_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.vop;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:vop_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.inv;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:inv_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.voz;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:voz_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.water;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:water_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.gas;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:gas_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.storm_water;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:storm_water_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.heat;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:heat_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.sewer;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:sewer_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.electr;\r\n  params = layer.getSource().getParams();\r\n  params.LAYERS = `egkn:electr_${regionCode}_${code}`;\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  layer = layers.buildings;\r\n  params = layer.getSource().getParams();\r\n  if (regionCode === \"22\") {\r\n    params.LAYERS = `egkn:ned_19_309`;\r\n  } else {\r\n    params.LAYERS = `egkn:ned_${regionCode}_${code}`;\r\n  }\r\n  params.projection = `EPSG:${srs}`;\r\n  layer.getSource().updateParams(params);\r\n\r\n  const landsLabelSource = layers.lands_label.getSource();\r\n  landsLabelSource.setLoader((extent, resolution, projection) => {\r\n    getLayerLabels(\"lands\", extent, resolution).then(json => {\r\n      landsLabelSource.resolution_ = resolution;\r\n      const wkt = new WKT();\r\n      landsLabelSource.getFeatures().forEach(feature => {\r\n        landsLabelSource.removeFeature(feature);\r\n      });\r\n      if (json.lands) {\r\n        landsLabelSource.addFeatures(\r\n          json.lands.map(e => {\r\n            return new Feature({\r\n              label: e.label,\r\n              geometry: wkt.readGeometry(e.geometry)\r\n            });\r\n          })\r\n        );\r\n      }\r\n    });\r\n  });\r\n  landsLabelSource.clear();\r\n\r\n  const nedLabelSource = layers.buildings_label.getSource();\r\n  nedLabelSource.setLoader((extent, resolution, projection) => {\r\n    getLayerLabels(\"buildings\", extent, resolution).then(json => {\r\n      nedLabelSource.resolution_ = resolution;\r\n      const wkt = new WKT();\r\n      nedLabelSource.getFeatures().forEach(feature => {\r\n        nedLabelSource.removeFeature(feature);\r\n      });\r\n      if (json.buildings) {\r\n        nedLabelSource.addFeatures(\r\n          json.buildings.map(e => {\r\n            return new Feature({\r\n              label: e.label,\r\n              geometry: wkt.readGeometry(e.geometry)\r\n            });\r\n          })\r\n        );\r\n      }\r\n    });\r\n  });\r\n  nedLabelSource.clear();\r\n}\r\n\r\nfunction login(userInfo) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${window.REST_URL}/map/login`, {\r\n      method: \"POST\",\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(userInfo)\r\n    })\r\n      .then(response => response.json())\r\n      .then(json => resolve(json))\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction logout() {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${window.REST_URL}/map/logout`, {\r\n      method: \"GET\",\r\n      mode: \"cors\",\r\n      credentials: \"include\"\r\n    })\r\n      .then(response => response.json())\r\n      .then(json => resolve(json))\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction restSetDistrict(district) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${window.REST_URL}/map/district`, {\r\n      method: \"PUT\",\r\n      mode: \"cors\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(district)\r\n    })\r\n      .then(() => resolve())\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction get(x, y) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(\r\n      `${window.REST_URL}/map/get?x=${x}&y=${y}&layers=${Config.visibleLayers}`,\r\n      {\r\n        method: \"GET\",\r\n        mode: \"cors\",\r\n        credentials: \"include\"\r\n      }\r\n    )\r\n      .then(response => response.json())\r\n      .then(json => resolve(json))\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction search(text) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(`${window.REST_URL}/map/search?kadastrNumber=${text}`, {\r\n      method: \"GET\",\r\n      mode: \"cors\",\r\n      credentials: \"include\"\r\n    })\r\n      .then(response => response.json())\r\n      .then(json => resolve(json))\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction getLayerObjects(layerName, pageNum, pageSize) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(\r\n      `${window.REST_URL}/map/layer?name=${layerName}&pageNum=${pageNum}&pageSize=${pageSize}`,\r\n      {\r\n        method: \"GET\",\r\n        mode: \"cors\",\r\n        credentials: \"include\"\r\n      }\r\n    )\r\n      .then(response => response.json())\r\n      .then(json => resolve(json))\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction getLayerLabels(layerName, extent, resolution) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(\r\n      `${window.REST_URL}/map/labels?name=${layerName}&extent=${extent.join(\r\n        \",\"\r\n      )}&res=${resolution}&srs=1`,\r\n      {\r\n        method: \"GET\",\r\n        mode: \"cors\",\r\n        credentials: \"include\"\r\n      }\r\n    )\r\n      .then(response => response.json())\r\n      .then(json => resolve(json))\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction wfsGetFeatures(typeName, extent, srs, limit) {\r\n  return new Promise((resolve, reject) => {\r\n    var url = `${\r\n      window.GS_URL\r\n    }/wfs?service=WFS&version=2.0.0&request=GetFeature&typename=${typeName}&outputFormat=application/json&srsname=EPSG:${srs}&bbox=${extent.join(\r\n      \",\"\r\n    )},EPSG:${srs}&propertyname=geom&count=${limit}`;\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      mode: \"cors\",\r\n      credentials: \"include\"\r\n    })\r\n      .then(response => {\r\n        console.log(response.headers.get(\"Content-Type\"));\r\n        if (\r\n          response.headers.get(\"Content-Type\").startsWith(\"application/json\")\r\n        ) {\r\n          response\r\n            .json()\r\n            .then(json => resolve(new GeoJSON().readFeatures(json)));\r\n        } else {\r\n          resolve([]);\r\n        }\r\n      })\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nfunction send(id, status) {\r\n  return new Promise((resolve, reject) => {\r\n    fetch(\r\n      `${window.REST_URL}/map/send?id=${id}&status=${status}`,\r\n      {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        credentials: \"include\"\r\n      }\r\n    )\r\n      .then(() => resolve())\r\n      .catch(e => reject(e));\r\n  });\r\n}\r\n\r\nexport default EknMap;\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { AppContext } from \"./context\";\r\nimport EknMap from \"./EknMap\";\r\nimport { WKT } from \"ol/format\";\r\n\r\n//window.GS_URL = \"http://192.168.13.178:8080/geoserver\";\r\nwindow.GS_URL = `${window.location.protocol}//${window.location.host}/geoserver`;\r\n\r\n//window.REST_URL = \"http://192.168.13.178:8080/egkn/rest\";\r\n//window.REST_URL = \"http://localhost:8080/egkn/rest\";\r\nwindow.REST_URL = `${window.location.protocol}//${window.location.host}/egkn/rest`;\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      regions: [],\r\n      changeLayerVisibility: {},\r\n      selection: undefined,\r\n      standalone: props.id === 'gis1'\r\n    };\r\n    this.id = props.id;\r\n  };\r\n  \r\n  componentDidMount() {\r\n    fetch(`${window.REST_URL}/map/districts`)\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        this.setState({regions: json});\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <AppContext.Provider value={this.regions}>\r\n        <EknMap\r\n          regions={this.state.regions}\r\n          changeLayerVisibility={this.state.changeLayerVisibility} \r\n          selection={this.state.selection}\r\n          standalone={this.state.standalone}\r\n          selectDistrict={this.state.selectDistrict}\r\n          selectCadnum={this.state.selectCadnum}\r\n          updateSize={this.state.updateSize}\r\n          uid={this.id} />\r\n      </AppContext.Provider>\r\n    );\r\n  }\r\n\r\n  // Внешние функции\r\n\r\n  updateSize() {\r\n    this.setState(Object.assign({}, this.state, { updateSize: Date.now() }));\r\n  }\r\n\r\n  parseRequest(json) {\r\n    Object.keys(json).forEach(funcName => {\r\n      switch(funcName) {\r\n        case 'showLayer':\r\n          this.showLayer(json[funcName].layer, json[funcName].show);\r\n          break;\r\n        case 'selectObject':\r\n          this.selectObject(json[funcName].wkt);\r\n          break;\r\n        case 'selectCadnum':\r\n            this.selectCadnum(json[funcName].cadnum);\r\n            break;\r\n        case 'selectDistrict':\r\n            this.selectDistrict(json[funcName].rnCode);\r\n            break;\r\n        default:\r\n          break;\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} layerName - наименование слоя (buildibgs, lands, redlines и т.д.)\r\n   * @param {*} show - true or false\r\n   * \r\n   * Например: showLayer('buildings', true)\r\n   */\r\n  showLayer(layerName, show) {\r\n    let arr = {};\r\n    arr[layerName] = show;\r\n    this.setState(Object.assign({}, this.state, { changeLayerVisibility: arr}));\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} wkt \r\n   * Например: 'POLYGON((680767.21487425 5793487.61627134,680804.708877024 5793447.73074242,680786.613906474 5793446.80150074,681059.569243689 5793176.6141648,682930.390545765 5791186.44744925,682460.663224626 5790753.40854621,682460.791333795 5790753.26356394,682460.757955872 5790753.23280712,682670.191791482 5790516.2423368,680702.773294162 5789155.94611479,680262.615644875 5789653.60993824,680515.174795243 5789850.50117689,680398.739846767 5790032.30452798,680145.329920468 5790271.98644112,679670.183020981 5789848.32776223,679245.613904825 5790207.46773992,678380.748149366 5790863.172772,678112.003281343 5793081.06219,678093.783462244 5793231.42064128,680744.98967984 5793485.66973821,680745.087548049 5793485.49424938,680767.21487425 5793487.61627134))'\r\n   */\r\n  selectObject(wkt) {\r\n    this.setState(Object.assign({}, this.state, { selection: new WKT().readGeometryFromText(wkt) }));\r\n  }\r\n\r\n  selectCadnum(cadnum) {\r\n    this.setState(Object.assign({}, this.state, { selectCadnum: cadnum }));\r\n  }\r\n\r\n  selectDistrict(rnCode) {\r\n    if (this.state.regions) {\r\n      for (let i = 0; i < this.state.regions.length; i++) {\r\n        const region = this.state.regions[i];\r\n        for (let j = 0; j < region.districts.length; j++) {\r\n          const district = region.districts[j];\r\n          if (district.rn_code === rnCode) {\r\n            this.setState(Object.assign({}, this.state, { selectDistrict: district }));\r\n            return;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nlet mapDivs = document.getElementsByClassName('or3-gis-map');\r\nfor (let i = 0; i < mapDivs.length; i++) {\r\n    const mapDiv = mapDivs[i];\r\n\r\n    if (mapDiv.childElementCount == 0) {\r\n        ReactDOM.render(<App \r\n                ref={(comp) => {window[`map_${mapDiv.getAttribute(\"id\")}`] = comp}}\r\n                id={mapDiv.getAttribute(\"id\")}\r\n                />, mapDiv);\r\n    }\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}